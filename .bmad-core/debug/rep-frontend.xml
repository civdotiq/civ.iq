<?xml version="1.0" encoding="UTF-8"?>
<codebase>
<!-- Generated on 2025-08-17T22:25:34.178Z -->
<!-- Project: civic-intel-hub -->
<file path="[bioguideId]/client-wrapper.tsx">
&apos;use client&apos;;

/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

import { useState, useEffect, Suspense, ComponentType } from &apos;react&apos;;

// Import types for proper type checking
interface CampaignFinanceData {
  financial_summary: Array&lt;{
    cycle: number;
    total_receipts: number;
    total_disbursements: number;
    cash_on_hand_end_period: number;
    individual_contributions: number;
    pac_contributions: number;
    party_contributions: number;
    candidate_contributions: number;
  }&gt;;
  recent_contributions: Array&lt;{
    contributor_name: string;
    contributor_employer?: string;
    contribution_receipt_amount: number;
    contribution_receipt_date: string;
  }&gt;;
  recent_expenditures: Array&lt;{
    recipient_name: string;
    disbursement_description: string;
    disbursement_amount: number;
    disbursement_date: string;
  }&gt;;
}

interface SponsoredBill {
  billId: string;
  number: string;
  title: string;
  congress: string;
  introducedDate: string;
  latestAction: {
    date: string;
    text: string;
  };
  type: string;
  chamber: &apos;House&apos; | &apos;Senate&apos;;
  status: string;
  policyArea?: string;
  cosponsors?: number;
  sponsorshipType?: &apos;sponsored&apos; | &apos;cosponsored&apos;;
  committees?: string[];
  subjects?: string[];
  url?: string;
}
import { LoadingErrorBoundary } from &apos;@/components/common/ErrorBoundary&apos;;
import dynamic from &apos;next/dynamic&apos;;
import {
  CampaignFinanceWrapper,
  BillsTrackerWrapper,
  VotingRecordsWrapper,
  NewsWrapper,
} from &apos;./DataFetchingWrappers&apos;;

// Dynamic imports for lazy loading - optimized for performance
const LazyBillsTracker = dynamic(
  () =&gt;
    import(&apos;@/features/legislation/components/BillsTracker&apos;).then(mod =&gt; ({
      default: mod.BillsTracker,
    })),
  {
    ssr: false,
    loading: () =&gt; &lt;div className=&quot;animate-pulse bg-gray-200 h-32 rounded&quot;&gt;&lt;/div&gt;,
  }
);

const LazyPartyAlignmentAnalysis = dynamic(
  () =&gt; import(&apos;@/features/representatives/components/PartyAlignmentAnalysis&apos;),
  {
    ssr: false,
    loading: () =&gt; &lt;div className=&quot;animate-pulse bg-gray-200 h-40 rounded&quot;&gt;&lt;/div&gt;,
  }
);

const LazyVotingRecordsTable = dynamic(
  () =&gt;
    import(&apos;@/features/representatives/components/SafeVotingRecordsTable&apos;)
      .then(mod =&gt; ({
        default: mod.SafeVotingRecordsTable,
      }))
      .catch(() =&gt; ({
        default: ({ bioguideId, chamber }: { bioguideId: string; chamber: &apos;House&apos; | &apos;Senate&apos; }) =&gt; (
          &lt;div className=&quot;bg-white rounded-lg border border-gray-200 p-8 text-center&quot;&gt;
            &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;Voting records are temporarily unavailable.&lt;/p&gt;
            &lt;p className=&quot;text-sm text-gray-500&quot;&gt;
              We&amp;apos;re working to display voting data for {chamber} representative {bioguideId}.
            &lt;/p&gt;
          &lt;/div&gt;
        ),
      })),
  {
    ssr: false,
    loading: () =&gt; &lt;div className=&quot;animate-pulse bg-gray-200 h-32 rounded&quot;&gt;&lt;/div&gt;,
  }
);

const LazyCampaignFinanceVisualizer = dynamic(
  () =&gt;
    import(&apos;@/features/campaign-finance/components/CampaignFinanceVisualizer&apos;).then(mod =&gt; ({
      default: mod.CampaignFinanceVisualizer,
    })),
  {
    ssr: false,
    loading: () =&gt; &lt;div className=&quot;animate-pulse bg-gray-200 h-32 rounded&quot;&gt;&lt;/div&gt;,
  }
);

const LazyEnhancedNewsFeed = dynamic(
  () =&gt;
    import(&apos;@/features/news/components/EnhancedNewsFeed&apos;).then(mod =&gt; ({
      default: mod.EnhancedNewsFeed,
    })),
  {
    ssr: false,
    loading: () =&gt; &lt;div className=&quot;animate-pulse bg-gray-200 h-32 rounded&quot;&gt;&lt;/div&gt;,
  }
);

// Dynamic import for enhanced profile tab
const EnhancedProfileTab = dynamic(
  () =&gt;
    import(&apos;@/features/representatives/components/ProfileTab/EnhancedProfileTab&apos;).then(mod =&gt; ({
      default: mod.EnhancedProfileTab,
    })),
  {
    ssr: false,
    loading: () =&gt; &lt;div className=&quot;animate-pulse bg-gray-200 h-64 rounded&quot;&gt;&lt;/div&gt;,
  }
);

interface RepresentativeDetails {
  bioguideId: string;
  name: string;
  firstName: string;
  lastName: string;
  party: string;
  state: string;
  district?: string;
  chamber: &apos;House&apos; | &apos;Senate&apos;;
  title: string;
  terms: Array&lt;{
    congress: string;
    startYear: string;
    endYear: string;
  }&gt;;
  currentTerm?: {
    start: string;
    end: string;
    office?: string;
    phone?: string;
    address?: string;
    website?: string;
    contactForm?: string;
    rssUrl?: string;
    stateRank?: &apos;junior&apos; | &apos;senior&apos;;
    class?: number;
  };
  socialMedia?: {
    twitter?: string;
    facebook?: string;
    youtube?: string;
    instagram?: string;
    mastodon?: string;
  };
  committees?: Array&lt;{
    name: string;
    role?: string;
    thomas_id?: string;
    id?: string;
  }&gt;;
}

interface RepresentativeProfileClientProps {
  representative: RepresentativeDetails;
  initialData: {
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    votes: any[];
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    bills: any[];
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    finance: any;
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    news: any[];
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    partyAlignment: any;
  };
  partialErrors: Record&lt;string, string&gt;;
  bioguideId: string;
  // Lazy-loaded components passed as props to prevent unnecessary bundling
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  VotingRecordsTable?: ComponentType&lt;any&gt;;
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  _CampaignFinanceVisualizer?: ComponentType&lt;any&gt;;
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  _EnhancedNewsFeed?: ComponentType&lt;any&gt;;
}

// Partial error display component
function PartialErrorDisplay({ partialErrors }: { partialErrors: Record&lt;string, string&gt; }) {
  const errorCount = Object.keys(partialErrors).length;

  if (errorCount === 0) return null;

  return (
    &lt;div className=&quot;bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6&quot;&gt;
      &lt;div className=&quot;flex items-center&quot;&gt;
        &lt;svg
          className=&quot;w-5 h-5 text-yellow-600 mr-2&quot;
          fill=&quot;none&quot;
          stroke=&quot;currentColor&quot;
          viewBox=&quot;0 0 24 24&quot;
        &gt;
          &lt;path
            strokeLinecap=&quot;round&quot;
            strokeLinejoin=&quot;round&quot;
            strokeWidth=&quot;2&quot;
            d=&quot;M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z&quot;
          /&gt;
        &lt;/svg&gt;
        &lt;h3 className=&quot;text-sm font-medium text-yellow-800&quot;&gt;
          Some data could not be loaded ({errorCount} {errorCount === 1 ? &apos;section&apos; : &apos;sections&apos;})
        &lt;/h3&gt;
      &lt;/div&gt;

      {process.env.NODE_ENV === &apos;development&apos; &amp;&amp; (
        &lt;details className=&quot;mt-2&quot;&gt;
          &lt;summary className=&quot;cursor-pointer text-sm text-yellow-700&quot;&gt;View Details&lt;/summary&gt;
          &lt;ul className=&quot;mt-2 text-sm text-yellow-700 space-y-1&quot;&gt;
            {Object.entries(partialErrors).map(([endpoint, error]) =&gt; (
              &lt;li key={endpoint} className=&quot;flex&quot;&gt;
                &lt;span className=&quot;font-medium capitalize mr-2&quot;&gt;{endpoint}:&lt;/span&gt;
                &lt;span className=&quot;text-yellow-600&quot;&gt;{error}&lt;/span&gt;
              &lt;/li&gt;
            ))}
          &lt;/ul&gt;
        &lt;/details&gt;
      )}
    &lt;/div&gt;
  );
}

// Client component for interactive tab functionality
export function RepresentativeProfileClient({
  representative,
  initialData: _initialData,
  partialErrors,
  bioguideId,
  VotingRecordsTable = LazyVotingRecordsTable,
  _CampaignFinanceVisualizer = LazyCampaignFinanceVisualizer,
  _EnhancedNewsFeed = LazyEnhancedNewsFeed,
}: RepresentativeProfileClientProps) {
  // eslint-disable-next-line no-console
  console.log(&apos;ðŸ”´ CLIENT MOUNTED at&apos;, new Date().toISOString());
  const [activeTab, setActiveTab] = useState(&apos;profile&apos;);

  useEffect(() =&gt; {
    // eslint-disable-next-line no-console
    console.log(&apos;ðŸŸ¢ useEffect ran&apos;);

    // Guard browser-only code
    if (typeof window !== &apos;undefined&apos; &amp;&amp; typeof document !== &apos;undefined&apos;) {
      document.title = &apos;JS WORKING&apos;;

      // Initialize global SWR states tracking
      (window as unknown as { SWR_STATES: Record&lt;string, unknown&gt; }).SWR_STATES = {};
    }
  }, []);

  // PHASE 2 DEBUG: Development-only data flow tracking (removed from production builds)
  useEffect(() =&gt; {
    if (process.env.NODE_ENV === &apos;development&apos;) {
      const debugInfo = {
        representative: {
          bioguideId: representative.bioguideId,
          name: representative.name,
          chamber: representative.chamber,
          hasCommittees: !!representative.committees,
          committeesCount: representative.committees?.length || 0,
        },
        initialData: {
          votes: Array.isArray(_initialData.votes) ? _initialData.votes.length : &apos;not array&apos;,
          bills: Array.isArray(_initialData.bills) ? _initialData.bills.length : &apos;not array&apos;,
          finance:
            typeof _initialData.finance === &apos;object&apos;
              ? Object.keys(_initialData.finance).length
              : &apos;not object&apos;,
          news: Array.isArray(_initialData.news) ? _initialData.news.length : &apos;not array&apos;,
        },
        partialErrors: Object.keys(partialErrors).length,
        bioguideId,
        activeTab,
        timestamp: new Date().toISOString(),
      };

      // Expose debug info to window for browser console access
      if (typeof window !== &apos;undefined&apos;) {
        (window as unknown as { CLIENT_DEBUG_INFO: typeof debugInfo }).CLIENT_DEBUG_INFO =
          debugInfo;
        // Add hydration test
        (window as unknown as { HYDRATION_TEST: boolean }).HYDRATION_TEST = true;
      }
    }
  }, [representative, _initialData, partialErrors, bioguideId, activeTab]);

  return (
    &lt;&gt;
      {/* Show partial errors if any */}
      &lt;PartialErrorDisplay partialErrors={partialErrors} /&gt;

      {/* Navigation Tabs */}
      &lt;div className=&quot;bg-white rounded-lg shadow-sm mb-6&quot;&gt;
        &lt;div className=&quot;border-b border-gray-200&quot;&gt;
          &lt;nav className=&quot;-mb-px flex space-x-8 px-6&quot;&gt;
            {[
              { id: &apos;profile&apos;, label: &apos;Profile&apos; },
              { id: &apos;voting&apos;, label: &apos;Voting Record&apos; },
              { id: &apos;bills&apos;, label: &apos;Legislation&apos; },
              { id: &apos;finance&apos;, label: &apos;Campaign Finance&apos; },
              { id: &apos;news&apos;, label: &apos;News&apos; },
            ].map(tab =&gt; (
              &lt;button
                key={tab.id}
                onClick={() =&gt; setActiveTab(tab.id)}
                className={`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${
                  activeTab === tab.id
                    ? &apos;border-blue-500 text-blue-600&apos;
                    : &apos;border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 cursor-pointer&apos;
                }`}
              &gt;
                {tab.label}
                {partialErrors[tab.id] &amp;&amp; &lt;span className=&quot;ml-1 text-xs text-red-500&quot;&gt;âš &lt;/span&gt;}
              &lt;/button&gt;
            ))}
          &lt;/nav&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Tab Content with Suspense boundaries for optimal loading */}
      &lt;div className=&quot;bg-white rounded-lg shadow-sm p-6&quot;&gt;
        {activeTab === &apos;profile&apos; &amp;&amp; (
          &lt;&gt;
            {/* eslint-disable-next-line no-console */}
            {console.log(&apos;Active tab:&apos;, activeTab, &apos;Rendering:&apos;, &apos;profile&apos;)}
            &lt;LoadingErrorBoundary&gt;
              &lt;Suspense
                fallback={
                  &lt;div className=&quot;animate-pulse space-y-4&quot;&gt;
                    &lt;div className=&quot;h-8 bg-gray-200 rounded w-1/4&quot;&gt;&lt;/div&gt;
                    &lt;div className=&quot;h-64 bg-gray-200 rounded&quot;&gt;&lt;/div&gt;
                    &lt;div className=&quot;h-32 bg-gray-200 rounded&quot;&gt;&lt;/div&gt;
                  &lt;/div&gt;
                }
              &gt;
                &lt;EnhancedProfileTab
                  representative={representative}
                  committees={representative.committees}
                /&gt;
              &lt;/Suspense&gt;
            &lt;/LoadingErrorBoundary&gt;
          &lt;/&gt;
        )}

        {activeTab === &apos;voting&apos; &amp;&amp; (
          &lt;&gt;
            {/* eslint-disable-next-line no-console */}
            {console.log(&apos;Active tab:&apos;, activeTab, &apos;Rendering:&apos;, &apos;voting&apos;)}
            &lt;LoadingErrorBoundary&gt;
              &lt;div className=&quot;space-y-6&quot;&gt;
                {/* Voting Records Header with Timestamp */}
                &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
                  &lt;h3 className=&quot;text-lg font-medium text-gray-900&quot;&gt;Voting Records&lt;/h3&gt;
                  &lt;span className=&quot;text-xs text-gray-500&quot;&gt;
                    Last updated: {new Date().toLocaleDateString()}
                  &lt;/span&gt;
                &lt;/div&gt;

                {/* Party Alignment Analysis */}
                {representative.party &amp;&amp; (
                  &lt;LazyPartyAlignmentAnalysis
                    bioguideId={bioguideId}
                    representative={{
                      name: representative.name || &apos;Representative&apos;,
                      party: representative.party,
                      state: representative.state || &apos;Unknown&apos;,
                      chamber: representative.chamber || &apos;Unknown&apos;,
                    }}
                  /&gt;
                )}

                {/* Voting records with real data fetching */}
                &lt;VotingRecordsWrapper
                  bioguideId={bioguideId}
                  chamber={representative.chamber}
                  VotingRecordsTable={VotingRecordsTable}
                /&gt;
              &lt;/div&gt;
            &lt;/LoadingErrorBoundary&gt;
          &lt;/&gt;
        )}

        {activeTab === &apos;bills&apos; &amp;&amp; (
          &lt;&gt;
            {/* eslint-disable-next-line no-console */}
            {console.log(
              &apos;Active tab:&apos;,
              activeTab,
              &apos;Rendering:&apos;,
              &apos;bills&apos;,
              &apos;Initial bills data:&apos;,
              Array.isArray(_initialData.bills) ? _initialData.bills.length : &apos;not array&apos;
            )}
            &lt;LoadingErrorBoundary&gt;
              &lt;div className=&quot;space-y-6&quot;&gt;
                {/* Bills Header with Timestamp */}
                &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
                  &lt;h3 className=&quot;text-lg font-medium text-gray-900&quot;&gt;Sponsored Legislation&lt;/h3&gt;
                  &lt;span className=&quot;text-xs text-gray-500&quot;&gt;
                    Last updated: {new Date().toLocaleDateString()}
                  &lt;/span&gt;
                &lt;/div&gt;

                {/* Bills tracker with real data fetching - now renders immediately */}
                &lt;BillsTrackerWrapper
                  bioguideId={bioguideId}
                  representative={{
                    name: representative.name,
                    chamber: representative.chamber,
                  }}
                  BillsTracker={
                    LazyBillsTracker as React.ComponentType&lt;{
                      bills: SponsoredBill[];
                      representative: { name: string; chamber: string };
                    }&gt;
                  }
                  initialData={_initialData.bills}
                /&gt;
              &lt;/div&gt;
            &lt;/LoadingErrorBoundary&gt;
          &lt;/&gt;
        )}

        {activeTab === &apos;finance&apos; &amp;&amp; (
          &lt;&gt;
            {/* eslint-disable-next-line no-console */}
            {console.log(&apos;Active tab:&apos;, activeTab, &apos;Rendering:&apos;, &apos;finance&apos;)}
            &lt;LoadingErrorBoundary&gt;
              &lt;div className=&quot;space-y-6&quot;&gt;
                {/* Campaign Finance Header with Timestamp */}
                &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
                  &lt;h3 className=&quot;text-lg font-medium text-gray-900&quot;&gt;Campaign Finance&lt;/h3&gt;
                  &lt;span className=&quot;text-xs text-gray-500&quot;&gt;
                    Last updated: {new Date().toLocaleDateString()}
                  &lt;/span&gt;
                &lt;/div&gt;

                {/* Campaign Finance with real data fetching - now renders immediately */}
                &lt;CampaignFinanceWrapper
                  bioguideId={bioguideId}
                  representative={{
                    name: representative.name,
                    party: representative.party,
                  }}
                  CampaignFinanceVisualizer={
                    LazyCampaignFinanceVisualizer as React.ComponentType&lt;{
                      financeData: CampaignFinanceData;
                      representative: { name: string; party: string };
                      bioguideId: string;
                    }&gt;
                  }
                /&gt;
              &lt;/div&gt;
            &lt;/LoadingErrorBoundary&gt;
          &lt;/&gt;
        )}

        {activeTab === &apos;news&apos; &amp;&amp; (
          &lt;&gt;
            {/* eslint-disable-next-line no-console */}
            {console.log(&apos;Active tab:&apos;, activeTab, &apos;Rendering:&apos;, &apos;news&apos;)}
            &lt;LoadingErrorBoundary&gt;
              &lt;div className=&quot;space-y-6&quot;&gt;
                {/* News Header with Timestamp */}
                &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
                  &lt;h3 className=&quot;text-lg font-medium text-gray-900&quot;&gt;Recent News&lt;/h3&gt;
                  &lt;span className=&quot;text-xs text-gray-500&quot;&gt;
                    Last updated: {new Date().toLocaleDateString()}
                  &lt;/span&gt;
                &lt;/div&gt;

                {/* News feed with real data fetching */}
                &lt;NewsWrapper
                  bioguideId={bioguideId}
                  representative={{
                    name: representative.name,
                    party: representative.party,
                    state: representative.state,
                  }}
                  EnhancedNewsFeed={
                    LazyEnhancedNewsFeed as React.ComponentType&lt;{
                      bioguideId: string;
                      representative: { name: string; party: string; state: string };
                    }&gt;
                  }
                /&gt;
              &lt;/div&gt;
            &lt;/LoadingErrorBoundary&gt;
          &lt;/&gt;
        )}
      &lt;/div&gt;
    &lt;/&gt;
  );
}

</file>
<file path="[bioguideId]/components/CleanSidebar.tsx">
/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

&apos;use client&apos;;

import React from &apos;react&apos;;
import Link from &apos;next/link&apos;;
import { Building, MapPin, BarChart3, Info } from &apos;lucide-react&apos;;

interface CleanSidebarProps {
  representative: {
    bioguideId: string;
    name: string;
    state: string;
    district?: string;
    chamber: &apos;House&apos; | &apos;Senate&apos;;
  };
}

export function CleanSidebar({ representative }: CleanSidebarProps) {
  const getStateFullName = (stateCode: string): string =&gt; {
    const stateNames: Record&lt;string, string&gt; = {
      AL: &apos;Alabama&apos;,
      AK: &apos;Alaska&apos;,
      AZ: &apos;Arizona&apos;,
      AR: &apos;Arkansas&apos;,
      CA: &apos;California&apos;,
      CO: &apos;Colorado&apos;,
      CT: &apos;Connecticut&apos;,
      DE: &apos;Delaware&apos;,
      FL: &apos;Florida&apos;,
      GA: &apos;Georgia&apos;,
      HI: &apos;Hawaii&apos;,
      ID: &apos;Idaho&apos;,
      IL: &apos;Illinois&apos;,
      IN: &apos;Indiana&apos;,
      IA: &apos;Iowa&apos;,
      KS: &apos;Kansas&apos;,
      KY: &apos;Kentucky&apos;,
      LA: &apos;Louisiana&apos;,
      ME: &apos;Maine&apos;,
      MD: &apos;Maryland&apos;,
      MA: &apos;Massachusetts&apos;,
      MI: &apos;Michigan&apos;,
      MN: &apos;Minnesota&apos;,
      MS: &apos;Mississippi&apos;,
      MO: &apos;Missouri&apos;,
      MT: &apos;Montana&apos;,
      NE: &apos;Nebraska&apos;,
      NV: &apos;Nevada&apos;,
      NH: &apos;New Hampshire&apos;,
      NJ: &apos;New Jersey&apos;,
      NM: &apos;New Mexico&apos;,
      NY: &apos;New York&apos;,
      NC: &apos;North Carolina&apos;,
      ND: &apos;North Dakota&apos;,
      OH: &apos;Ohio&apos;,
      OK: &apos;Oklahoma&apos;,
      OR: &apos;Oregon&apos;,
      PA: &apos;Pennsylvania&apos;,
      RI: &apos;Rhode Island&apos;,
      SC: &apos;South Carolina&apos;,
      SD: &apos;South Dakota&apos;,
      TN: &apos;Tennessee&apos;,
      TX: &apos;Texas&apos;,
      UT: &apos;Utah&apos;,
      VT: &apos;Vermont&apos;,
      VA: &apos;Virginia&apos;,
      WA: &apos;Washington&apos;,
      WV: &apos;West Virginia&apos;,
      WI: &apos;Wisconsin&apos;,
      WY: &apos;Wyoming&apos;,
      DC: &apos;District of Columbia&apos;,
    };
    return stateNames[stateCode] || stateCode;
  };

  return (
    &lt;div className=&quot;space-y-4&quot;&gt;
      {/* Federal Level Section */}
      &lt;div className=&quot;bg-white rounded-lg border border-gray-200 p-6 shadow-sm&quot;&gt;
        &lt;h3 className=&quot;text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2&quot;&gt;
          &lt;Building className=&quot;h-5 w-5 text-blue-500&quot; /&gt;
          Federal Level
        &lt;/h3&gt;
        &lt;p className=&quot;text-sm text-gray-600 mb-4 leading-relaxed&quot;&gt;
          U.S. Representatives serve specific congressional districts within their state, focusing
          on both national legislation and local district concerns.
        &lt;/p&gt;
        &lt;div className=&quot;inline-flex items-center px-3 py-1 bg-blue-50 text-blue-700 rounded-full text-sm font-medium&quot;&gt;
          {representative.state}
          {representative.district &amp;&amp; `-${representative.district}`}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* District Information Section */}
      &lt;div className=&quot;bg-white rounded-lg border border-gray-200 p-6 shadow-sm&quot;&gt;
        &lt;h3 className=&quot;text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2&quot;&gt;
          &lt;MapPin className=&quot;h-5 w-5 text-green-500&quot; /&gt;
          District Information
        &lt;/h3&gt;
        &lt;div className=&quot;space-y-3&quot;&gt;
          &lt;div className=&quot;flex justify-between items-center&quot;&gt;
            &lt;span className=&quot;text-sm text-gray-600&quot;&gt;State:&lt;/span&gt;
            &lt;span className=&quot;text-sm font-medium text-gray-900&quot;&gt;
              {representative.state} ({getStateFullName(representative.state)})
            &lt;/span&gt;
          &lt;/div&gt;
          {representative.district &amp;&amp; (
            &lt;div className=&quot;flex justify-between items-center&quot;&gt;
              &lt;span className=&quot;text-sm text-gray-600&quot;&gt;District:&lt;/span&gt;
              &lt;span className=&quot;text-sm font-medium text-gray-900&quot;&gt;{representative.district}&lt;/span&gt;
            &lt;/div&gt;
          )}
          &lt;div className=&quot;flex justify-between items-center&quot;&gt;
            &lt;span className=&quot;text-sm text-gray-600&quot;&gt;Chamber:&lt;/span&gt;
            &lt;span className=&quot;text-sm font-medium text-gray-900&quot;&gt;{representative.chamber}&lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;pt-3 border-t border-gray-100&quot;&gt;
            &lt;Link
              href={`/districts/${representative.state}${representative.district ? `-${representative.district}` : &apos;&apos;}`}
              className=&quot;text-blue-600 hover:text-blue-800 text-sm font-medium&quot;
            &gt;
              View district details &amp;gt;
            &lt;/Link&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Compare Representatives Section */}
      &lt;div className=&quot;bg-white rounded-lg border border-gray-200 p-6 shadow-sm&quot;&gt;
        &lt;h3 className=&quot;text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2&quot;&gt;
          &lt;BarChart3 className=&quot;h-5 w-5 text-purple-500&quot; /&gt;
          Compare Representatives
        &lt;/h3&gt;
        &lt;p className=&quot;text-sm text-gray-600 mb-4 leading-relaxed&quot;&gt;
          Compare {representative.name}&amp;apos;s voting record, campaign finances, and legislative
          activity with other representatives from your state or across the country.
        &lt;/p&gt;
        &lt;div className=&quot;space-y-2&quot;&gt;
          &lt;Link
            href={`/compare?reps=${representative.bioguideId}`}
            className=&quot;block text-blue-600 hover:text-blue-800 text-sm font-medium&quot;
          &gt;
            Compare representatives
          &lt;/Link&gt;
          &lt;Link
            href={`/representatives?state=${representative.state}`}
            className=&quot;block text-blue-600 hover:text-blue-800 text-sm font-medium&quot;
          &gt;
            View all from {representative.state}
          &lt;/Link&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Additional Resources Section */}
      &lt;div className=&quot;bg-white rounded-lg border border-gray-200 p-6 shadow-sm&quot;&gt;
        &lt;h3 className=&quot;text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2&quot;&gt;
          &lt;Info className=&quot;h-5 w-5 text-orange-500&quot; /&gt;
          Additional Resources
        &lt;/h3&gt;
        &lt;div className=&quot;space-y-2&quot;&gt;
          &lt;Link
            href=&quot;/about&quot;
            className=&quot;block text-blue-600 hover:text-blue-800 text-sm font-medium&quot;
          &gt;
            About CIV.IQ
          &lt;/Link&gt;
          &lt;Link
            href=&quot;/data-sources&quot;
            className=&quot;block text-blue-600 hover:text-blue-800 text-sm font-medium&quot;
          &gt;
            Data Sources
          &lt;/Link&gt;
          &lt;Link
            href=&quot;/privacy&quot;
            className=&quot;block text-blue-600 hover:text-blue-800 text-sm font-medium&quot;
          &gt;
            Privacy Policy
          &lt;/Link&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}

</file>
<file path="[bioguideId]/components/CommitteeMembershipsCard.tsx">
/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

&apos;use client&apos;;

import React from &apos;react&apos;;
import { Users } from &apos;lucide-react&apos;;
import { EnhancedRepresentative } from &apos;@/types/representative&apos;;

interface CommitteeMembershipsCardProps {
  representative: EnhancedRepresentative;
  className?: string;
}

export function CommitteeMembershipsCard({
  representative,
  className = &apos;&apos;,
}: CommitteeMembershipsCardProps) {
  const committees = representative.committees || [];

  return (
    &lt;div className={`bg-white rounded-lg border border-gray-200 shadow-sm ${className}`}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-100&quot;&gt;
        &lt;div className=&quot;flex items-center gap-2&quot;&gt;
          &lt;Users className=&quot;w-5 h-5 text-gray-500&quot; /&gt;
          &lt;h3 className=&quot;font-semibold text-gray-900&quot;&gt;Committee Memberships&lt;/h3&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div className=&quot;p-4&quot;&gt;
        {committees.length &gt; 0 ? (
          &lt;div className=&quot;space-y-3&quot;&gt;
            {committees.map((committee, index) =&gt; (
              &lt;div
                key={index}
                className=&quot;border border-gray-200 rounded-lg p-3 hover:shadow-sm transition-shadow&quot;
              &gt;
                &lt;div className=&quot;flex justify-between items-start&quot;&gt;
                  &lt;div className=&quot;flex-1&quot;&gt;
                    &lt;h4 className=&quot;font-medium text-gray-900 text-sm leading-5&quot;&gt;
                      {committee.name}
                    &lt;/h4&gt;
                    {committee.role &amp;&amp; (
                      &lt;div className=&quot;mt-2&quot;&gt;
                        &lt;span
                          className={`inline-block px-2 py-1 text-xs font-medium rounded-full ${
                            committee.role === &apos;Chair&apos;
                              ? &apos;bg-blue-100 text-blue-800&apos;
                              : committee.role === &apos;Ranking Member&apos;
                                ? &apos;bg-purple-100 text-purple-800&apos;
                                : &apos;bg-gray-100 text-gray-800&apos;
                          }`}
                        &gt;
                          {committee.role}
                        &lt;/span&gt;
                      &lt;/div&gt;
                    )}
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            ))}
          &lt;/div&gt;
        ) : (
          &lt;div className=&quot;text-center py-4&quot;&gt;
            &lt;p className=&quot;text-gray-500&quot;&gt;No committee memberships available&lt;/p&gt;
            &lt;p className=&quot;text-sm text-gray-400 mt-1&quot;&gt;Data sourced from Congress.gov&lt;/p&gt;
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    &lt;/div&gt;
  );
}

</file>
<file path="[bioguideId]/components/ContactInfoTab.tsx">
/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

&apos;use client&apos;;

import React from &apos;react&apos;;
import { EnhancedRepresentative } from &apos;@/types/representative&apos;;
import { PersonalInfoCard } from &apos;./PersonalInfoCard&apos;;
import { ServiceTermsCard } from &apos;./ServiceTermsCard&apos;;
import { CommitteeMembershipsCard } from &apos;./CommitteeMembershipsCard&apos;;
import { DistrictInfoCard } from &apos;./DistrictInfoCard&apos;;

interface ContactInfoTabProps {
  representative: EnhancedRepresentative;
}

export function ContactInfoTab({ representative }: ContactInfoTabProps) {
  return (
    &lt;div className=&quot;bg-white rounded-lg border border-gray-200 shadow-sm&quot;&gt;
      &lt;div className=&quot;p-6&quot;&gt;
        &lt;h2 className=&quot;text-xl font-semibold mb-6&quot;&gt;Contact Information&lt;/h2&gt;

        {/* Three-column grid layout matching screenshot */}
        &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-3 gap-6&quot;&gt;
          {/* Left Column */}
          &lt;div className=&quot;space-y-6&quot;&gt;
            &lt;PersonalInfoCard representative={representative} /&gt;
            &lt;CommitteeMembershipsCard representative={representative} /&gt;
          &lt;/div&gt;

          {/* Center Column */}
          &lt;div className=&quot;space-y-6&quot;&gt;
            &lt;ServiceTermsCard representative={representative} /&gt;

            {/* Office Contact (matching screenshot layout) */}
            &lt;div className=&quot;bg-white rounded-lg border border-gray-200 shadow-sm&quot;&gt;
              &lt;div className=&quot;p-4 border-b border-gray-100&quot;&gt;
                &lt;h3 className=&quot;font-semibold text-gray-900&quot;&gt;Office Contact&lt;/h3&gt;
              &lt;/div&gt;
              &lt;div className=&quot;p-4 space-y-3&quot;&gt;
                {representative.currentTerm?.office &amp;&amp; (
                  &lt;div&gt;
                    &lt;label className=&quot;text-sm font-medium text-gray-600&quot;&gt;
                      Washington DC Address
                    &lt;/label&gt;
                    &lt;div className=&quot;text-gray-900 text-sm&quot;&gt;{representative.currentTerm.office}&lt;/div&gt;
                  &lt;/div&gt;
                )}

                {representative.currentTerm?.phone &amp;&amp; (
                  &lt;div&gt;
                    &lt;label className=&quot;text-sm font-medium text-gray-600&quot;&gt;Phone Number&lt;/label&gt;
                    &lt;div className=&quot;text-gray-900&quot;&gt;
                      &lt;a
                        href={`tel:${representative.currentTerm.phone}`}
                        className=&quot;text-blue-600 hover:text-blue-800&quot;
                      &gt;
                        {representative.currentTerm.phone}
                      &lt;/a&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                )}

                {representative.currentTerm?.website &amp;&amp; (
                  &lt;div&gt;
                    &lt;label className=&quot;text-sm font-medium text-gray-600&quot;&gt;Website Link&lt;/label&gt;
                    &lt;div&gt;
                      &lt;a
                        href={representative.currentTerm.website}
                        target=&quot;_blank&quot;
                        rel=&quot;noopener noreferrer&quot;
                        className=&quot;text-blue-600 hover:text-blue-800 text-sm&quot;
                      &gt;
                        Official Website
                      &lt;/a&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;

          {/* Right Column */}
          &lt;div&gt;
            &lt;DistrictInfoCard representative={representative} /&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}

</file>
<file path="[bioguideId]/components/DistrictInfoCard.tsx">
/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

&apos;use client&apos;;

import React from &apos;react&apos;;
import { MapPin, ExternalLink, Phone, Globe } from &apos;lucide-react&apos;;
import { EnhancedRepresentative } from &apos;@/types/representative&apos;;

interface DistrictInfoCardProps {
  representative: EnhancedRepresentative;
  className?: string;
}

export function DistrictInfoCard({ representative, className = &apos;&apos; }: DistrictInfoCardProps) {
  // Get district display format
  const getDistrictDisplay = () =&gt; {
    if (representative.chamber === &apos;Senate&apos;) {
      return `${representative.state} (Statewide)`;
    }
    if (representative.district &amp;&amp; representative.district !== &apos;AL&apos;) {
      return `${representative.state}-${representative.district}`;
    }
    return `${representative.state} (At-Large)`;
  };

  return (
    &lt;div className={`space-y-4 ${className}`}&gt;
      {/* District Information */}
      &lt;div className=&quot;bg-white rounded-lg border border-gray-200 shadow-sm&quot;&gt;
        &lt;div className=&quot;p-4 border-b border-gray-100&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;MapPin className=&quot;w-5 h-5 text-gray-500&quot; /&gt;
            &lt;h3 className=&quot;font-semibold text-gray-900&quot;&gt;District Information&lt;/h3&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;p-4 space-y-3&quot;&gt;
          &lt;div&gt;
            &lt;label className=&quot;text-sm font-medium text-gray-600&quot;&gt;District&lt;/label&gt;
            &lt;div className=&quot;text-gray-900 font-semibold&quot;&gt;{getDistrictDisplay()}&lt;/div&gt;
          &lt;/div&gt;

          &lt;div&gt;
            &lt;label className=&quot;text-sm font-medium text-gray-600&quot;&gt;Population&lt;/label&gt;
            &lt;div className=&quot;text-gray-900&quot;&gt;
              {representative.chamber === &apos;House&apos;
                ? &apos;~760,000 constituents&apos;
                : &apos;Entire state population&apos;}
            &lt;/div&gt;
            &lt;div className=&quot;text-xs text-gray-500 mt-1&quot;&gt;Based on 2020 Census&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Office Contact */}
      &lt;div className=&quot;bg-white rounded-lg border border-gray-200 shadow-sm&quot;&gt;
        &lt;div className=&quot;p-4 border-b border-gray-100&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;Phone className=&quot;w-5 h-5 text-gray-500&quot; /&gt;
            &lt;h3 className=&quot;font-semibold text-gray-900&quot;&gt;Office Contact&lt;/h3&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;p-4 space-y-3&quot;&gt;
          {representative.currentTerm?.office &amp;&amp; (
            &lt;div&gt;
              &lt;label className=&quot;text-sm font-medium text-gray-600&quot;&gt;Washington DC Address&lt;/label&gt;
              &lt;div className=&quot;text-gray-900 text-sm&quot;&gt;{representative.currentTerm.office}&lt;/div&gt;
            &lt;/div&gt;
          )}

          {representative.currentTerm?.phone &amp;&amp; (
            &lt;div&gt;
              &lt;label className=&quot;text-sm font-medium text-gray-600&quot;&gt;Phone Number&lt;/label&gt;
              &lt;div className=&quot;text-gray-900&quot;&gt;
                &lt;a
                  href={`tel:${representative.currentTerm.phone}`}
                  className=&quot;text-blue-600 hover:text-blue-800&quot;
                &gt;
                  {representative.currentTerm.phone}
                &lt;/a&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          )}

          {representative.currentTerm?.website &amp;&amp; (
            &lt;div&gt;
              &lt;label className=&quot;text-sm font-medium text-gray-600&quot;&gt;Website&lt;/label&gt;
              &lt;div&gt;
                &lt;a
                  href={representative.currentTerm.website}
                  target=&quot;_blank&quot;
                  rel=&quot;noopener noreferrer&quot;
                  className=&quot;inline-flex items-center gap-1 text-blue-600 hover:text-blue-800 text-sm&quot;
                &gt;
                  &lt;Globe className=&quot;w-3 h-3&quot; /&gt;
                  Official Website
                  &lt;ExternalLink className=&quot;w-3 h-3&quot; /&gt;
                &lt;/a&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          )}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Quick Actions */}
      &lt;div className=&quot;bg-white rounded-lg border border-gray-200 shadow-sm&quot;&gt;
        &lt;div className=&quot;p-4 border-b border-gray-100&quot;&gt;
          &lt;h3 className=&quot;font-semibold text-gray-900&quot;&gt;Quick Actions&lt;/h3&gt;
        &lt;/div&gt;
        &lt;div className=&quot;p-4 space-y-2&quot;&gt;
          {representative.currentTerm?.website &amp;&amp; (
            &lt;a
              href={representative.currentTerm.website}
              target=&quot;_blank&quot;
              rel=&quot;noopener noreferrer&quot;
              className=&quot;block w-full bg-blue-600 text-white text-center py-2 px-3 rounded-md text-sm font-medium hover:bg-blue-700 transition-colors&quot;
            &gt;
              Visit Website
            &lt;/a&gt;
          )}
          &lt;button className=&quot;block w-full bg-white border border-gray-300 text-gray-700 text-center py-2 px-3 rounded-md text-sm font-medium hover:bg-gray-50 transition-colors&quot;&gt;
            Find Local Offices
          &lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Data Sources */}
      &lt;div className=&quot;bg-white rounded-lg border border-gray-200 shadow-sm&quot;&gt;
        &lt;div className=&quot;p-4 border-b border-gray-100&quot;&gt;
          &lt;h3 className=&quot;font-semibold text-gray-900&quot;&gt;Data Sources&lt;/h3&gt;
        &lt;/div&gt;
        &lt;div className=&quot;p-4&quot;&gt;
          &lt;div className=&quot;space-y-2 text-xs text-gray-600&quot;&gt;
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;div className=&quot;w-2 h-2 bg-blue-600 rounded-full&quot;&gt;&lt;/div&gt;
              &lt;span&gt;Congress.gov&lt;/span&gt;
            &lt;/div&gt;
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;div className=&quot;w-2 h-2 bg-green-600 rounded-full&quot;&gt;&lt;/div&gt;
              &lt;span&gt;Congress Legislators&lt;/span&gt;
            &lt;/div&gt;
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;div className=&quot;w-2 h-2 bg-purple-600 rounded-full&quot;&gt;&lt;/div&gt;
              &lt;span&gt;FEC Campaign Finance&lt;/span&gt;
            &lt;/div&gt;
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;div className=&quot;w-2 h-2 bg-orange-600 rounded-full&quot;&gt;&lt;/div&gt;
              &lt;span&gt;U.S. Census Bureau&lt;/span&gt;
            &lt;/div&gt;
            &lt;div className=&quot;text-xs text-gray-500 mt-2&quot;&gt;
              All data from official government sources
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}

</file>
<file path="[bioguideId]/components/DistrictSidebar.tsx">
/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

&apos;use client&apos;;

import React from &apos;react&apos;;
import {
  MapPin,
  Users,
  Building,
  Phone,
  Mail,
  ExternalLink,
  Calendar,
  Clock,
  AlertCircle,
  Info,
} from &apos;lucide-react&apos;;
import { EnhancedRepresentative } from &apos;@/types/representative&apos;;

interface DistrictSidebarProps {
  representative: EnhancedRepresentative;
  className?: string;
}

interface SidebarCardProps {
  title: string;
  icon: React.ReactNode;
  children: React.ReactNode;
  className?: string;
  variant?: &apos;default&apos; | &apos;highlight&apos; | &apos;warning&apos;;
}

function SidebarCard({
  title,
  icon,
  children,
  className = &apos;&apos;,
  variant = &apos;default&apos;,
}: SidebarCardProps) {
  const variants = {
    default: &apos;bg-white border-gray-200&apos;,
    highlight: &apos;bg-blue-50 border-blue-200&apos;,
    warning: &apos;bg-yellow-50 border-yellow-200&apos;,
  };

  return (
    &lt;div className={`rounded-lg border shadow-sm ${variants[variant]} ${className}`}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-100&quot;&gt;
        &lt;div className=&quot;flex items-center gap-2&quot;&gt;
          &lt;div className=&quot;text-gray-500&quot;&gt;{icon}&lt;/div&gt;
          &lt;h3 className=&quot;font-semibold text-gray-900 text-sm&quot;&gt;{title}&lt;/h3&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div className=&quot;p-4&quot;&gt;{children}&lt;/div&gt;
    &lt;/div&gt;
  );
}

interface ContactMethodProps {
  icon: React.ReactNode;
  label: string;
  value: string;
  href?: string;
  copyable?: boolean;
}

function ContactMethod({ icon, label, value, href, copyable = false }: ContactMethodProps) {
  const handleCopy = () =&gt; {
    if (copyable) {
      navigator.clipboard.writeText(value);
    }
  };

  const content = (
    &lt;div className=&quot;flex items-start gap-2 p-2 rounded hover:bg-gray-50 transition-colors&quot;&gt;
      &lt;div className=&quot;text-gray-400 mt-0.5&quot;&gt;{icon}&lt;/div&gt;
      &lt;div className=&quot;flex-1 min-w-0&quot;&gt;
        &lt;div className=&quot;text-xs font-medium text-gray-600 mb-0.5&quot;&gt;{label}&lt;/div&gt;
        &lt;div className=&quot;text-sm text-gray-900 break-all&quot;&gt;{value}&lt;/div&gt;
      &lt;/div&gt;
      {copyable &amp;&amp; (
        &lt;button
          onClick={handleCopy}
          className=&quot;text-gray-400 hover:text-gray-600 p-1&quot;
          title=&quot;Copy to clipboard&quot;
        &gt;
          &lt;svg className=&quot;w-3 h-3&quot; fill=&quot;currentColor&quot; viewBox=&quot;0 0 20 20&quot;&gt;
            &lt;path d=&quot;M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z&quot; /&gt;
            &lt;path d=&quot;M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z&quot; /&gt;
          &lt;/svg&gt;
        &lt;/button&gt;
      )}
    &lt;/div&gt;
  );

  if (href) {
    return (
      &lt;a href={href} target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; className=&quot;block&quot;&gt;
        {content}
      &lt;/a&gt;
    );
  }

  return content;
}

export function DistrictSidebar({ representative, className = &apos;&apos; }: DistrictSidebarProps) {
  // Format district display
  const getDistrictDisplay = () =&gt; {
    if (representative.chamber === &apos;Senate&apos;) {
      return `${representative.state} (Statewide)`;
    }
    if (representative.district &amp;&amp; representative.district !== &apos;AL&apos;) {
      return `${representative.state}-${representative.district}`;
    }
    return `${representative.state} (At-Large)`;
  };

  // Get next election year
  const getNextElectionYear = () =&gt; {
    const currentYear = new Date().getFullYear();
    if (representative.chamber === &apos;House&apos;) {
      // House members elected every 2 years
      return currentYear % 2 === 0 ? currentYear : currentYear + 1;
    } else {
      // Senate members elected every 6 years
      if (representative.currentTerm?.end) {
        return new Date(representative.currentTerm.end).getFullYear();
      }
    }
    return null;
  };

  const nextElection = getNextElectionYear();

  // Calculate term progress
  const getTermProgress = () =&gt; {
    if (!representative.currentTerm?.start || !representative.currentTerm?.end) return null;

    const start = new Date(representative.currentTerm.start);
    const end = new Date(representative.currentTerm.end);
    const now = new Date();

    const total = end.getTime() - start.getTime();
    const elapsed = now.getTime() - start.getTime();
    const progress = Math.min(Math.max((elapsed / total) * 100, 0), 100);

    return {
      progress: Math.round(progress),
      daysRemaining: Math.max(
        0,
        Math.ceil((end.getTime() - now.getTime()) / (1000 * 60 * 60 * 24))
      ),
    };
  };

  const termProgress = getTermProgress();

  return (
    &lt;div className={`space-y-4 ${className}`}&gt;
      {/* District Information */}
      &lt;SidebarCard title=&quot;District&quot; icon={&lt;MapPin className=&quot;w-4 h-4&quot; /&gt;} variant=&quot;highlight&quot;&gt;
        &lt;div className=&quot;space-y-3&quot;&gt;
          &lt;div&gt;
            &lt;div className=&quot;text-lg font-bold text-gray-900&quot;&gt;{getDistrictDisplay()}&lt;/div&gt;
            &lt;div className=&quot;text-sm text-gray-600&quot;&gt;
              {representative.chamber === &apos;House&apos; ? &apos;Congressional District&apos; : &apos;U.S. Senate&apos;}
            &lt;/div&gt;
          &lt;/div&gt;

          {representative.chamber === &apos;House&apos; &amp;&amp; (
            &lt;div className=&quot;text-sm text-gray-600&quot;&gt;
              &lt;div className=&quot;flex items-center gap-1 mb-1&quot;&gt;
                &lt;Users className=&quot;w-3 h-3&quot; /&gt;
                &lt;span&gt;~760,000 constituents&lt;/span&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-xs text-gray-500&quot;&gt;Based on 2020 Census apportionment&lt;/div&gt;
            &lt;/div&gt;
          )}

          {representative.chamber === &apos;Senate&apos; &amp;&amp; (
            &lt;div className=&quot;text-sm text-gray-600&quot;&gt;
              &lt;div className=&quot;flex items-center gap-1 mb-1&quot;&gt;
                &lt;Users className=&quot;w-3 h-3&quot; /&gt;
                &lt;span&gt;Represents entire state&lt;/span&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                {representative.currentTerm?.stateRank &amp;&amp; (
                  &lt;span className=&quot;capitalize&quot;&gt;{representative.currentTerm.stateRank} Senator&lt;/span&gt;
                )}
              &lt;/div&gt;
            &lt;/div&gt;
          )}
        &lt;/div&gt;
      &lt;/SidebarCard&gt;

      {/* Contact Information */}
      &lt;SidebarCard title=&quot;Contact Information&quot; icon={&lt;Phone className=&quot;w-4 h-4&quot; /&gt;}&gt;
        &lt;div className=&quot;space-y-1&quot;&gt;
          {/* Washington Office */}
          {representative.currentTerm?.office &amp;&amp; (
            &lt;ContactMethod
              icon={&lt;Building className=&quot;w-3 h-3&quot; /&gt;}
              label=&quot;Washington Office&quot;
              value={representative.currentTerm.office}
              copyable
            /&gt;
          )}

          {representative.currentTerm?.phone &amp;&amp; (
            &lt;ContactMethod
              icon={&lt;Phone className=&quot;w-3 h-3&quot; /&gt;}
              label=&quot;Phone&quot;
              value={representative.currentTerm.phone}
              href={`tel:${representative.currentTerm.phone}`}
              copyable
            /&gt;
          )}

          {representative.currentTerm?.contactForm &amp;&amp; (
            &lt;ContactMethod
              icon={&lt;Mail className=&quot;w-3 h-3&quot; /&gt;}
              label=&quot;Contact Form&quot;
              value=&quot;Send Message&quot;
              href={representative.currentTerm.contactForm}
            /&gt;
          )}

          {representative.currentTerm?.website &amp;&amp; (
            &lt;ContactMethod
              icon={&lt;ExternalLink className=&quot;w-3 h-3&quot; /&gt;}
              label=&quot;Official Website&quot;
              value=&quot;Visit Website&quot;
              href={representative.currentTerm.website}
            /&gt;
          )}
        &lt;/div&gt;
      &lt;/SidebarCard&gt;

      {/* Term Information */}
      &lt;SidebarCard title=&quot;Current Term&quot; icon={&lt;Calendar className=&quot;w-4 h-4&quot; /&gt;}&gt;
        &lt;div className=&quot;space-y-3&quot;&gt;
          {representative.currentTerm?.start &amp;&amp; representative.currentTerm?.end &amp;&amp; (
            &lt;div&gt;
              &lt;div className=&quot;text-sm font-medium text-gray-900 mb-1&quot;&gt;
                {new Date(representative.currentTerm.start).getFullYear()} -{&apos; &apos;}
                {new Date(representative.currentTerm.end).getFullYear()}
              &lt;/div&gt;
              {termProgress &amp;&amp; (
                &lt;div&gt;
                  &lt;div className=&quot;flex justify-between text-xs text-gray-600 mb-1&quot;&gt;
                    &lt;span&gt;Progress&lt;/span&gt;
                    &lt;span&gt;{termProgress.progress}%&lt;/span&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;w-full bg-gray-200 rounded-full h-2&quot;&gt;
                    &lt;div
                      className=&quot;bg-blue-600 h-2 rounded-full transition-all duration-300&quot;
                      style={{ width: `${termProgress.progress}%` }}
                    &gt;&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-xs text-gray-500 mt-1&quot;&gt;
                    {termProgress.daysRemaining} days remaining
                  &lt;/div&gt;
                &lt;/div&gt;
              )}
            &lt;/div&gt;
          )}

          {nextElection &amp;&amp; (
            &lt;div&gt;
              &lt;div className=&quot;text-xs font-medium text-gray-600 mb-1&quot;&gt;Next Election&lt;/div&gt;
              &lt;div className=&quot;text-sm text-gray-900&quot;&gt;{nextElection}&lt;/div&gt;
            &lt;/div&gt;
          )}

          {representative.chamber === &apos;Senate&apos; &amp;&amp; representative.currentTerm?.class &amp;&amp; (
            &lt;div&gt;
              &lt;div className=&quot;text-xs font-medium text-gray-600 mb-1&quot;&gt;Senate Class&lt;/div&gt;
              &lt;div className=&quot;text-sm text-gray-900&quot;&gt;Class {representative.currentTerm.class}&lt;/div&gt;
            &lt;/div&gt;
          )}
        &lt;/div&gt;
      &lt;/SidebarCard&gt;

      {/* Quick Actions */}
      &lt;SidebarCard title=&quot;Quick Actions&quot; icon={&lt;Clock className=&quot;w-4 h-4&quot; /&gt;}&gt;
        &lt;div className=&quot;space-y-2&quot;&gt;
          {representative.currentTerm?.contactForm &amp;&amp; (
            &lt;a
              href={representative.currentTerm.contactForm}
              target=&quot;_blank&quot;
              rel=&quot;noopener noreferrer&quot;
              className=&quot;block w-full bg-blue-600 text-white text-center py-2 px-3 rounded-md text-sm font-medium hover:bg-blue-700 transition-colors&quot;
            &gt;
              Send Message
            &lt;/a&gt;
          )}

          {representative.currentTerm?.website &amp;&amp; (
            &lt;a
              href={representative.currentTerm.website}
              target=&quot;_blank&quot;
              rel=&quot;noopener noreferrer&quot;
              className=&quot;block w-full bg-white border border-gray-300 text-gray-700 text-center py-2 px-3 rounded-md text-sm font-medium hover:bg-gray-50 transition-colors&quot;
            &gt;
              Visit Website
            &lt;/a&gt;
          )}

          &lt;button className=&quot;block w-full bg-white border border-gray-300 text-gray-700 text-center py-2 px-3 rounded-md text-sm font-medium hover:bg-gray-50 transition-colors&quot;&gt;
            Find Local Offices
          &lt;/button&gt;
        &lt;/div&gt;
      &lt;/SidebarCard&gt;

      {/* Data Transparency */}
      &lt;SidebarCard title=&quot;Data Sources&quot; icon={&lt;Info className=&quot;w-4 h-4&quot; /&gt;}&gt;
        &lt;div className=&quot;space-y-2 text-xs text-gray-600&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;div className=&quot;w-2 h-2 bg-blue-600 rounded-full&quot;&gt;&lt;/div&gt;
            &lt;span&gt;Congress.gov&lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;div className=&quot;w-2 h-2 bg-green-600 rounded-full&quot;&gt;&lt;/div&gt;
            &lt;span&gt;Congress Legislators&lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;div className=&quot;w-2 h-2 bg-purple-600 rounded-full&quot;&gt;&lt;/div&gt;
            &lt;span&gt;FEC Campaign Finance&lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;text-xs text-gray-500 mt-2&quot;&gt;
            All data from official government sources
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/SidebarCard&gt;

      {/* Help Notice */}
      &lt;SidebarCard title=&quot;Need Help?&quot; icon={&lt;AlertCircle className=&quot;w-4 h-4&quot; /&gt;} variant=&quot;warning&quot;&gt;
        &lt;div className=&quot;text-sm text-gray-700&quot;&gt;
          &lt;p className=&quot;mb-2&quot;&gt;
            Having trouble reaching your representative? Contact information is updated regularly
            from official sources.
          &lt;/p&gt;
          &lt;a
            href=&quot;https://www.house.gov/representatives/find-your-representative&quot;
            target=&quot;_blank&quot;
            rel=&quot;noopener noreferrer&quot;
            className=&quot;text-blue-600 hover:text-blue-800 text-xs&quot;
          &gt;
            Find alternative contact methods â†’
          &lt;/a&gt;
        &lt;/div&gt;
      &lt;/SidebarCard&gt;
    &lt;/div&gt;
  );
}

</file>
<file path="[bioguideId]/components/EnhancedClientWrapper.tsx">
/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

&apos;use client&apos;;

import React from &apos;react&apos;;
import { RepresentativeHeader } from &apos;./RepresentativeHeader&apos;;
import { EnhancedTabs } from &apos;./EnhancedTabs&apos;;

interface EnhancedClientWrapperProps {
  representative: {
    bioguideId: string;
    name: string;
    party: string;
    chamber: &apos;House&apos; | &apos;Senate&apos;;
    state: string;
    district?: string;
    title: string;
    currentTerm?: {
      start: string;
      end: string;
      office?: string;
      phone?: string;
      address?: string;
      website?: string;
      contactForm?: string;
    };
    committees?: Array&lt;{
      name: string;
      role?: string;
    }&gt;;
    bio?: {
      birthday?: string;
      gender?: &apos;M&apos; | &apos;F&apos;;
      religion?: string;
    };
    socialMedia?: {
      twitter?: string;
      facebook?: string;
      youtube?: string;
      instagram?: string;
    };
    website?: string;
  };
  bioguideId: string;
  serverData?: {
    bills?: unknown[];
    votes?: unknown[];
    finance?: Record&lt;string, unknown&gt;;
    news?: unknown[];
  };
  metrics?: {
    billsSponsored: number;
    partyVotingPercentage: number;
    attendancePercentage: number;
    profileCompleteness: number;
  };
}

export function EnhancedClientWrapper({
  representative,
  bioguideId,
  serverData,
  metrics,
}: EnhancedClientWrapperProps) {
  // Calculate basic metrics from server data if not provided
  const calculatedMetrics = metrics || {
    billsSponsored: Array.isArray(serverData?.bills) ? serverData.bills.length : 0,
    partyVotingPercentage: 85, // This would be calculated from voting data
    attendancePercentage: 92, // This would be calculated from voting data
    profileCompleteness: 93, // This would be calculated based on available data
  };

  return (
    &lt;div className=&quot;space-y-8&quot;&gt;
      {/* Enhanced Header Card */}
      &lt;RepresentativeHeader representative={representative} metrics={calculatedMetrics} /&gt;

      {/* Enhanced Tabs */}
      &lt;EnhancedTabs
        bioguideId={bioguideId}
        representative={representative}
        serverData={serverData}
      /&gt;
    &lt;/div&gt;
  );
}

</file>
<file path="[bioguideId]/components/EnhancedHeader.tsx">
/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

&apos;use client&apos;;

import React from &apos;react&apos;;
import Image from &apos;next/image&apos;;
import { Calendar, MapPin, Phone, Globe, Mail, ExternalLink } from &apos;lucide-react&apos;;
import { EnhancedRepresentative } from &apos;@/types/representative&apos;;

interface EnhancedHeaderProps {
  representative: EnhancedRepresentative;
}

export function EnhancedHeader({ representative }: EnhancedHeaderProps) {
  // Get photo URL with fallback
  const photoUrl =
    representative.imageUrl ||
    `https://bioguide.congress.gov/bioguide/photo/${representative.bioguideId[0]}/${representative.bioguideId}.jpg`;

  // Get party colors
  const getPartyStyle = (party: string) =&gt; {
    const normalizedParty = party.toLowerCase();
    if (normalizedParty.includes(&apos;democrat&apos;) || normalizedParty === &apos;democratic&apos;) {
      return {
        badge: &apos;bg-blue-600 text-white&apos;,
        accent: &apos;border-blue-600&apos;,
      };
    }
    if (normalizedParty.includes(&apos;republican&apos;)) {
      return {
        badge: &apos;bg-red-600 text-white&apos;,
        accent: &apos;border-red-600&apos;,
      };
    }
    return {
      badge: &apos;bg-gray-600 text-white&apos;,
      accent: &apos;border-gray-600&apos;,
    };
  };

  const partyStyle = getPartyStyle(representative.party);

  // Format term dates
  const formatTermDates = () =&gt; {
    if (!representative.currentTerm?.start || !representative.currentTerm?.end) {
      return &apos;Current Term&apos;;
    }
    const start = new Date(representative.currentTerm.start).getFullYear();
    const end = new Date(representative.currentTerm.end).getFullYear();
    return `${start} - ${end}`;
  };

  // Get display name with preference for official name
  const getDisplayName = () =&gt; {
    if (representative.fullName?.official) {
      return representative.fullName.official;
    }
    if (representative.fullName?.first &amp;&amp; representative.fullName?.last) {
      const middle = representative.fullName.middle ? ` ${representative.fullName.middle}` : &apos;&apos;;
      const suffix = representative.fullName.suffix ? `, ${representative.fullName.suffix}` : &apos;&apos;;
      return `${representative.fullName.first}${middle} ${representative.fullName.last}${suffix}`;
    }
    return representative.name;
  };

  // Get title with proper formatting
  const getTitle = () =&gt; {
    if (representative.chamber === &apos;Senate&apos;) {
      return `U.S. Senator from ${representative.state}`;
    }
    if (representative.district &amp;&amp; representative.district !== &apos;AL&apos;) {
      return `U.S. Representative, ${representative.state}-${representative.district}`;
    }
    return `U.S. Representative from ${representative.state}`;
  };

  // Get state rank for senators
  const getStateRank = () =&gt; {
    if (representative.chamber === &apos;Senate&apos; &amp;&amp; representative.currentTerm?.stateRank) {
      return representative.currentTerm.stateRank === &apos;senior&apos;
        ? &apos;Senior Senator&apos;
        : &apos;Junior Senator&apos;;
    }
    return null;
  };

  return (
    &lt;div className=&quot;bg-white shadow-lg rounded-lg overflow-hidden&quot;&gt;
      {/* Header with gradient background */}
      &lt;div className=&quot;bg-gradient-to-r from-blue-700 to-blue-900 text-white p-8&quot;&gt;
        &lt;div className=&quot;flex flex-col lg:flex-row items-start lg:items-center gap-6&quot;&gt;
          {/* Photo */}
          &lt;div className=&quot;flex-shrink-0&quot;&gt;
            &lt;div className={`relative p-1 bg-white rounded-full ${partyStyle.accent} border-4`}&gt;
              &lt;Image
                src={photoUrl}
                alt={getDisplayName()}
                width={120}
                height={120}
                className=&quot;w-28 h-28 lg:w-32 lg:h-32 rounded-full object-cover&quot;
                onError={e =&gt; {
                  if (typeof window !== &apos;undefined&apos;) {
                    const target = e.target as HTMLImageElement;
                    target.src = &apos;/images/placeholder-representative.jpg&apos;;
                  }
                }}
              /&gt;
            &lt;/div&gt;
          &lt;/div&gt;

          {/* Name and Title */}
          &lt;div className=&quot;flex-1&quot;&gt;
            &lt;div className=&quot;mb-3&quot;&gt;
              &lt;h1 className=&quot;text-3xl lg:text-4xl font-bold text-white mb-2&quot;&gt;{getDisplayName()}&lt;/h1&gt;
              &lt;p className=&quot;text-xl text-blue-100 mb-1&quot;&gt;{getTitle()}&lt;/p&gt;
              {getStateRank() &amp;&amp; &lt;p className=&quot;text-lg text-blue-200&quot;&gt;{getStateRank()}&lt;/p&gt;}
            &lt;/div&gt;

            {/* Party Badge and Term Info */}
            &lt;div className=&quot;flex flex-wrap items-center gap-3&quot;&gt;
              &lt;span
                className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${partyStyle.badge}`}
              &gt;
                {representative.party}
              &lt;/span&gt;

              &lt;div className=&quot;flex items-center gap-1 text-blue-100&quot;&gt;
                &lt;Calendar className=&quot;w-4 h-4&quot; /&gt;
                &lt;span className=&quot;text-sm&quot;&gt;{formatTermDates()}&lt;/span&gt;
              &lt;/div&gt;

              {representative.chamber === &apos;Senate&apos; &amp;&amp; representative.currentTerm?.class &amp;&amp; (
                &lt;div className=&quot;flex items-center gap-1 text-blue-100&quot;&gt;
                  &lt;span className=&quot;text-sm&quot;&gt;Class {representative.currentTerm.class}&lt;/span&gt;
                &lt;/div&gt;
              )}
            &lt;/div&gt;
          &lt;/div&gt;

          {/* Quick Contact Actions */}
          &lt;div className=&quot;flex-shrink-0&quot;&gt;
            &lt;div className=&quot;flex flex-col sm:flex-row gap-2&quot;&gt;
              {representative.currentTerm?.website &amp;&amp; (
                &lt;a
                  href={representative.currentTerm.website}
                  target=&quot;_blank&quot;
                  rel=&quot;noopener noreferrer&quot;
                  className=&quot;inline-flex items-center gap-2 bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-4 py-2 rounded-lg transition-colors text-sm font-medium&quot;
                &gt;
                  &lt;Globe className=&quot;w-4 h-4&quot; /&gt;
                  Website
                  &lt;ExternalLink className=&quot;w-3 h-3&quot; /&gt;
                &lt;/a&gt;
              )}

              {representative.currentTerm?.contactForm &amp;&amp; (
                &lt;a
                  href={representative.currentTerm.contactForm}
                  target=&quot;_blank&quot;
                  rel=&quot;noopener noreferrer&quot;
                  className=&quot;inline-flex items-center gap-2 bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-4 py-2 rounded-lg transition-colors text-sm font-medium&quot;
                &gt;
                  &lt;Mail className=&quot;w-4 h-4&quot; /&gt;
                  Contact
                  &lt;ExternalLink className=&quot;w-3 h-3&quot; /&gt;
                &lt;/a&gt;
              )}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Contact Information Bar */}
      &lt;div className=&quot;bg-gray-50 border-b px-8 py-4&quot;&gt;
        &lt;div className=&quot;flex flex-wrap items-center gap-6 text-sm text-gray-600&quot;&gt;
          {representative.currentTerm?.office &amp;&amp; (
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;MapPin className=&quot;w-4 h-4 text-gray-400&quot; /&gt;
              &lt;span&gt;{representative.currentTerm.office}&lt;/span&gt;
            &lt;/div&gt;
          )}

          {representative.currentTerm?.phone &amp;&amp; (
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;Phone className=&quot;w-4 h-4 text-gray-400&quot; /&gt;
              &lt;a
                href={`tel:${representative.currentTerm.phone}`}
                className=&quot;text-blue-600 hover:text-blue-800&quot;
              &gt;
                {representative.currentTerm.phone}
              &lt;/a&gt;
            &lt;/div&gt;
          )}

          {/* Bio information */}
          {representative.bio?.birthday &amp;&amp; (
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;Calendar className=&quot;w-4 h-4 text-gray-400&quot; /&gt;
              &lt;span&gt;
                Born{&apos; &apos;}
                {new Date(representative.bio.birthday).toLocaleDateString(&apos;en-US&apos;, {
                  year: &apos;numeric&apos;,
                  month: &apos;long&apos;,
                  day: &apos;numeric&apos;,
                })}
              &lt;/span&gt;
            &lt;/div&gt;
          )}
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}

</file>
<file path="[bioguideId]/components/EnhancedTabs.tsx">
/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

&apos;use client&apos;;

import React, { useState, useEffect } from &apos;react&apos;;
import {
  User,
  FileText,
  Vote,
  DollarSign,
  Newspaper,
  Users,
  AlertCircle,
  ChevronDown,
} from &apos;lucide-react&apos;;
import { VotingTab } from &apos;../tabs/VotingTab&apos;;
import { BillsTab } from &apos;../tabs/BillsTab&apos;;
import { FinanceTab } from &apos;../tabs/FinanceTab&apos;;
import { extractTransparencyMetadata, type DataMetadata } from &apos;@/components/ui/DataTransparency&apos;;

// Types for tab data
interface Vote {
  id: string;
  date: string;
  bill?: {
    number: string;
    title: string;
    url?: string;
  };
  question?: string;
  description: string;
  position: &apos;Yea&apos; | &apos;Nay&apos; | &apos;Present&apos; | &apos;Not Voting&apos;;
  result: &apos;Passed&apos; | &apos;Failed&apos; | &apos;Agreed to&apos; | &apos;Disagreed to&apos;;
  chamber: &apos;House&apos; | &apos;Senate&apos;;
  category?: string;
}

interface Bill {
  id: string;
  number: string;
  title: string;
  introducedDate: string;
  status: string;
  lastAction: string;
  congress: number;
  type: string;
  policyArea: string;
  url?: string;
  committee?: string;
  progress?: number;
}

interface FinanceData {
  totalRaised: number;
  totalSpent: number;
  cashOnHand: number;
  donations: {
    individual: number;
    pac: number;
    party: number;
    candidate: number;
  };
  topContributors: Array&lt;{
    name: string;
    amount: number;
    type: &apos;Individual&apos; | &apos;PAC&apos; | &apos;Party Committee&apos;;
  }&gt;;
  industryBreakdown: Array&lt;{
    industry: string;
    amount: number;
    percentage: number;
  }&gt;;
  spendingCategories: Array&lt;{
    category: string;
    amount: number;
    percentage: number;
  }&gt;;
}

interface EnhancedTabsProps {
  bioguideId: string;
  representative: {
    name: string;
    chamber: string;
    party: string;
    state: string;
    district?: string;
    title?: string;
    bio?: {
      birthday?: string;
      gender?: &apos;M&apos; | &apos;F&apos;;
      religion?: string;
    };
    currentTerm?: {
      start: string;
      end: string;
      office?: string;
      phone?: string;
      address?: string;
      website?: string;
      contactForm?: string;
    };
    socialMedia?: {
      twitter?: string;
      facebook?: string;
      youtube?: string;
      instagram?: string;
    };
    committees?: Array&lt;{
      name: string;
      role?: string;
    }&gt;;
  };
  serverData?: {
    bills?: unknown[];
    votes?: unknown[];
    finance?: Record&lt;string, unknown&gt;;
    news?: unknown[];
  };
}

interface TabData {
  id: string;
  label: string;
  icon: React.ComponentType&lt;{ className?: string }&gt;;
  content: React.ReactNode;
  count?: number;
}

export function EnhancedTabs({ bioguideId, representative, serverData }: EnhancedTabsProps) {
  const [activeTab, setActiveTab] = useState(&apos;profile&apos;);
  const [tabData, setTabData] = useState&lt;Record&lt;string, unknown&gt;&gt;({});
  const [loading, setLoading] = useState&lt;Record&lt;string, boolean&gt;&gt;({});
  const [errors, setErrors] = useState&lt;Record&lt;string, string&gt;&gt;({});
  const [isMobile, setIsMobile] = useState(false);

  // Check if mobile
  useEffect(() =&gt; {
    const checkMobile = () =&gt; {
      setIsMobile(window.innerWidth &lt; 768);
    };
    checkMobile();
    window.addEventListener(&apos;resize&apos;, checkMobile);
    return () =&gt; window.removeEventListener(&apos;resize&apos;, checkMobile);
  }, []);

  // Fetch data for a specific tab
  const fetchTabData = async (tabId: string) =&gt; {
    if (tabId === &apos;profile&apos;) {
      setTabData(prev =&gt; ({ ...prev, [tabId]: representative }));
      return;
    }

    // Check if we have server data first
    if (serverData) {
      const serverDataMap: Record&lt;string, unknown&gt; = {
        bills: serverData.bills,
        votes: serverData.votes,
        finance: serverData.finance,
        news: serverData.news,
      };

      if (serverDataMap[tabId]) {
        setTabData(prev =&gt; ({ ...prev, [tabId]: serverDataMap[tabId] }));
        return;
      }
    }

    // Fallback to API fetch
    setLoading(prev =&gt; ({ ...prev, [tabId]: true }));
    setErrors(prev =&gt; ({ ...prev, [tabId]: &apos;&apos; }));

    try {
      const endpoint = `/api/representative/${bioguideId}/${tabId}`;
      const response = await fetch(endpoint);

      if (!response.ok) {
        throw new Error(`HTTP ${response.status}`);
      }

      const data = await response.json();
      setTabData(prev =&gt; ({ ...prev, [tabId]: data }));
    } catch (error) {
      // eslint-disable-next-line no-console
      console.error(`Error fetching ${tabId} data:`, error);
      setErrors(prev =&gt; ({
        ...prev,
        [tabId]: error instanceof Error ? error.message : &apos;Failed to load data&apos;,
      }));
    } finally {
      setLoading(prev =&gt; ({ ...prev, [tabId]: false }));
    }
  };

  // Load data when tab changes
  useEffect(() =&gt; {
    fetchTabData(activeTab);
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [activeTab, bioguideId]);

  // Profile tab content
  const ProfileContent = () =&gt; (
    &lt;div className=&quot;space-y-6&quot;&gt;
      &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-6&quot;&gt;
        {/* Basic Information */}
        &lt;div className=&quot;bg-white p-6 rounded-lg border border-gray-200&quot;&gt;
          &lt;h4 className=&quot;font-semibold text-gray-900 flex items-center gap-2 mb-4&quot;&gt;
            &lt;User className=&quot;h-5 w-5 text-blue-500&quot; /&gt;
            Basic Information
          &lt;/h4&gt;
          &lt;dl className=&quot;space-y-2&quot;&gt;
            &lt;div className=&quot;flex justify-between&quot;&gt;
              &lt;dt className=&quot;text-gray-600&quot;&gt;Full Name:&lt;/dt&gt;
              &lt;dd className=&quot;font-medium&quot;&gt;{representative.name}&lt;/dd&gt;
            &lt;/div&gt;
            &lt;div className=&quot;flex justify-between&quot;&gt;
              &lt;dt className=&quot;text-gray-600&quot;&gt;Title:&lt;/dt&gt;
              &lt;dd className=&quot;font-medium&quot;&gt;{representative.title || representative.chamber}&lt;/dd&gt;
            &lt;/div&gt;
            &lt;div className=&quot;flex justify-between&quot;&gt;
              &lt;dt className=&quot;text-gray-600&quot;&gt;Party:&lt;/dt&gt;
              &lt;dd className=&quot;font-medium&quot;&gt;{representative.party}&lt;/dd&gt;
            &lt;/div&gt;
            &lt;div className=&quot;flex justify-between&quot;&gt;
              &lt;dt className=&quot;text-gray-600&quot;&gt;State:&lt;/dt&gt;
              &lt;dd className=&quot;font-medium&quot;&gt;
                {representative.state}
                {representative.district &amp;&amp; `-${representative.district}`}
              &lt;/dd&gt;
            &lt;/div&gt;
          &lt;/dl&gt;
        &lt;/div&gt;

        {/* Contact Information */}
        &lt;div className=&quot;bg-white p-6 rounded-lg border border-gray-200&quot;&gt;
          &lt;h4 className=&quot;font-semibold text-gray-900 mb-4&quot;&gt;Contact Information&lt;/h4&gt;
          &lt;dl className=&quot;space-y-2&quot;&gt;
            {representative.currentTerm?.phone &amp;&amp; (
              &lt;div className=&quot;flex justify-between&quot;&gt;
                &lt;dt className=&quot;text-gray-600&quot;&gt;Phone:&lt;/dt&gt;
                &lt;dd className=&quot;font-medium&quot;&gt;{representative.currentTerm.phone}&lt;/dd&gt;
              &lt;/div&gt;
            )}
            {representative.currentTerm?.office &amp;&amp; (
              &lt;div className=&quot;flex justify-between&quot;&gt;
                &lt;dt className=&quot;text-gray-600&quot;&gt;Office:&lt;/dt&gt;
                &lt;dd className=&quot;font-medium&quot;&gt;{representative.currentTerm.office}&lt;/dd&gt;
              &lt;/div&gt;
            )}
            {representative.currentTerm?.website &amp;&amp; (
              &lt;div className=&quot;flex justify-between&quot;&gt;
                &lt;dt className=&quot;text-gray-600&quot;&gt;Website:&lt;/dt&gt;
                &lt;dd&gt;
                  &lt;a
                    href={representative.currentTerm.website}
                    target=&quot;_blank&quot;
                    rel=&quot;noopener noreferrer&quot;
                    className=&quot;text-blue-600 hover:underline&quot;
                  &gt;
                    Official Website
                  &lt;/a&gt;
                &lt;/dd&gt;
              &lt;/div&gt;
            )}
          &lt;/dl&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Committees */}
      {representative.committees &amp;&amp; representative.committees.length &gt; 0 &amp;&amp; (
        &lt;div className=&quot;bg-white p-6 rounded-lg border border-gray-200&quot;&gt;
          &lt;h4 className=&quot;font-semibold text-gray-900 mb-4&quot;&gt;Committee Assignments&lt;/h4&gt;
          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-3&quot;&gt;
            {representative.committees.map((committee, index) =&gt; (
              &lt;div key={index} className=&quot;p-3 bg-gray-50 rounded-lg&quot;&gt;
                &lt;div className=&quot;font-medium text-gray-900&quot;&gt;{committee.name}&lt;/div&gt;
                {committee.role &amp;&amp; &lt;div className=&quot;text-sm text-gray-600&quot;&gt;{committee.role}&lt;/div&gt;}
              &lt;/div&gt;
            ))}
          &lt;/div&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );

  // Process data and extract metadata
  const processTabData = (tabId: string, data: unknown) =&gt; {
    let metadata: DataMetadata | null = null;
    let processedData = data;

    if (data &amp;&amp; typeof data === &apos;object&apos;) {
      metadata = extractTransparencyMetadata(data as Record&lt;string, unknown&gt;);

      // Extract specific data structures
      if (tabId === &apos;bills&apos;) {
        const billsObj = data as Record&lt;string, unknown&gt;;
        processedData = Array.isArray(billsObj?.sponsoredLegislation)
          ? billsObj.sponsoredLegislation
          : Array.isArray(billsObj?.bills)
            ? billsObj.bills
            : [];
      } else if (tabId === &apos;votes&apos;) {
        const votesObj = data as Record&lt;string, unknown&gt;;
        processedData = Array.isArray(votesObj?.votes) ? votesObj.votes : [];
      }
    }

    return { processedData, metadata };
  };

  // Define tabs
  const tabs: TabData[] = [
    {
      id: &apos;profile&apos;,
      label: &apos;Profile&apos;,
      icon: User,
      content: &lt;ProfileContent /&gt;,
    },
    {
      id: &apos;votes&apos;,
      label: &apos;Voting Records&apos;,
      icon: Vote,
      content: (() =&gt; {
        const { processedData, metadata } = processTabData(&apos;votes&apos;, tabData.votes);
        return (
          &lt;VotingTab
            votes={processedData as Vote[]}
            metadata={metadata || undefined}
            loading={loading.votes}
          /&gt;
        );
      })(),
      count: Array.isArray(tabData.votes) ? tabData.votes.length : 0,
    },
    {
      id: &apos;bills&apos;,
      label: &apos;Sponsored Bills&apos;,
      icon: FileText,
      content: (() =&gt; {
        const { processedData, metadata } = processTabData(&apos;bills&apos;, tabData.bills);
        return (
          &lt;BillsTab
            bills={processedData as Bill[]}
            metadata={metadata || undefined}
            loading={loading.bills}
          /&gt;
        );
      })(),
      count: Array.isArray(tabData.bills) ? tabData.bills.length : 0,
    },
    {
      id: &apos;finance&apos;,
      label: &apos;Campaign Finance&apos;,
      icon: DollarSign,
      content: (() =&gt; {
        const { processedData, metadata } = processTabData(&apos;finance&apos;, tabData.finance);
        return (
          &lt;FinanceTab
            financeData={processedData as FinanceData}
            metadata={metadata || undefined}
            loading={loading.finance}
          /&gt;
        );
      })(),
    },
    {
      id: &apos;news&apos;,
      label: &apos;News&apos;,
      icon: Newspaper,
      content: (
        &lt;div className=&quot;text-center py-12&quot;&gt;
          &lt;div className=&quot;text-gray-500 mb-2&quot;&gt;News coverage coming soon&lt;/div&gt;
          &lt;div className=&quot;text-sm text-gray-400&quot;&gt;
            Recent news mentions will appear here when available
          &lt;/div&gt;
        &lt;/div&gt;
      ),
    },
    {
      id: &apos;relationships&apos;,
      label: &apos;Relationships&apos;,
      icon: Users,
      content: (
        &lt;div className=&quot;text-center py-12&quot;&gt;
          &lt;div className=&quot;text-gray-500 mb-2&quot;&gt;Relationship analysis coming soon&lt;/div&gt;
          &lt;div className=&quot;text-sm text-gray-400&quot;&gt;
            Legislative partnerships and voting coalitions will appear here
          &lt;/div&gt;
        &lt;/div&gt;
      ),
    },
  ];

  const activeTabData = tabs.find(tab =&gt; tab.id === activeTab);

  if (isMobile) {
    // Mobile dropdown interface
    return (
      &lt;div className=&quot;space-y-4&quot;&gt;
        {/* Mobile Tab Selector */}
        &lt;div className=&quot;relative&quot;&gt;
          &lt;select
            value={activeTab}
            onChange={e =&gt; setActiveTab(e.target.value)}
            className=&quot;appearance-none w-full bg-white border border-gray-300 rounded-lg px-4 py-3 pr-10 text-base font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;
          &gt;
            {tabs.map(tab =&gt; (
              &lt;option key={tab.id} value={tab.id}&gt;
                {tab.label}
                {tab.count !== undefined &amp;&amp; tab.count &gt; 0 &amp;&amp; ` (${tab.count})`}
              &lt;/option&gt;
            ))}
          &lt;/select&gt;
          &lt;ChevronDown className=&quot;absolute right-3 top-4 h-5 w-5 text-gray-400 pointer-events-none&quot; /&gt;
        &lt;/div&gt;

        {/* Error Display */}
        {errors[activeTab] &amp;&amp; (
          &lt;div className=&quot;bg-red-50 border border-red-200 rounded-lg p-4&quot;&gt;
            &lt;div className=&quot;flex items-center gap-2 text-red-800&quot;&gt;
              &lt;AlertCircle className=&quot;h-5 w-5&quot; /&gt;
              &lt;span className=&quot;font-medium&quot;&gt;Error loading {activeTabData?.label}&lt;/span&gt;
            &lt;/div&gt;
            &lt;p className=&quot;text-red-700 text-sm mt-1&quot;&gt;{errors[activeTab]}&lt;/p&gt;
          &lt;/div&gt;
        )}

        {/* Tab Content */}
        &lt;div className=&quot;bg-white rounded-lg&quot;&gt;{activeTabData?.content}&lt;/div&gt;
      &lt;/div&gt;
    );
  }

  // Desktop tab interface
  return (
    &lt;div className=&quot;space-y-6&quot;&gt;
      {/* Tab Navigation */}
      &lt;div className=&quot;border-b border-gray-200&quot;&gt;
        &lt;nav className=&quot;-mb-px flex space-x-8 overflow-x-auto&quot;&gt;
          {tabs.map(tab =&gt; {
            const Icon = tab.icon;
            const isActive = activeTab === tab.id;
            const hasError = errors[tab.id];
            const isLoading = loading[tab.id];

            return (
              &lt;button
                key={tab.id}
                onClick={() =&gt; setActiveTab(tab.id)}
                className={`
                  whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm flex items-center gap-2
                  ${
                    isActive
                      ? &apos;border-blue-500 text-blue-600&apos;
                      : &apos;border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300&apos;
                  }
                  ${hasError ? &apos;text-red-600&apos; : &apos;&apos;}
                `}
              &gt;
                &lt;Icon className=&quot;h-4 w-4&quot; /&gt;
                {tab.label}
                {tab.count !== undefined &amp;&amp; tab.count &gt; 0 &amp;&amp; (
                  &lt;span className=&quot;ml-1 bg-gray-100 text-gray-600 py-0.5 px-2 rounded-full text-xs&quot;&gt;
                    {tab.count}
                  &lt;/span&gt;
                )}
                {isLoading &amp;&amp; (
                  &lt;div className=&quot;animate-spin h-3 w-3 border border-gray-300 border-t-blue-600 rounded-full&quot; /&gt;
                )}
                {hasError &amp;&amp; &lt;AlertCircle className=&quot;h-3 w-3 text-red-500&quot; /&gt;}
              &lt;/button&gt;
            );
          })}
        &lt;/nav&gt;
      &lt;/div&gt;

      {/* Error Display */}
      {errors[activeTab] &amp;&amp; (
        &lt;div className=&quot;bg-red-50 border border-red-200 rounded-lg p-4&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2 text-red-800&quot;&gt;
            &lt;AlertCircle className=&quot;h-5 w-5&quot; /&gt;
            &lt;span className=&quot;font-medium&quot;&gt;Error loading {activeTabData?.label}&lt;/span&gt;
          &lt;/div&gt;
          &lt;p className=&quot;text-red-700 text-sm mt-1&quot;&gt;{errors[activeTab]}&lt;/p&gt;
          &lt;button
            onClick={() =&gt; fetchTabData(activeTab)}
            className=&quot;mt-2 text-sm text-red-600 hover:text-red-800 font-medium&quot;
          &gt;
            Try again
          &lt;/button&gt;
        &lt;/div&gt;
      )}

      {/* Tab Content */}
      &lt;div className=&quot;bg-white rounded-lg&quot;&gt;{activeTabData?.content}&lt;/div&gt;
    &lt;/div&gt;
  );
}

</file>
<file path="[bioguideId]/components/KeyStatsBar.tsx">
/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

&apos;use client&apos;;

import React from &apos;react&apos;;
import { TrendingUp, Users, FileText, DollarSign, Calendar, Award } from &apos;lucide-react&apos;;

interface KeyStatsBarProps {
  stats: {
    billsSponsored?: number;
    votesParticipated?: number;
    partyAlignment?: number;
    totalRaised?: number;
    yearsInOffice?: number;
    committees?: number;
  };
  loading?: boolean;
}

interface StatCardProps {
  icon: React.ReactNode;
  label: string;
  value: string | number;
  subtitle?: string;
  color?: &apos;blue&apos; | &apos;green&apos; | &apos;purple&apos; | &apos;orange&apos; | &apos;red&apos; | &apos;gray&apos;;
  loading?: boolean;
}

function StatCard({
  icon,
  label,
  value,
  subtitle,
  color = &apos;blue&apos;,
  loading = false,
}: StatCardProps) {
  const colorClasses = {
    blue: &apos;text-blue-600 bg-blue-50&apos;,
    green: &apos;text-green-600 bg-green-50&apos;,
    purple: &apos;text-purple-600 bg-purple-50&apos;,
    orange: &apos;text-orange-600 bg-orange-50&apos;,
    red: &apos;text-red-600 bg-red-50&apos;,
    gray: &apos;text-gray-600 bg-gray-50&apos;,
  };

  if (loading) {
    return (
      &lt;div className=&quot;bg-white rounded-lg p-4 shadow-sm border border-gray-100&quot;&gt;
        &lt;div className=&quot;flex items-center gap-3&quot;&gt;
          &lt;div className={`p-2 rounded-lg ${colorClasses[color]} animate-pulse`}&gt;{icon}&lt;/div&gt;
          &lt;div className=&quot;flex-1&quot;&gt;
            &lt;div className=&quot;h-4 bg-gray-200 rounded animate-pulse mb-1&quot;&gt;&lt;/div&gt;
            &lt;div className=&quot;h-6 bg-gray-200 rounded animate-pulse w-16&quot;&gt;&lt;/div&gt;
            {subtitle &amp;&amp; &lt;div className=&quot;h-3 bg-gray-200 rounded animate-pulse w-12 mt-1&quot;&gt;&lt;/div&gt;}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    );
  }

  return (
    &lt;div className=&quot;bg-white rounded-lg p-4 shadow-sm border border-gray-100 hover:shadow-md transition-shadow&quot;&gt;
      &lt;div className=&quot;flex items-center gap-3&quot;&gt;
        &lt;div className={`p-2 rounded-lg ${colorClasses[color]}`}&gt;{icon}&lt;/div&gt;
        &lt;div className=&quot;flex-1&quot;&gt;
          &lt;p className=&quot;text-sm font-medium text-gray-600 mb-1&quot;&gt;{label}&lt;/p&gt;
          &lt;p className=&quot;text-2xl font-bold text-gray-900&quot;&gt;{value}&lt;/p&gt;
          {subtitle &amp;&amp; &lt;p className=&quot;text-xs text-gray-500 mt-1&quot;&gt;{subtitle}&lt;/p&gt;}
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}

export function KeyStatsBar({ stats, loading = false }: KeyStatsBarProps) {
  // Format currency values
  const formatCurrency = (amount: number) =&gt; {
    if (amount &gt;= 1000000) {
      return `$${(amount / 1000000).toFixed(1)}M`;
    }
    if (amount &gt;= 1000) {
      return `$${(amount / 1000).toFixed(0)}K`;
    }
    return `$${amount.toLocaleString()}`;
  };

  // Format percentage
  const formatPercentage = (value: number) =&gt; {
    return `${Math.round(value)}%`;
  };

  // Calculate years in office from terms or provide fallback
  const yearsInOffice = stats.yearsInOffice || 0;

  return (
    &lt;div className=&quot;bg-gray-50 py-6&quot;&gt;
      &lt;div className=&quot;container mx-auto px-4&quot;&gt;
        &lt;div className=&quot;grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4&quot;&gt;
          &lt;StatCard
            icon={&lt;FileText className=&quot;w-5 h-5&quot; /&gt;}
            label=&quot;Bills Sponsored&quot;
            value={stats.billsSponsored ?? &apos;â€”&apos;}
            subtitle=&quot;Current Congress&quot;
            color=&quot;blue&quot;
            loading={loading}
          /&gt;

          &lt;StatCard
            icon={&lt;Users className=&quot;w-5 h-5&quot; /&gt;}
            label=&quot;Votes Cast&quot;
            value={stats.votesParticipated ?? &apos;â€”&apos;}
            subtitle=&quot;This term&quot;
            color=&quot;green&quot;
            loading={loading}
          /&gt;

          &lt;StatCard
            icon={&lt;TrendingUp className=&quot;w-5 h-5&quot; /&gt;}
            label=&quot;Party Alignment&quot;
            value={stats.partyAlignment ? formatPercentage(stats.partyAlignment) : &apos;â€”&apos;}
            subtitle=&quot;Voting record&quot;
            color=&quot;purple&quot;
            loading={loading}
          /&gt;

          &lt;StatCard
            icon={&lt;DollarSign className=&quot;w-5 h-5&quot; /&gt;}
            label=&quot;Total Raised&quot;
            value={stats.totalRaised ? formatCurrency(stats.totalRaised) : &apos;â€”&apos;}
            subtitle=&quot;Current cycle&quot;
            color=&quot;orange&quot;
            loading={loading}
          /&gt;

          &lt;StatCard
            icon={&lt;Calendar className=&quot;w-5 h-5&quot; /&gt;}
            label=&quot;Years in Office&quot;
            value={yearsInOffice || &apos;â€”&apos;}
            subtitle=&quot;Experience&quot;
            color=&quot;red&quot;
            loading={loading}
          /&gt;

          &lt;StatCard
            icon={&lt;Award className=&quot;w-5 h-5&quot; /&gt;}
            label=&quot;Committees&quot;
            value={stats.committees ?? &apos;â€”&apos;}
            subtitle=&quot;Current&quot;
            color=&quot;gray&quot;
            loading={loading}
          /&gt;
        &lt;/div&gt;

        {/* Additional context for stats */}
        &lt;div className=&quot;mt-4 text-center&quot;&gt;
          &lt;p className=&quot;text-xs text-gray-500&quot;&gt;
            Statistics updated from Congress.gov, FEC, and official records â€¢ Some data may be
            incomplete
          &lt;/p&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}

</file>
<file path="[bioguideId]/components/MinimalRepresentativePage.tsx">
/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

&apos;use client&apos;;

import React, { useState } from &apos;react&apos;;
import { SiteHeader } from &apos;@/components/layout/SiteHeader&apos;;
import { MinimalHeader } from &apos;@/components/representative/MinimalHeader&apos;;
import { MinimalTabs } from &apos;@/components/representative/MinimalTabs&apos;;
import { VotingMetrics } from &apos;@/components/representative/VotingMetrics&apos;;
import { VotingBars } from &apos;@/components/representative/VotingBars&apos;;

interface MinimalRepresentativePageProps {
  representative: {
    bioguideId: string;
    name: string;
    title?: string;
    state: string;
    district?: string;
    party: string;
    chamber: &apos;House&apos; | &apos;Senate&apos;;
    currentTerm?: {
      start?: string;
      end?: string;
    };
    committees?: Array&lt;{
      name: string;
      role?: string;
    }&gt;;
  };
  serverData?: {
    bills?: unknown[];
    votes?: unknown[];
    finance?: Record&lt;string, unknown&gt;;
    news?: unknown[];
  };
}

export function MinimalRepresentativePage({
  representative,
  serverData,
}: MinimalRepresentativePageProps) {
  const [activeTab, setActiveTab] = useState(&apos;Overview&apos;);

  // Mock data for demonstration - would be calculated from real data
  const votingData = {
    total: 245,
    yes: 156,
    no: 67,
    present: 12,
    absent: 10,
  };

  const votingDistribution = {
    yes: Math.round((votingData.yes / votingData.total) * 100),
    no: Math.round((votingData.no / votingData.total) * 100),
    absent: Math.round(((votingData.absent + votingData.present) / votingData.total) * 100),
  };

  // Mock recent votes data
  const recentVotes = [
    {
      id: &apos;1&apos;,
      bill: &apos;H.R. 1234&apos;,
      title: &apos;Infrastructure Investment and Jobs Act&apos;,
      date: &apos;2024-03-15&apos;,
      vote: &apos;Yes&apos;,
    },
    {
      id: &apos;2&apos;,
      bill: &apos;S. 567&apos;,
      title: &apos;Climate Action and Clean Energy Act&apos;,
      date: &apos;2024-03-10&apos;,
      vote: &apos;No&apos;,
    },
    {
      id: &apos;3&apos;,
      bill: &apos;H.R. 890&apos;,
      title: &apos;Healthcare Affordability Act&apos;,
      date: &apos;2024-03-05&apos;,
      vote: &apos;Yes&apos;,
    },
  ];

  const quickStats = {
    committees: representative.committees?.length || 3,
    billsSponsored: Array.isArray(serverData?.bills) ? serverData.bills.length : 12,
    attendance: 94,
  };

  return (
    &lt;div className=&quot;min-h-screen bg-white&quot;&gt;
      &lt;SiteHeader /&gt;
      &lt;MinimalHeader rep={representative} /&gt;
      &lt;MinimalTabs active={activeTab} onChange={setActiveTab} /&gt;

      &lt;main className=&quot;max-w-7xl mx-auto px-8 py-12&quot;&gt;
        &lt;div className=&quot;grid grid-cols-12 gap-8&quot;&gt;
          {/* Main Content */}
          &lt;div className=&quot;col-span-8&quot;&gt;
            {activeTab === &apos;Overview&apos; &amp;&amp; (
              &lt;div className=&quot;space-y-12&quot;&gt;
                &lt;section&gt;
                  &lt;h2 className=&quot;text-xs uppercase tracking-[0.15em] text-gray-400 mb-6&quot;&gt;
                    Representative Summary
                  &lt;/h2&gt;
                  &lt;div className=&quot;prose prose-gray max-w-none&quot;&gt;
                    &lt;p className=&quot;text-lg text-gray-700 leading-relaxed&quot;&gt;
                      {representative.name} serves as a{&apos; &apos;}
                      {representative.chamber === &apos;Senate&apos; ? &apos;U.S. Senator&apos; : &apos;U.S. Representative&apos;}{&apos; &apos;}
                      representing {representative.state}
                      {representative.district ? ` District ${representative.district}` : &apos;&apos;}. They
                      are a member of the {representative.party} party.
                    &lt;/p&gt;
                  &lt;/div&gt;
                &lt;/section&gt;

                {/* Complete Voting Analysis Grid */}
                &lt;section&gt;
                  &lt;h2 className=&quot;text-xs uppercase tracking-[0.15em] text-gray-400 mb-6&quot;&gt;
                    Voting Analysis
                  &lt;/h2&gt;
                  &lt;div className=&quot;grid grid-cols-4 gap-6&quot;&gt;
                    &lt;div className=&quot;text-center p-6 bg-gray-50 rounded-lg&quot;&gt;
                      &lt;div className=&quot;text-2xl font-light text-gray-900&quot;&gt;{votingData.total}&lt;/div&gt;
                      &lt;div className=&quot;text-xs uppercase tracking-wide text-gray-500 mt-1&quot;&gt;
                        Total Votes
                      &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div className=&quot;text-center p-6 bg-green-50 rounded-lg&quot;&gt;
                      &lt;div className=&quot;text-2xl font-light text-[#0a9338]&quot;&gt;{votingData.yes}&lt;/div&gt;
                      &lt;div className=&quot;text-xs uppercase tracking-wide text-gray-500 mt-1&quot;&gt;
                        Yes Votes
                      &lt;/div&gt;
                      &lt;div className=&quot;text-xs text-gray-400 mt-1&quot;&gt;{votingDistribution.yes}%&lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div className=&quot;text-center p-6 bg-red-50 rounded-lg&quot;&gt;
                      &lt;div className=&quot;text-2xl font-light text-[#e11d07]&quot;&gt;{votingData.no}&lt;/div&gt;
                      &lt;div className=&quot;text-xs uppercase tracking-wide text-gray-500 mt-1&quot;&gt;
                        No Votes
                      &lt;/div&gt;
                      &lt;div className=&quot;text-xs text-gray-400 mt-1&quot;&gt;{votingDistribution.no}%&lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div className=&quot;text-center p-6 bg-gray-50 rounded-lg&quot;&gt;
                      &lt;div className=&quot;text-2xl font-light text-gray-600&quot;&gt;
                        {votingData.absent + votingData.present}
                      &lt;/div&gt;
                      &lt;div className=&quot;text-xs uppercase tracking-wide text-gray-500 mt-1&quot;&gt;
                        Absent/Present
                      &lt;/div&gt;
                      &lt;div className=&quot;text-xs text-gray-400 mt-1&quot;&gt;{votingDistribution.absent}%&lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/section&gt;

                &lt;VotingBars dist={votingDistribution} /&gt;

                {/* Recent Legislative Activity */}
                &lt;section&gt;
                  &lt;h2 className=&quot;text-xs uppercase tracking-[0.15em] text-gray-400 mb-6&quot;&gt;
                    Recent Legislative Activity
                  &lt;/h2&gt;
                  &lt;div className=&quot;space-y-4&quot;&gt;
                    {recentVotes.slice(0, 3).map(v =&gt; (
                      &lt;div key={v.id} className=&quot;py-4 border-b border-gray-100 last:border-b-0&quot;&gt;
                        &lt;div className=&quot;flex justify-between items-start&quot;&gt;
                          &lt;div className=&quot;flex-1&quot;&gt;
                            &lt;h3 className=&quot;font-medium text-gray-900&quot;&gt;
                              {v.bill} â€¢ {v.title}
                            &lt;/h3&gt;
                            &lt;p className=&quot;text-sm text-gray-400 mt-1&quot;&gt;{v.date}&lt;/p&gt;
                          &lt;/div&gt;
                          &lt;span
                            className={`text-sm px-3 py-1 rounded-full ${
                              v.vote === &apos;Yes&apos;
                                ? &apos;bg-green-50 text-[#0a9338]&apos;
                                : v.vote === &apos;No&apos;
                                  ? &apos;bg-red-50 text-[#e11d07]&apos;
                                  : &apos;bg-gray-50 text-gray-600&apos;
                            }`}
                          &gt;
                            {v.vote}
                          &lt;/span&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;
                    ))}
                  &lt;/div&gt;
                &lt;/section&gt;
              &lt;/div&gt;
            )}

            {activeTab === &apos;Voting Records&apos; &amp;&amp; (
              &lt;div className=&quot;space-y-12&quot;&gt;
                &lt;VotingMetrics data={votingData} /&gt;
                &lt;VotingBars dist={votingDistribution} /&gt;

                &lt;section&gt;
                  &lt;h2 className=&quot;text-xs uppercase tracking-[0.15em] text-gray-400 mb-6&quot;&gt;
                    Recent Votes
                  &lt;/h2&gt;
                  &lt;div className=&quot;space-y-4&quot;&gt;
                    {recentVotes.map(v =&gt; (
                      &lt;div key={v.id} className=&quot;py-4 border-b border-gray-100 last:border-b-0&quot;&gt;
                        &lt;div className=&quot;flex justify-between items-start&quot;&gt;
                          &lt;div className=&quot;flex-1&quot;&gt;
                            &lt;h3 className=&quot;font-medium text-gray-900&quot;&gt;
                              {v.bill} â€¢ {v.title}
                            &lt;/h3&gt;
                            &lt;p className=&quot;text-sm text-gray-400 mt-1&quot;&gt;{v.date}&lt;/p&gt;
                          &lt;/div&gt;
                          &lt;span
                            className={`text-sm px-3 py-1 rounded-full ${
                              v.vote === &apos;Yes&apos;
                                ? &apos;bg-green-50 text-[#0a9338]&apos;
                                : v.vote === &apos;No&apos;
                                  ? &apos;bg-red-50 text-[#e11d07]&apos;
                                  : &apos;bg-gray-50 text-gray-600&apos;
                            }`}
                          &gt;
                            {v.vote}
                          &lt;/span&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;
                    ))}
                  &lt;/div&gt;
                &lt;/section&gt;
              &lt;/div&gt;
            )}

            {activeTab === &apos;Legislation&apos; &amp;&amp; (
              &lt;div className=&quot;space-y-12&quot;&gt;
                &lt;section&gt;
                  &lt;h2 className=&quot;text-xs uppercase tracking-[0.15em] text-gray-400 mb-6&quot;&gt;
                    Legislative Summary
                  &lt;/h2&gt;
                  &lt;div className=&quot;grid grid-cols-3 gap-6&quot;&gt;
                    &lt;div className=&quot;text-center p-6 bg-blue-50 rounded-lg&quot;&gt;
                      &lt;div className=&quot;text-2xl font-light text-[#3ea2d4]&quot;&gt;
                        {quickStats.billsSponsored}
                      &lt;/div&gt;
                      &lt;div className=&quot;text-xs uppercase tracking-wide text-gray-500 mt-1&quot;&gt;
                        Bills Sponsored
                      &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div className=&quot;text-center p-6 bg-gray-50 rounded-lg&quot;&gt;
                      &lt;div className=&quot;text-2xl font-light text-gray-900&quot;&gt;8&lt;/div&gt;
                      &lt;div className=&quot;text-xs uppercase tracking-wide text-gray-500 mt-1&quot;&gt;
                        Bills Enacted
                      &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div className=&quot;text-center p-6 bg-green-50 rounded-lg&quot;&gt;
                      &lt;div className=&quot;text-2xl font-light text-[#0a9338]&quot;&gt;15&lt;/div&gt;
                      &lt;div className=&quot;text-xs uppercase tracking-wide text-gray-500 mt-1&quot;&gt;
                        Co-Sponsored
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/section&gt;

                &lt;section&gt;
                  &lt;h2 className=&quot;text-xs uppercase tracking-[0.15em] text-gray-400 mb-6&quot;&gt;
                    Recent Sponsored Bills
                  &lt;/h2&gt;
                  &lt;div className=&quot;space-y-6&quot;&gt;
                    {[
                      {
                        id: &apos;1&apos;,
                        number: &apos;H.R. 2847&apos;,
                        title: &apos;Clean Energy Infrastructure Investment Act&apos;,
                        introduced: &apos;2024-02-15&apos;,
                        status: &apos;Committee Review&apos;,
                        summary:
                          &apos;Provides federal funding for renewable energy infrastructure projects across rural and urban communities.&apos;,
                      },
                      {
                        id: &apos;2&apos;,
                        number: &apos;H.R. 3156&apos;,
                        title: &apos;Healthcare Accessibility and Affordability Act&apos;,
                        introduced: &apos;2024-01-22&apos;,
                        status: &apos;Passed House&apos;,
                        summary:
                          &apos;Expands healthcare coverage options and reduces prescription drug costs for middle-income families.&apos;,
                      },
                      {
                        id: &apos;3&apos;,
                        number: &apos;H.R. 2901&apos;,
                        title: &apos;Small Business Innovation Support Act&apos;,
                        introduced: &apos;2023-12-08&apos;,
                        status: &apos;Enacted&apos;,
                        summary:
                          &apos;Creates tax incentives and grants for small businesses investing in research and development.&apos;,
                      },
                    ].map(bill =&gt; (
                      &lt;div key={bill.id} className=&quot;border border-gray-100 rounded-lg p-6&quot;&gt;
                        &lt;div className=&quot;flex justify-between items-start mb-4&quot;&gt;
                          &lt;div className=&quot;flex-1&quot;&gt;
                            &lt;h3 className=&quot;font-medium text-gray-900&quot;&gt;
                              {bill.number} â€¢ {bill.title}
                            &lt;/h3&gt;
                            &lt;p className=&quot;text-sm text-gray-400 mt-1&quot;&gt;
                              Introduced {bill.introduced}
                            &lt;/p&gt;
                          &lt;/div&gt;
                          &lt;span
                            className={`text-xs px-3 py-1 rounded-full ${
                              bill.status === &apos;Enacted&apos;
                                ? &apos;bg-green-50 text-[#0a9338]&apos;
                                : bill.status === &apos;Passed House&apos;
                                  ? &apos;bg-blue-50 text-[#3ea2d4]&apos;
                                  : &apos;bg-gray-50 text-gray-600&apos;
                            }`}
                          &gt;
                            {bill.status}
                          &lt;/span&gt;
                        &lt;/div&gt;
                        &lt;p className=&quot;text-sm text-gray-600 leading-relaxed&quot;&gt;{bill.summary}&lt;/p&gt;
                      &lt;/div&gt;
                    ))}
                  &lt;/div&gt;
                &lt;/section&gt;

                &lt;section&gt;
                  &lt;h2 className=&quot;text-xs uppercase tracking-[0.15em] text-gray-400 mb-6&quot;&gt;
                    Legislative Focus Areas
                  &lt;/h2&gt;
                  &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
                    {[
                      { area: &apos;Healthcare&apos;, count: 8 },
                      { area: &apos;Environment&apos;, count: 6 },
                      { area: &apos;Economy&apos;, count: 5 },
                      { area: &apos;Education&apos;, count: 3 },
                    ].map(focus =&gt; (
                      &lt;div
                        key={focus.area}
                        className=&quot;flex justify-between items-center p-4 bg-gray-50 rounded-lg&quot;
                      &gt;
                        &lt;span className=&quot;text-sm text-gray-700&quot;&gt;{focus.area}&lt;/span&gt;
                        &lt;span className=&quot;text-sm font-medium text-gray-900&quot;&gt;
                          {focus.count} bills
                        &lt;/span&gt;
                      &lt;/div&gt;
                    ))}
                  &lt;/div&gt;
                &lt;/section&gt;
              &lt;/div&gt;
            )}

            {activeTab === &apos;Finance&apos; &amp;&amp; (
              &lt;div className=&quot;space-y-12&quot;&gt;
                &lt;section&gt;
                  &lt;h2 className=&quot;text-xs uppercase tracking-[0.15em] text-gray-400 mb-6&quot;&gt;
                    Campaign Finance Overview
                  &lt;/h2&gt;
                  &lt;div className=&quot;grid grid-cols-4 gap-6&quot;&gt;
                    &lt;div className=&quot;text-center p-6 bg-green-50 rounded-lg&quot;&gt;
                      &lt;div className=&quot;text-2xl font-light text-[#0a9338]&quot;&gt;$2.4M&lt;/div&gt;
                      &lt;div className=&quot;text-xs uppercase tracking-wide text-gray-500 mt-1&quot;&gt;
                        Total Raised
                      &lt;/div&gt;
                      &lt;div className=&quot;text-xs text-gray-400 mt-1&quot;&gt;2023-2024 Cycle&lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div className=&quot;text-center p-6 bg-blue-50 rounded-lg&quot;&gt;
                      &lt;div className=&quot;text-2xl font-light text-[#3ea2d4]&quot;&gt;$1.8M&lt;/div&gt;
                      &lt;div className=&quot;text-xs uppercase tracking-wide text-gray-500 mt-1&quot;&gt;
                        Total Spent
                      &lt;/div&gt;
                      &lt;div className=&quot;text-xs text-gray-400 mt-1&quot;&gt;75% of funds&lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div className=&quot;text-center p-6 bg-gray-50 rounded-lg&quot;&gt;
                      &lt;div className=&quot;text-2xl font-light text-gray-900&quot;&gt;$600K&lt;/div&gt;
                      &lt;div className=&quot;text-xs uppercase tracking-wide text-gray-500 mt-1&quot;&gt;
                        Cash on Hand
                      &lt;/div&gt;
                      &lt;div className=&quot;text-xs text-gray-400 mt-1&quot;&gt;As of Q4 2024&lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div className=&quot;text-center p-6 bg-gray-50 rounded-lg&quot;&gt;
                      &lt;div className=&quot;text-2xl font-light text-gray-900&quot;&gt;3,847&lt;/div&gt;
                      &lt;div className=&quot;text-xs uppercase tracking-wide text-gray-500 mt-1&quot;&gt;
                        Contributors
                      &lt;/div&gt;
                      &lt;div className=&quot;text-xs text-gray-400 mt-1&quot;&gt;Individual donors&lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/section&gt;

                &lt;section&gt;
                  &lt;h2 className=&quot;text-xs uppercase tracking-[0.15em] text-gray-400 mb-6&quot;&gt;
                    Funding Sources
                  &lt;/h2&gt;
                  &lt;div className=&quot;space-y-4&quot;&gt;
                    {[
                      {
                        source: &apos;Individual Contributions&apos;,
                        amount: &apos;$1.6M&apos;,
                        percentage: 67,
                        color: &apos;bg-[#0a9338]&apos;,
                      },
                      {
                        source: &apos;PAC Contributions&apos;,
                        amount: &apos;$480K&apos;,
                        percentage: 20,
                        color: &apos;bg-[#3ea2d4]&apos;,
                      },
                      {
                        source: &apos;Party Committees&apos;,
                        amount: &apos;$240K&apos;,
                        percentage: 10,
                        color: &apos;bg-gray-400&apos;,
                      },
                      { source: &apos;Other&apos;, amount: &apos;$80K&apos;, percentage: 3, color: &apos;bg-gray-300&apos; },
                    ].map(item =&gt; (
                      &lt;div key={item.source} className=&quot;flex items-center gap-4&quot;&gt;
                        &lt;span className=&quot;text-sm w-32 text-gray-700&quot;&gt;{item.source}&lt;/span&gt;
                        &lt;div className=&quot;flex-1 h-2 bg-gray-100 rounded-full&quot;&gt;
                          &lt;div
                            className={`h-2 ${item.color} rounded-full transition-all duration-300`}
                            style={{ width: `${item.percentage}%` }}
                          /&gt;
                        &lt;/div&gt;
                        &lt;span className=&quot;text-sm text-gray-900 w-16 text-right font-medium&quot;&gt;
                          {item.amount}
                        &lt;/span&gt;
                        &lt;span className=&quot;text-sm text-gray-400 w-12 text-right&quot;&gt;
                          {item.percentage}%
                        &lt;/span&gt;
                      &lt;/div&gt;
                    ))}
                  &lt;/div&gt;
                &lt;/section&gt;

                &lt;section&gt;
                  &lt;h2 className=&quot;text-xs uppercase tracking-[0.15em] text-gray-400 mb-6&quot;&gt;
                    Top Contributors
                  &lt;/h2&gt;
                  &lt;div className=&quot;space-y-4&quot;&gt;
                    {[
                      { name: &apos;National Education Association&apos;, amount: &apos;$15,000&apos;, type: &apos;PAC&apos; },
                      { name: &apos;American Federation of Teachers&apos;, amount: &apos;$12,500&apos;, type: &apos;PAC&apos; },
                      { name: &quot;Emily&apos;s List&quot;, amount: &apos;$10,000&apos;, type: &apos;PAC&apos; },
                      { name: &apos;Sierra Club&apos;, amount: &apos;$8,500&apos;, type: &apos;PAC&apos; },
                      { name: &apos;AFL-CIO&apos;, amount: &apos;$7,000&apos;, type: &apos;PAC&apos; },
                    ].map((contributor, index) =&gt; (
                      &lt;div
                        key={index}
                        className=&quot;flex justify-between items-center py-3 border-b border-gray-100 last:border-b-0&quot;
                      &gt;
                        &lt;div className=&quot;flex-1&quot;&gt;
                          &lt;h3 className=&quot;font-medium text-gray-900&quot;&gt;{contributor.name}&lt;/h3&gt;
                          &lt;p className=&quot;text-xs text-gray-400 mt-1&quot;&gt;{contributor.type}&lt;/p&gt;
                        &lt;/div&gt;
                        &lt;span className=&quot;text-sm font-medium text-gray-900&quot;&gt;
                          {contributor.amount}
                        &lt;/span&gt;
                      &lt;/div&gt;
                    ))}
                  &lt;/div&gt;
                &lt;/section&gt;

                &lt;section&gt;
                  &lt;h2 className=&quot;text-xs uppercase tracking-[0.15em] text-gray-400 mb-6&quot;&gt;
                    Expenditures by Category
                  &lt;/h2&gt;
                  &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
                    {[
                      { category: &apos;Media &amp; Advertising&apos;, amount: &apos;$720K&apos;, percentage: 40 },
                      { category: &apos;Staff &amp; Consultants&apos;, amount: &apos;$540K&apos;, percentage: 30 },
                      { category: &apos;Fundraising&apos;, amount: &apos;$270K&apos;, percentage: 15 },
                      { category: &apos;Travel &amp; Events&apos;, amount: &apos;$180K&apos;, percentage: 10 },
                      { category: &apos;Administrative&apos;, amount: &apos;$90K&apos;, percentage: 5 },
                    ].map(expense =&gt; (
                      &lt;div key={expense.category} className=&quot;p-4 bg-gray-50 rounded-lg&quot;&gt;
                        &lt;div className=&quot;flex justify-between items-start mb-2&quot;&gt;
                          &lt;span className=&quot;text-sm text-gray-700&quot;&gt;{expense.category}&lt;/span&gt;
                          &lt;span className=&quot;text-sm font-medium text-gray-900&quot;&gt;
                            {expense.amount}
                          &lt;/span&gt;
                        &lt;/div&gt;
                        &lt;div className=&quot;w-full h-1 bg-gray-200 rounded-full&quot;&gt;
                          &lt;div
                            className=&quot;h-1 bg-[#3ea2d4] rounded-full transition-all duration-300&quot;
                            style={{ width: `${expense.percentage}%` }}
                          /&gt;
                        &lt;/div&gt;
                        &lt;span className=&quot;text-xs text-gray-400 mt-1&quot;&gt;
                          {expense.percentage}% of total
                        &lt;/span&gt;
                      &lt;/div&gt;
                    ))}
                  &lt;/div&gt;
                &lt;/section&gt;
              &lt;/div&gt;
            )}

            {activeTab === &apos;News&apos; &amp;&amp; (
              &lt;div className=&quot;space-y-12&quot;&gt;
                &lt;section&gt;
                  &lt;h2 className=&quot;text-xs uppercase tracking-[0.15em] text-gray-400 mb-6&quot;&gt;
                    Recent News Coverage
                  &lt;/h2&gt;
                  &lt;div className=&quot;space-y-6&quot;&gt;
                    {[
                      {
                        id: &apos;1&apos;,
                        headline: &apos;Representative Introduces Bipartisan Infrastructure Bill&apos;,
                        source: &apos;The Hill&apos;,
                        date: &apos;2024-08-14&apos;,
                        summary:
                          &apos;Legislation aims to modernize transportation networks and expand broadband access in rural communities.&apos;,
                        url: &apos;#&apos;,
                      },
                      {
                        id: &apos;2&apos;,
                        headline: &apos;Local Representative Advocates for Climate Action at Capitol&apos;,
                        source: &apos;Washington Post&apos;,
                        date: &apos;2024-08-12&apos;,
                        summary:
                          &apos;Speaking at a committee hearing, the representative emphasized the need for immediate action on renewable energy initiatives.&apos;,
                        url: &apos;#&apos;,
                      },
                      {
                        id: &apos;3&apos;,
                        headline: &apos;Healthcare Reform Bill Gains Momentum with New Co-Sponsor&apos;,
                        source: &apos;Politico&apos;,
                        date: &apos;2024-08-10&apos;,
                        summary:
                          &apos;The representative joins growing coalition supporting expanded healthcare access for underserved communities.&apos;,
                        url: &apos;#&apos;,
                      },
                      {
                        id: &apos;4&apos;,
                        headline: &apos;Education Funding Initiative Receives Bipartisan Support&apos;,
                        source: &apos;CNN&apos;,
                        date: &apos;2024-08-08&apos;,
                        summary:
                          &apos;Proposed legislation would increase federal funding for K-12 education and teacher training programs.&apos;,
                        url: &apos;#&apos;,
                      },
                    ].map(article =&gt; (
                      &lt;article
                        key={article.id}
                        className=&quot;border border-gray-100 rounded-lg p-6 hover:border-gray-200 transition-colors&quot;
                      &gt;
                        &lt;div className=&quot;flex justify-between items-start mb-3&quot;&gt;
                          &lt;h3 className=&quot;font-medium text-gray-900 leading-relaxed&quot;&gt;
                            {article.headline}
                          &lt;/h3&gt;
                        &lt;/div&gt;
                        &lt;p className=&quot;text-sm text-gray-600 leading-relaxed mb-3&quot;&gt;
                          {article.summary}
                        &lt;/p&gt;
                        &lt;div className=&quot;flex justify-between items-center text-xs text-gray-400&quot;&gt;
                          &lt;span&gt;{article.source}&lt;/span&gt;
                          &lt;time&gt;{article.date}&lt;/time&gt;
                        &lt;/div&gt;
                      &lt;/article&gt;
                    ))}
                  &lt;/div&gt;
                &lt;/section&gt;

                &lt;section&gt;
                  &lt;h2 className=&quot;text-xs uppercase tracking-[0.15em] text-gray-400 mb-6&quot;&gt;
                    Press Releases
                  &lt;/h2&gt;
                  &lt;div className=&quot;space-y-4&quot;&gt;
                    {[
                      {
                        id: &apos;1&apos;,
                        title: &apos;Statement on Infrastructure Investment and Jobs Act&apos;,
                        date: &apos;2024-08-15&apos;,
                        excerpt:
                          &quot;Today&apos;s passage represents a significant step forward for our district&apos;s infrastructure needs...&quot;,
                      },
                      {
                        id: &apos;2&apos;,
                        title: &apos;Announcing Community Health Center Funding&apos;,
                        date: &apos;2024-08-10&apos;,
                        excerpt:
                          &apos;Securing $2.3 million in federal funding to expand healthcare services in underserved areas...&apos;,
                      },
                      {
                        id: &apos;3&apos;,
                        title: &apos;Supporting Small Business Recovery Initiatives&apos;,
                        date: &apos;2024-08-05&apos;,
                        excerpt:
                          &apos;Introducing legislation to provide additional tax relief and support for local entrepreneurs...&apos;,
                      },
                    ].map(release =&gt; (
                      &lt;div
                        key={release.id}
                        className=&quot;py-4 border-b border-gray-100 last:border-b-0&quot;
                      &gt;
                        &lt;h3 className=&quot;font-medium text-gray-900&quot;&gt;{release.title}&lt;/h3&gt;
                        &lt;p className=&quot;text-sm text-gray-600 mt-2 leading-relaxed&quot;&gt;
                          {release.excerpt}
                        &lt;/p&gt;
                        &lt;time className=&quot;text-xs text-gray-400 mt-2 block&quot;&gt;{release.date}&lt;/time&gt;
                      &lt;/div&gt;
                    ))}
                  &lt;/div&gt;
                &lt;/section&gt;

                &lt;section&gt;
                  &lt;h2 className=&quot;text-xs uppercase tracking-[0.15em] text-gray-400 mb-6&quot;&gt;
                    Media Appearances
                  &lt;/h2&gt;
                  &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
                    {[
                      {
                        outlet: &apos;CNN Sunday Morning&apos;,
                        topic: &apos;Healthcare Policy&apos;,
                        date: &apos;2024-08-11&apos;,
                      },
                      {
                        outlet: &apos;NPR Morning Edition&apos;,
                        topic: &apos;Infrastructure Bill&apos;,
                        date: &apos;2024-08-09&apos;,
                      },
                      { outlet: &apos;Fox News Sunday&apos;, topic: &apos;Education Funding&apos;, date: &apos;2024-08-06&apos; },
                      { outlet: &apos;Meet the Press&apos;, topic: &apos;Climate Action&apos;, date: &apos;2024-08-04&apos; },
                    ].map((appearance, index) =&gt; (
                      &lt;div key={index} className=&quot;p-4 bg-gray-50 rounded-lg&quot;&gt;
                        &lt;h3 className=&quot;font-medium text-gray-900 text-sm&quot;&gt;{appearance.outlet}&lt;/h3&gt;
                        &lt;p className=&quot;text-sm text-gray-600 mt-1&quot;&gt;{appearance.topic}&lt;/p&gt;
                        &lt;time className=&quot;text-xs text-gray-400 mt-2 block&quot;&gt;{appearance.date}&lt;/time&gt;
                      &lt;/div&gt;
                    ))}
                  &lt;/div&gt;
                &lt;/section&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;

          {/* Sidebar */}
          &lt;aside className=&quot;col-span-4&quot;&gt;
            &lt;div className=&quot;sticky top-32&quot;&gt;
              &lt;h3 className=&quot;text-xs uppercase tracking-[0.15em] text-gray-400 mb-4&quot;&gt;
                Quick Stats
              &lt;/h3&gt;
              &lt;div className=&quot;space-y-3 text-sm&quot;&gt;
                &lt;div className=&quot;flex justify-between items-center&quot;&gt;
                  &lt;span className=&quot;text-gray-500&quot;&gt;Committees&lt;/span&gt;
                  &lt;span className=&quot;font-medium&quot;&gt;{quickStats.committees}&lt;/span&gt;
                &lt;/div&gt;
                &lt;div className=&quot;flex justify-between items-center&quot;&gt;
                  &lt;span className=&quot;text-gray-500&quot;&gt;Bills Sponsored&lt;/span&gt;
                  &lt;span className=&quot;font-medium&quot;&gt;{quickStats.billsSponsored}&lt;/span&gt;
                &lt;/div&gt;
                &lt;div className=&quot;flex justify-between items-center&quot;&gt;
                  &lt;span className=&quot;text-gray-500&quot;&gt;Attendance&lt;/span&gt;
                  &lt;span className=&quot;font-medium&quot;&gt;{quickStats.attendance}%&lt;/span&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              {/* Committee Assignments */}
              {representative.committees &amp;&amp; representative.committees.length &gt; 0 &amp;&amp; (
                &lt;div className=&quot;mt-8&quot;&gt;
                  &lt;h3 className=&quot;text-xs uppercase tracking-[0.15em] text-gray-400 mb-4&quot;&gt;
                    Committees
                  &lt;/h3&gt;
                  &lt;div className=&quot;space-y-2&quot;&gt;
                    {representative.committees.slice(0, 3).map((committee, index) =&gt; (
                      &lt;div key={index} className=&quot;text-sm&quot;&gt;
                        &lt;div className=&quot;font-medium text-gray-900&quot;&gt;{committee.name}&lt;/div&gt;
                        {committee.role &amp;&amp; (
                          &lt;div className=&quot;text-xs text-gray-500&quot;&gt;{committee.role}&lt;/div&gt;
                        )}
                      &lt;/div&gt;
                    ))}
                  &lt;/div&gt;
                &lt;/div&gt;
              )}
            &lt;/div&gt;
          &lt;/aside&gt;
        &lt;/div&gt;
      &lt;/main&gt;
    &lt;/div&gt;
  );
}

</file>
<file path="[bioguideId]/components/PersonalInfoCard.tsx">
/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

&apos;use client&apos;;

import React, { useEffect, useState } from &apos;react&apos;;
import { User } from &apos;lucide-react&apos;;
import { EnhancedRepresentative } from &apos;@/types/representative&apos;;
import { getAgeFromWikidata } from &apos;@/lib/api/wikidata&apos;;

interface PersonalInfoCardProps {
  representative: EnhancedRepresentative;
  className?: string;
}

export function PersonalInfoCard({ representative, className = &apos;&apos; }: PersonalInfoCardProps) {
  const [age, setAge] = useState&lt;number | null&gt;(null);
  const [isLoadingAge, setIsLoadingAge] = useState(true);

  useEffect(() =&gt; {
    const fetchAge = async () =&gt; {
      try {
        const ageFromWikidata = await getAgeFromWikidata(representative.bioguideId);
        setAge(ageFromWikidata);
      } catch {
        setAge(null);
      } finally {
        setIsLoadingAge(false);
      }
    };

    fetchAge();
  }, [representative.bioguideId]);

  return (
    &lt;div className={`bg-white rounded-lg border border-gray-200 shadow-sm ${className}`}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-100&quot;&gt;
        &lt;div className=&quot;flex items-center gap-2&quot;&gt;
          &lt;User className=&quot;w-5 h-5 text-gray-500&quot; /&gt;
          &lt;h3 className=&quot;font-semibold text-gray-900&quot;&gt;Personal Information&lt;/h3&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div className=&quot;p-4 space-y-3&quot;&gt;
        &lt;div&gt;
          &lt;label className=&quot;text-sm font-medium text-gray-600&quot;&gt;Full Name&lt;/label&gt;
          &lt;div className=&quot;text-gray-900&quot;&gt;
            {representative.fullName?.official || representative.name}
          &lt;/div&gt;
        &lt;/div&gt;

        {representative.bio?.gender &amp;&amp; (
          &lt;div&gt;
            &lt;label className=&quot;text-sm font-medium text-gray-600&quot;&gt;Gender&lt;/label&gt;
            &lt;div className=&quot;text-gray-900&quot;&gt;
              {representative.bio.gender === &apos;M&apos; ? &apos;Male&apos; : &apos;Female&apos;}
            &lt;/div&gt;
          &lt;/div&gt;
        )}

        &lt;div&gt;
          &lt;label className=&quot;text-sm font-medium text-gray-600&quot;&gt;Age&lt;/label&gt;
          &lt;div className=&quot;text-gray-900&quot;&gt;
            {isLoadingAge ? (
              &lt;span className=&quot;text-gray-500&quot;&gt;Loading...&lt;/span&gt;
            ) : age !== null ? (
              `${age} years old`
            ) : (
              &lt;span className=&quot;text-gray-500&quot;&gt;Not available&lt;/span&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div&gt;
          &lt;label className=&quot;text-sm font-medium text-gray-600&quot;&gt;Party Affiliation&lt;/label&gt;
          &lt;div className=&quot;text-gray-900&quot;&gt;{representative.party}&lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}

</file>
<file path="[bioguideId]/components/ProfileOverview.tsx">
/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

&apos;use client&apos;;

import React from &apos;react&apos;;
import {
  Calendar,
  MapPin,
  Award,
  Users,
  Clock,
  ExternalLink,
  Briefcase,
  Home,
  Heart,
} from &apos;lucide-react&apos;;
import { EnhancedRepresentative } from &apos;@/types/representative&apos;;

interface ProfileOverviewProps {
  representative: EnhancedRepresentative;
  className?: string;
}

interface InfoCardProps {
  title: string;
  icon: React.ReactNode;
  children: React.ReactNode;
  className?: string;
}

function InfoCard({ title, icon, children, className = &apos;&apos; }: InfoCardProps) {
  return (
    &lt;div className={`bg-white rounded-lg border border-gray-200 shadow-sm ${className}`}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-100&quot;&gt;
        &lt;div className=&quot;flex items-center gap-2&quot;&gt;
          &lt;div className=&quot;text-gray-500&quot;&gt;{icon}&lt;/div&gt;
          &lt;h3 className=&quot;font-semibold text-gray-900&quot;&gt;{title}&lt;/h3&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div className=&quot;p-4&quot;&gt;{children}&lt;/div&gt;
    &lt;/div&gt;
  );
}

interface TimelineItemProps {
  date: string;
  title: string;
  description?: string;
  type?: &apos;term&apos; | &apos;leadership&apos; | &apos;committee&apos; | &apos;other&apos;;
}

function TimelineItem({ date, title, description, type = &apos;other&apos; }: TimelineItemProps) {
  const typeColors = {
    term: &apos;bg-blue-100 text-blue-800&apos;,
    leadership: &apos;bg-purple-100 text-purple-800&apos;,
    committee: &apos;bg-green-100 text-green-800&apos;,
    other: &apos;bg-gray-100 text-gray-800&apos;,
  };

  return (
    &lt;div className=&quot;flex gap-3 pb-4 last:pb-0&quot;&gt;
      &lt;div className=&quot;flex-shrink-0 w-2 h-2 bg-blue-600 rounded-full mt-2&quot;&gt;&lt;/div&gt;
      &lt;div className=&quot;flex-1&quot;&gt;
        &lt;div className=&quot;flex flex-wrap items-center gap-2 mb-1&quot;&gt;
          &lt;span className=&quot;text-sm font-medium text-gray-900&quot;&gt;{title}&lt;/span&gt;
          &lt;span className={`px-2 py-1 text-xs font-medium rounded ${typeColors[type]}`}&gt;
            {type}
          &lt;/span&gt;
        &lt;/div&gt;
        &lt;div className=&quot;text-sm text-gray-600 mb-1&quot;&gt;{date}&lt;/div&gt;
        {description &amp;&amp; &lt;div className=&quot;text-sm text-gray-700&quot;&gt;{description}&lt;/div&gt;}
      &lt;/div&gt;
    &lt;/div&gt;
  );
}

export function ProfileOverview({ representative, className = &apos;&apos; }: ProfileOverviewProps) {
  // Get biographical information
  const getBirthInfo = () =&gt; {
    if (!representative.bio?.birthday) return null;
    const birthDate = new Date(representative.bio.birthday);
    const age = new Date().getFullYear() - birthDate.getFullYear();
    return {
      date: birthDate.toLocaleDateString(&apos;en-US&apos;, {
        year: &apos;numeric&apos;,
        month: &apos;long&apos;,
        day: &apos;numeric&apos;,
      }),
      age,
    };
  };

  const birthInfo = getBirthInfo();

  // Get years of service
  const getYearsOfService = () =&gt; {
    if (!representative.terms || representative.terms.length === 0) return 0;
    const firstTerm = representative.terms[0];
    if (!firstTerm || !firstTerm.startYear) return 0;
    return new Date().getFullYear() - parseInt(firstTerm.startYear);
  };

  const yearsOfService = getYearsOfService();

  // Create timeline from terms and leadership roles
  const createTimeline = () =&gt; {
    const timeline: TimelineItemProps[] = [];

    // Add terms
    if (representative.terms) {
      representative.terms.forEach(term =&gt; {
        timeline.push({
          date: `${term.startYear} - ${term.endYear}`,
          title: `${representative.chamber} Term`,
          description: `Congress ${term.congress}`,
          type: &apos;term&apos;,
        });
      });
    }

    // Add leadership roles
    if (representative.leadershipRoles) {
      representative.leadershipRoles.forEach(role =&gt; {
        timeline.push({
          date: `${role.start}${role.end ? ` - ${role.end}` : &apos; - Present&apos;}`,
          title: role.title,
          type: &apos;leadership&apos;,
        });
      });
    }

    // Sort by start date (most recent first)
    return timeline.sort((a, b) =&gt; {
      const dateAStr = a.date.split(&apos; - &apos;)[0];
      const dateBStr = b.date.split(&apos; - &apos;)[0];
      if (!dateAStr || !dateBStr) return 0;
      const dateA = new Date(dateAStr);
      const dateB = new Date(dateBStr);
      return dateB.getTime() - dateA.getTime();
    });
  };

  const timeline = createTimeline();

  return (
    &lt;div className={`space-y-6 ${className}`}&gt;
      {/* Quick Facts Grid */}
      &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4&quot;&gt;
        &lt;div className=&quot;bg-white p-4 rounded-lg border border-gray-200 shadow-sm&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
            &lt;Clock className=&quot;w-4 h-4 text-gray-500&quot; /&gt;
            &lt;span className=&quot;text-sm font-medium text-gray-600&quot;&gt;Years in Office&lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;text-2xl font-bold text-gray-900&quot;&gt;{yearsOfService}&lt;/div&gt;
          &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
            Since {representative.terms?.[0]?.startYear || &apos;N/A&apos;}
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div className=&quot;bg-white p-4 rounded-lg border border-gray-200 shadow-sm&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
            &lt;Users className=&quot;w-4 h-4 text-gray-500&quot; /&gt;
            &lt;span className=&quot;text-sm font-medium text-gray-600&quot;&gt;Committees&lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;text-2xl font-bold text-gray-900&quot;&gt;
            {representative.committees?.length || 0}
          &lt;/div&gt;
          &lt;div className=&quot;text-xs text-gray-500&quot;&gt;Current assignments&lt;/div&gt;
        &lt;/div&gt;

        {birthInfo &amp;&amp; (
          &lt;div className=&quot;bg-white p-4 rounded-lg border border-gray-200 shadow-sm&quot;&gt;
            &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
              &lt;Calendar className=&quot;w-4 h-4 text-gray-500&quot; /&gt;
              &lt;span className=&quot;text-sm font-medium text-gray-600&quot;&gt;Age&lt;/span&gt;
            &lt;/div&gt;
            &lt;div className=&quot;text-2xl font-bold text-gray-900&quot;&gt;{birthInfo.age}&lt;/div&gt;
            &lt;div className=&quot;text-xs text-gray-500&quot;&gt;Born {birthInfo.date}&lt;/div&gt;
          &lt;/div&gt;
        )}

        &lt;div className=&quot;bg-white p-4 rounded-lg border border-gray-200 shadow-sm&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
            &lt;MapPin className=&quot;w-4 h-4 text-gray-500&quot; /&gt;
            &lt;span className=&quot;text-sm font-medium text-gray-600&quot;&gt;Represents&lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;text-lg font-bold text-gray-900&quot;&gt;
            {representative.state}
            {representative.district &amp;&amp; representative.district !== &apos;AL&apos;
              ? `-${representative.district}`
              : &apos;&apos;}
          &lt;/div&gt;
          &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
            {representative.chamber === &apos;House&apos; ? &apos;House District&apos; : &apos;U.S. Senate&apos;}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Main Content Grid */}
      &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-2 gap-6&quot;&gt;
        {/* Personal Information */}
        &lt;InfoCard title=&quot;Personal Information&quot; icon={&lt;Home className=&quot;w-5 h-5&quot; /&gt;}&gt;
          &lt;div className=&quot;space-y-3&quot;&gt;
            {representative.fullName &amp;&amp; (
              &lt;div&gt;
                &lt;label className=&quot;text-sm font-medium text-gray-600&quot;&gt;Full Name&lt;/label&gt;
                &lt;div className=&quot;text-gray-900&quot;&gt;
                  {representative.fullName.first}{&apos; &apos;}
                  {representative.fullName.middle &amp;&amp; `${representative.fullName.middle} `}
                  {representative.fullName.last}
                  {representative.fullName.suffix &amp;&amp; `, ${representative.fullName.suffix}`}
                &lt;/div&gt;
                {representative.fullName.nickname &amp;&amp; (
                  &lt;div className=&quot;text-sm text-gray-600&quot;&gt;
                    Known as: {representative.fullName.nickname}
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            )}

            {representative.bio?.gender &amp;&amp; (
              &lt;div&gt;
                &lt;label className=&quot;text-sm font-medium text-gray-600&quot;&gt;Gender&lt;/label&gt;
                &lt;div className=&quot;text-gray-900&quot;&gt;
                  {representative.bio.gender === &apos;M&apos; ? &apos;Male&apos; : &apos;Female&apos;}
                &lt;/div&gt;
              &lt;/div&gt;
            )}

            {representative.bio?.religion &amp;&amp; (
              &lt;div&gt;
                &lt;label className=&quot;text-sm font-medium text-gray-600&quot;&gt;Religion&lt;/label&gt;
                &lt;div className=&quot;text-gray-900&quot;&gt;{representative.bio.religion}&lt;/div&gt;
              &lt;/div&gt;
            )}

            {representative.currentTerm?.stateRank &amp;&amp; representative.chamber === &apos;Senate&apos; &amp;&amp; (
              &lt;div&gt;
                &lt;label className=&quot;text-sm font-medium text-gray-600&quot;&gt;Senate Rank&lt;/label&gt;
                &lt;div className=&quot;text-gray-900 capitalize&quot;&gt;
                  {representative.currentTerm.stateRank} Senator
                &lt;/div&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/InfoCard&gt;

        {/* Current Term Information */}
        &lt;InfoCard title=&quot;Current Term&quot; icon={&lt;Briefcase className=&quot;w-5 h-5&quot; /&gt;}&gt;
          &lt;div className=&quot;space-y-3&quot;&gt;
            {representative.currentTerm?.start &amp;&amp; representative.currentTerm?.end &amp;&amp; (
              &lt;div&gt;
                &lt;label className=&quot;text-sm font-medium text-gray-600&quot;&gt;Term&lt;/label&gt;
                &lt;div className=&quot;text-gray-900&quot;&gt;
                  {new Date(representative.currentTerm.start).getFullYear()} -{&apos; &apos;}
                  {new Date(representative.currentTerm.end).getFullYear()}
                &lt;/div&gt;
              &lt;/div&gt;
            )}

            {representative.currentTerm?.office &amp;&amp; (
              &lt;div&gt;
                &lt;label className=&quot;text-sm font-medium text-gray-600&quot;&gt;Office&lt;/label&gt;
                &lt;div className=&quot;text-gray-900&quot;&gt;{representative.currentTerm.office}&lt;/div&gt;
              &lt;/div&gt;
            )}

            {representative.chamber === &apos;Senate&apos; &amp;&amp; representative.currentTerm?.class &amp;&amp; (
              &lt;div&gt;
                &lt;label className=&quot;text-sm font-medium text-gray-600&quot;&gt;Senate Class&lt;/label&gt;
                &lt;div className=&quot;text-gray-900&quot;&gt;Class {representative.currentTerm.class}&lt;/div&gt;
              &lt;/div&gt;
            )}

            {representative.currentTerm?.website &amp;&amp; (
              &lt;div&gt;
                &lt;label className=&quot;text-sm font-medium text-gray-600&quot;&gt;Official Website&lt;/label&gt;
                &lt;div&gt;
                  &lt;a
                    href={representative.currentTerm.website}
                    target=&quot;_blank&quot;
                    rel=&quot;noopener noreferrer&quot;
                    className=&quot;inline-flex items-center gap-1 text-blue-600 hover:text-blue-800&quot;
                  &gt;
                    Visit Website
                    &lt;ExternalLink className=&quot;w-3 h-3&quot; /&gt;
                  &lt;/a&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/InfoCard&gt;

        {/* Committee Memberships */}
        {representative.committees &amp;&amp; representative.committees.length &gt; 0 &amp;&amp; (
          &lt;InfoCard title=&quot;Committee Memberships&quot; icon={&lt;Users className=&quot;w-5 h-5&quot; /&gt;}&gt;
            &lt;div className=&quot;space-y-3&quot;&gt;
              {representative.committees.map((committee, index) =&gt; (
                &lt;div
                  key={index}
                  className=&quot;flex items-start justify-between p-3 bg-gray-50 rounded-lg&quot;
                &gt;
                  &lt;div className=&quot;flex-1&quot;&gt;
                    &lt;div className=&quot;font-medium text-gray-900&quot;&gt;{committee.name}&lt;/div&gt;
                    {committee.role &amp;&amp; (
                      &lt;div className=&quot;text-sm text-blue-600 font-medium&quot;&gt;{committee.role}&lt;/div&gt;
                    )}
                  &lt;/div&gt;
                &lt;/div&gt;
              ))}
            &lt;/div&gt;
          &lt;/InfoCard&gt;
        )}

        {/* Service Timeline */}
        {timeline.length &gt; 0 &amp;&amp; (
          &lt;InfoCard title=&quot;Service Timeline&quot; icon={&lt;Award className=&quot;w-5 h-5&quot; /&gt;}&gt;
            &lt;div className=&quot;space-y-3&quot;&gt;
              {timeline.slice(0, 6).map((item, index) =&gt; (
                &lt;TimelineItem key={index} {...item} /&gt;
              ))}
              {timeline.length &gt; 6 &amp;&amp; (
                &lt;div className=&quot;text-sm text-gray-500 text-center pt-2&quot;&gt;
                  And {timeline.length - 6} more entries...
                &lt;/div&gt;
              )}
            &lt;/div&gt;
          &lt;/InfoCard&gt;
        )}
      &lt;/div&gt;

      {/* Social Media Links */}
      {representative.socialMedia &amp;&amp; (
        &lt;InfoCard title=&quot;Connect Online&quot; icon={&lt;Heart className=&quot;w-5 h-5&quot; /&gt;}&gt;
          &lt;div className=&quot;flex flex-wrap gap-3&quot;&gt;
            {representative.socialMedia.twitter &amp;&amp; (
              &lt;a
                href={`https://twitter.com/${representative.socialMedia.twitter}`}
                target=&quot;_blank&quot;
                rel=&quot;noopener noreferrer&quot;
                className=&quot;inline-flex items-center gap-2 px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors&quot;
              &gt;
                &lt;span&gt;Twitter&lt;/span&gt;
                &lt;ExternalLink className=&quot;w-3 h-3&quot; /&gt;
              &lt;/a&gt;
            )}

            {representative.socialMedia.facebook &amp;&amp; (
              &lt;a
                href={`https://facebook.com/${representative.socialMedia.facebook}`}
                target=&quot;_blank&quot;
                rel=&quot;noopener noreferrer&quot;
                className=&quot;inline-flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors&quot;
              &gt;
                &lt;span&gt;Facebook&lt;/span&gt;
                &lt;ExternalLink className=&quot;w-3 h-3&quot; /&gt;
              &lt;/a&gt;
            )}

            {representative.socialMedia.youtube &amp;&amp; (
              &lt;a
                href={`https://youtube.com/${representative.socialMedia.youtube}`}
                target=&quot;_blank&quot;
                rel=&quot;noopener noreferrer&quot;
                className=&quot;inline-flex items-center gap-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors&quot;
              &gt;
                &lt;span&gt;YouTube&lt;/span&gt;
                &lt;ExternalLink className=&quot;w-3 h-3&quot; /&gt;
              &lt;/a&gt;
            )}

            {representative.socialMedia.instagram &amp;&amp; (
              &lt;a
                href={`https://instagram.com/${representative.socialMedia.instagram}`}
                target=&quot;_blank&quot;
                rel=&quot;noopener noreferrer&quot;
                className=&quot;inline-flex items-center gap-2 px-3 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-700 transition-colors&quot;
              &gt;
                &lt;span&gt;Instagram&lt;/span&gt;
                &lt;ExternalLink className=&quot;w-3 h-3&quot; /&gt;
              &lt;/a&gt;
            )}
          &lt;/div&gt;
        &lt;/InfoCard&gt;
      )}
    &lt;/div&gt;
  );
}

</file>
<file path="[bioguideId]/components/RepresentativeClient.tsx">
/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

&apos;use client&apos;;

import React, { useState } from &apos;react&apos;;
import dynamic from &apos;next/dynamic&apos;;
import { DataTransparencyPanel } from &apos;@/components/ui/DataTransparency&apos;;
import { EnhancedRepresentative } from &apos;@/types/representative&apos;;
import { EnhancedHeader } from &apos;./EnhancedHeader&apos;;
import { KeyStatsBar } from &apos;./KeyStatsBar&apos;;
import { TabNavigation, profileTabs } from &apos;./TabNavigation&apos;;
import { ProfileOverview } from &apos;./ProfileOverview&apos;;
import { DistrictSidebar } from &apos;./DistrictSidebar&apos;;
import { ContactInfoTab } from &apos;./ContactInfoTab&apos;;

// Dynamic imports with proper error boundaries for tab components
const VotingTab = dynamic(
  () =&gt; import(&apos;../tabs/VotingTab&apos;).then(mod =&gt; ({ default: mod.VotingTab })),
  {
    loading: () =&gt; &lt;div className=&quot;animate-pulse bg-gray-200 h-64 rounded&quot;&gt;&lt;/div&gt;,
    ssr: false,
  }
);

const BillsTab = dynamic(
  () =&gt; import(&apos;../tabs/BillsTab&apos;).then(mod =&gt; ({ default: mod.BillsTab })),
  {
    loading: () =&gt; &lt;div className=&quot;animate-pulse bg-gray-200 h-64 rounded&quot;&gt;&lt;/div&gt;,
    ssr: false,
  }
);

const FinanceTab = dynamic(
  () =&gt; import(&apos;../tabs/FinanceTab&apos;).then(mod =&gt; ({ default: mod.FinanceTab })),
  {
    loading: () =&gt; &lt;div className=&quot;animate-pulse bg-gray-200 h-64 rounded&quot;&gt;&lt;/div&gt;,
    ssr: false,
  }
);

interface RepresentativeClientProps {
  representative: EnhancedRepresentative;
  serverData?: {
    bills?: unknown[];
    votes?: unknown[];
    finance?: Record&lt;string, unknown&gt;;
    news?: unknown[];
  };
  partialErrors?: Record&lt;string, string&gt;;
}

export function RepresentativeClient({
  representative,
  serverData,
  partialErrors,
}: RepresentativeClientProps) {
  const [activeTab, setActiveTab] = useState(&apos;overview&apos;);

  // Calculate stats for the KeyStatsBar
  const calculateStats = () =&gt; {
    const billsCount = Array.isArray(serverData?.bills) ? serverData.bills.length : 0;
    const votesCount = Array.isArray(serverData?.votes) ? serverData.votes.length : 0;
    const committeesCount = representative.committees?.length || 0;

    // Calculate years in office
    const yearsInOffice = representative.terms?.length
      ? new Date().getFullYear() - parseInt(representative.terms[0]?.startYear || &apos;0&apos;)
      : 0;

    // Get campaign finance total if available
    const financeData = serverData?.finance as {
      totalRaised?: number;
      totalSpent?: number;
      cashOnHand?: number;
    };

    return {
      billsSponsored: billsCount,
      votesParticipated: votesCount,
      partyAlignment: 85, // Placeholder - would come from actual data
      totalRaised: financeData?.totalRaised || 0,
      yearsInOffice,
      committees: committeesCount,
    };
  };

  const stats = calculateStats();

  const renderTabContent = () =&gt; {
    switch (activeTab) {
      case &apos;overview&apos;:
        return &lt;ContactInfoTab representative={representative} /&gt;;

      case &apos;voting&apos;:
        return (
          &lt;VotingTab
            votes={
              (serverData?.votes as Array&lt;{
                id: string;
                date: string;
                bill?: { number: string; title: string; url?: string };
                question?: string;
                description: string;
                position: &apos;Yea&apos; | &apos;Nay&apos; | &apos;Present&apos; | &apos;Not Voting&apos;;
                result: &apos;Passed&apos; | &apos;Failed&apos; | &apos;Agreed to&apos; | &apos;Disagreed to&apos;;
                chamber: &apos;House&apos; | &apos;Senate&apos;;
                category?: string;
              }&gt;) || []
            }
          /&gt;
        );

      case &apos;legislation&apos;:
        return (
          &lt;BillsTab
            bills={
              (serverData?.bills as Array&lt;{
                id: string;
                number: string;
                title: string;
                introducedDate: string;
                status: string;
                lastAction: string;
                congress: number;
                type: string;
                policyArea: string;
                url?: string;
                committee?: string;
                progress?: number;
              }&gt;) || []
            }
          /&gt;
        );

      case &apos;finance&apos;:
        return (
          &lt;FinanceTab
            financeData={
              (serverData?.finance as {
                totalRaised: number;
                totalSpent: number;
                cashOnHand: number;
                donations: {
                  individual: number;
                  pac: number;
                  party: number;
                  candidate: number;
                };
                topContributors: Array&lt;{
                  name: string;
                  amount: number;
                  type: &apos;Individual&apos; | &apos;PAC&apos; | &apos;Party Committee&apos;;
                }&gt;;
                industryBreakdown: Array&lt;{
                  industry: string;
                  amount: number;
                  percentage: number;
                }&gt;;
                spendingCategories: Array&lt;{
                  category: string;
                  amount: number;
                  percentage: number;
                }&gt;;
              }) || {
                totalRaised: 0,
                totalSpent: 0,
                cashOnHand: 0,
                donations: { individual: 0, pac: 0, party: 0, candidate: 0 },
                topContributors: [],
                industryBreakdown: [],
                spendingCategories: [],
              }
            }
          /&gt;
        );

      case &apos;committees&apos;:
        return (
          &lt;div className=&quot;bg-white rounded-lg border border-gray-200 p-6&quot;&gt;
            &lt;h2 className=&quot;text-xl font-semibold mb-4&quot;&gt;Committee Information&lt;/h2&gt;
            {representative.committees &amp;&amp; representative.committees.length &gt; 0 ? (
              &lt;div className=&quot;space-y-4&quot;&gt;
                {representative.committees.map((committee, index) =&gt; (
                  &lt;div
                    key={index}
                    className=&quot;border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow&quot;
                  &gt;
                    &lt;div className=&quot;flex justify-between items-start&quot;&gt;
                      &lt;div&gt;
                        &lt;h3 className=&quot;font-semibold text-gray-900&quot;&gt;{committee.name}&lt;/h3&gt;
                        {committee.role &amp;&amp; (
                          &lt;span className=&quot;inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-800 text-sm font-medium rounded-full&quot;&gt;
                            {committee.role}
                          &lt;/span&gt;
                        )}
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                ))}
              &lt;/div&gt;
            ) : (
              &lt;p className=&quot;text-gray-500&quot;&gt;No committee information available.&lt;/p&gt;
            )}
          &lt;/div&gt;
        );

      case &apos;news&apos;:
        return (
          &lt;div className=&quot;bg-white rounded-lg border border-gray-200 p-6&quot;&gt;
            &lt;h2 className=&quot;text-xl font-semibold mb-4&quot;&gt;Recent News&lt;/h2&gt;
            &lt;p className=&quot;text-gray-500&quot;&gt;News integration coming soon...&lt;/p&gt;
          &lt;/div&gt;
        );

      default:
        return &lt;ProfileOverview representative={representative} /&gt;;
    }
  };

  return (
    &lt;div className=&quot;min-h-screen bg-gray-50&quot;&gt;
      {/* Enhanced Header */}
      &lt;EnhancedHeader representative={representative} /&gt;

      {/* Key Stats Bar */}
      &lt;KeyStatsBar stats={stats} /&gt;

      {/* Main Content Area */}
      &lt;div className=&quot;container mx-auto px-4 py-6&quot;&gt;
        {/* Error Display for Partial Failures */}
        {partialErrors &amp;&amp; Object.keys(partialErrors).length &gt; 0 &amp;&amp; (
          &lt;div className=&quot;bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6&quot;&gt;
            &lt;div className=&quot;flex&quot;&gt;
              &lt;div className=&quot;flex-shrink-0&quot;&gt;
                &lt;svg className=&quot;h-5 w-5 text-yellow-400&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
                  &lt;path
                    fillRule=&quot;evenodd&quot;
                    d=&quot;M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z&quot;
                    clipRule=&quot;evenodd&quot;
                  /&gt;
                &lt;/svg&gt;
              &lt;/div&gt;
              &lt;div className=&quot;ml-3&quot;&gt;
                &lt;h3 className=&quot;text-sm font-medium text-yellow-800&quot;&gt;
                  Some data could not be loaded
                &lt;/h3&gt;
                &lt;div className=&quot;mt-2 text-sm text-yellow-700&quot;&gt;
                  &lt;p&gt;The following information may be incomplete:&lt;/p&gt;
                  &lt;ul className=&quot;list-disc list-inside mt-1&quot;&gt;
                    {Object.entries(partialErrors).map(([key, error]) =&gt; (
                      &lt;li key={key} className=&quot;capitalize&quot;&gt;
                        {key.replace(&apos;-&apos;, &apos; &apos;)}:{&apos; &apos;}
                        {typeof error === &apos;string&apos; ? error : &apos;Failed to load&apos;}
                      &lt;/li&gt;
                    ))}
                  &lt;/ul&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        )}

        {/* Main Layout Grid */}
        &lt;div className=&quot;lg:grid lg:grid-cols-4 lg:gap-6&quot;&gt;
          {/* Main Content */}
          &lt;div className=&quot;lg:col-span-3&quot;&gt;
            {/* Tab Navigation */}
            &lt;div className=&quot;mb-6&quot;&gt;
              &lt;TabNavigation
                activeTab={activeTab}
                onTabChange={setActiveTab}
                tabs={profileTabs}
                size=&quot;md&quot;
              /&gt;
            &lt;/div&gt;

            {/* Tab Content */}
            &lt;div className=&quot;min-h-96&quot;&gt;{renderTabContent()}&lt;/div&gt;
          &lt;/div&gt;

          {/* Sidebar */}
          &lt;div className=&quot;lg:col-span-1 mt-6 lg:mt-0&quot;&gt;
            &lt;DistrictSidebar representative={representative} /&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Data Transparency */}
        &lt;div className=&quot;mt-8&quot;&gt;
          &lt;DataTransparencyPanel
            metadata={{
              source: &apos;congress-legislators + congress.gov&apos;,
              cached: true,
              fetchedAt: new Date().toISOString(),
              dataQuality: &apos;high&apos;,
              freshness: &apos;Current&apos;,
            }}
          /&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}

</file>
<file path="[bioguideId]/components/RepresentativeHeader.tsx">
/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

&apos;use client&apos;;

import React from &apos;react&apos;;
import RepresentativePhoto from &apos;@/features/representatives/components/RepresentativePhoto&apos;;
import { DataSourceBadge } from &apos;@/components/ui/DataTransparency&apos;;

interface RepresentativeHeaderProps {
  representative: {
    bioguideId: string;
    name: string;
    party: string;
    chamber: &apos;House&apos; | &apos;Senate&apos;;
    state: string;
    district?: string;
    title: string;
    currentTerm?: {
      start: string;
      end: string;
      contactForm?: string;
    };
    committees?: Array&lt;{
      name: string;
      role?: string;
    }&gt;;
    website?: string;
  };
  metrics?: {
    billsSponsored: number;
    partyVotingPercentage: number;
    attendancePercentage: number;
    profileCompleteness: number;
  };
}

export function RepresentativeHeader({ representative, metrics }: RepresentativeHeaderProps) {
  // Calculate party color for header stripe
  const getPartyColor = (party: string) =&gt; {
    switch (party?.toLowerCase()) {
      case &apos;republican&apos;:
      case &apos;r&apos;:
        return &apos;bg-red-600&apos;;
      case &apos;democrat&apos;:
      case &apos;democratic&apos;:
      case &apos;d&apos;:
        return &apos;bg-blue-600&apos;;
      default:
        return &apos;bg-gray-600&apos;;
    }
  };

  // Calculate party badge color
  const getPartyBadgeColor = (party: string) =&gt; {
    switch (party?.toLowerCase()) {
      case &apos;republican&apos;:
      case &apos;r&apos;:
        return &apos;bg-red-100 text-red-800 border-red-200&apos;;
      case &apos;democrat&apos;:
      case &apos;democratic&apos;:
      case &apos;d&apos;:
        return &apos;bg-blue-100 text-blue-800 border-blue-200&apos;;
      default:
        return &apos;bg-gray-100 text-gray-800 border-gray-200&apos;;
    }
  };

  // Format dates
  const formatDate = (dateString?: string) =&gt; {
    if (!dateString) return &apos;Unknown&apos;;
    return new Date(dateString).toLocaleDateString(&apos;en-US&apos;, {
      year: &apos;numeric&apos;,
      month: &apos;long&apos;,
      day: &apos;numeric&apos;,
    });
  };

  // Calculate years in office
  const getYearsInOffice = (startDate?: string) =&gt; {
    if (!startDate) return &apos;Unknown&apos;;
    const start = new Date(startDate);
    const now = new Date();
    const years = now.getFullYear() - start.getFullYear();
    return years &gt; 0 ? `${years} years` : &apos;Less than 1 year&apos;;
  };

  return (
    &lt;div className=&quot;bg-white rounded-lg shadow-sm overflow-hidden&quot;&gt;
      {/* Party Color Stripe */}
      &lt;div className={`h-2 ${getPartyColor(representative.party)}`} /&gt;

      &lt;div className=&quot;p-6&quot;&gt;
        {/* Main Representative Info */}
        &lt;div className=&quot;flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6 mb-6&quot;&gt;
          &lt;div className=&quot;flex items-start gap-6&quot;&gt;
            {/* Photo */}
            &lt;div className=&quot;flex-shrink-0&quot;&gt;
              &lt;RepresentativePhoto
                bioguideId={representative.bioguideId}
                name={representative.name}
                size=&quot;xl&quot;
                className=&quot;rounded-lg&quot;
              /&gt;
            &lt;/div&gt;

            {/* Name and Basic Info */}
            &lt;div className=&quot;flex-1&quot;&gt;
              &lt;h1 className=&quot;text-3xl font-bold text-gray-900 mb-2&quot;&gt;{representative.name}&lt;/h1&gt;

              &lt;div className=&quot;flex flex-wrap items-center gap-3 mb-4&quot;&gt;
                &lt;span
                  className={`px-3 py-1 rounded-full text-sm font-medium border ${getPartyBadgeColor(representative.party)}`}
                &gt;
                  {representative.party}
                &lt;/span&gt;
                &lt;span className=&quot;text-gray-600&quot;&gt;{representative.title}&lt;/span&gt;
                &lt;span className=&quot;text-gray-600&quot;&gt;
                  {representative.state}
                  {representative.district ? `-${representative.district}` : &apos;&apos;}
                &lt;/span&gt;
              &lt;/div&gt;

              {/* Contact Links */}
              &lt;div className=&quot;flex flex-wrap gap-3&quot;&gt;
                {representative.website &amp;&amp; (
                  &lt;a
                    href={representative.website}
                    target=&quot;_blank&quot;
                    rel=&quot;noopener noreferrer&quot;
                    className=&quot;text-blue-600 hover:text-blue-800 text-sm font-medium&quot;
                  &gt;
                    Official Website
                  &lt;/a&gt;
                )}
                {representative.currentTerm?.contactForm &amp;&amp; (
                  &lt;a
                    href={representative.currentTerm.contactForm}
                    target=&quot;_blank&quot;
                    rel=&quot;noopener noreferrer&quot;
                    className=&quot;text-blue-600 hover:text-blue-800 text-sm font-medium&quot;
                  &gt;
                    Contact Form
                  &lt;/a&gt;
                )}
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;

          {/* Term Information */}
          &lt;div className=&quot;flex-shrink-0 text-right&quot;&gt;
            &lt;div className=&quot;space-y-2 text-sm&quot;&gt;
              &lt;div&gt;
                &lt;span className=&quot;text-gray-600&quot;&gt;In office since: &lt;/span&gt;
                &lt;span className=&quot;font-medium&quot;&gt;
                  {getYearsInOffice(representative.currentTerm?.start)}
                &lt;/span&gt;
              &lt;/div&gt;
              &lt;div&gt;
                &lt;span className=&quot;text-gray-600&quot;&gt;Term ends: &lt;/span&gt;
                &lt;span className=&quot;font-medium&quot;&gt;{formatDate(representative.currentTerm?.end)}&lt;/span&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Key Metrics */}
        &lt;div className=&quot;grid grid-cols-2 lg:grid-cols-4 gap-6 mb-6&quot;&gt;
          &lt;div className=&quot;text-center&quot;&gt;
            &lt;div className=&quot;text-2xl font-bold text-gray-900&quot;&gt;
              {representative.committees?.length || 0}
            &lt;/div&gt;
            &lt;div className=&quot;text-sm text-gray-600&quot;&gt;Committees&lt;/div&gt;
          &lt;/div&gt;
          &lt;div className=&quot;text-center&quot;&gt;
            &lt;div className=&quot;text-2xl font-bold text-gray-900&quot;&gt;{metrics?.billsSponsored || 0}&lt;/div&gt;
            &lt;div className=&quot;text-sm text-gray-600&quot;&gt;Bills Sponsored&lt;/div&gt;
          &lt;/div&gt;
          &lt;div className=&quot;text-center&quot;&gt;
            &lt;div className=&quot;text-2xl font-bold text-gray-900&quot;&gt;
              {metrics?.partyVotingPercentage || 0}%
            &lt;/div&gt;
            &lt;div className=&quot;text-sm text-gray-600&quot;&gt;Party Voting&lt;/div&gt;
          &lt;/div&gt;
          &lt;div className=&quot;text-center&quot;&gt;
            &lt;div className=&quot;text-2xl font-bold text-gray-900&quot;&gt;
              {metrics?.attendancePercentage || 0}%
            &lt;/div&gt;
            &lt;div className=&quot;text-sm text-gray-600&quot;&gt;Attendance&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Profile Completeness */}
        &lt;div className=&quot;mb-4&quot;&gt;
          &lt;div className=&quot;flex justify-between items-center mb-2&quot;&gt;
            &lt;span className=&quot;text-sm font-medium text-gray-700&quot;&gt;Profile Completeness&lt;/span&gt;
            &lt;span className=&quot;text-sm text-gray-600&quot;&gt;{metrics?.profileCompleteness || 85}%&lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;w-full bg-gray-200 rounded-full h-2&quot;&gt;
            &lt;div
              className=&quot;bg-green-600 h-2 rounded-full transition-all duration-300&quot;
              style={{ width: `${metrics?.profileCompleteness || 85}%` }}
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Data Source Attribution */}
        &lt;div className=&quot;pt-4 border-t border-gray-100&quot;&gt;
          &lt;div className=&quot;flex items-center justify-between&quot;&gt;
            &lt;div className=&quot;text-xs text-gray-500&quot;&gt;Data Sources&lt;/div&gt;
            &lt;div className=&quot;flex gap-2&quot;&gt;
              &lt;DataSourceBadge source=&quot;congress-legislators&quot; size=&quot;sm&quot; /&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}

</file>
<file path="[bioguideId]/components/RepresentativeSidebar.tsx">
/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

&apos;use client&apos;;

import React from &apos;react&apos;;
import Link from &apos;next/link&apos;;
import { MapPin, Users, ExternalLink, Newspaper, CheckCircle } from &apos;lucide-react&apos;;
import { DataSourceBadge } from &apos;@/components/ui/DataTransparency&apos;;

interface RepresentativeSidebarProps {
  representative: {
    bioguideId: string;
    name: string;
    state: string;
    district?: string;
    chamber: &apos;House&apos; | &apos;Senate&apos;;
    party: string;
  };
  dataCompleteness?: number;
  newsArticles?: Array&lt;{
    title: string;
    url: string;
    source: string;
    publishedAt: string;
  }&gt;;
}

export function RepresentativeSidebar({
  representative,
  dataCompleteness = 93,
  newsArticles = [],
}: RepresentativeSidebarProps) {
  const getStateFullName = (stateCode: string): string =&gt; {
    const stateNames: Record&lt;string, string&gt; = {
      AL: &apos;Alabama&apos;,
      AK: &apos;Alaska&apos;,
      AZ: &apos;Arizona&apos;,
      AR: &apos;Arkansas&apos;,
      CA: &apos;California&apos;,
      CO: &apos;Colorado&apos;,
      CT: &apos;Connecticut&apos;,
      DE: &apos;Delaware&apos;,
      FL: &apos;Florida&apos;,
      GA: &apos;Georgia&apos;,
      HI: &apos;Hawaii&apos;,
      ID: &apos;Idaho&apos;,
      IL: &apos;Illinois&apos;,
      IN: &apos;Indiana&apos;,
      IA: &apos;Iowa&apos;,
      KS: &apos;Kansas&apos;,
      KY: &apos;Kentucky&apos;,
      LA: &apos;Louisiana&apos;,
      ME: &apos;Maine&apos;,
      MD: &apos;Maryland&apos;,
      MA: &apos;Massachusetts&apos;,
      MI: &apos;Michigan&apos;,
      MN: &apos;Minnesota&apos;,
      MS: &apos;Mississippi&apos;,
      MO: &apos;Missouri&apos;,
      MT: &apos;Montana&apos;,
      NE: &apos;Nebraska&apos;,
      NV: &apos;Nevada&apos;,
      NH: &apos;New Hampshire&apos;,
      NJ: &apos;New Jersey&apos;,
      NM: &apos;New Mexico&apos;,
      NY: &apos;New York&apos;,
      NC: &apos;North Carolina&apos;,
      ND: &apos;North Dakota&apos;,
      OH: &apos;Ohio&apos;,
      OK: &apos;Oklahoma&apos;,
      OR: &apos;Oregon&apos;,
      PA: &apos;Pennsylvania&apos;,
      RI: &apos;Rhode Island&apos;,
      SC: &apos;South Carolina&apos;,
      SD: &apos;South Dakota&apos;,
      TN: &apos;Tennessee&apos;,
      TX: &apos;Texas&apos;,
      UT: &apos;Utah&apos;,
      VT: &apos;Vermont&apos;,
      VA: &apos;Virginia&apos;,
      WA: &apos;Washington&apos;,
      WV: &apos;West Virginia&apos;,
      WI: &apos;Wisconsin&apos;,
      WY: &apos;Wyoming&apos;,
      DC: &apos;District of Columbia&apos;,
    };
    return stateNames[stateCode] || stateCode;
  };

  const formatTimeAgo = (dateString: string) =&gt; {
    const date = new Date(dateString);
    const now = new Date();
    const diffTime = Math.abs(now.getTime() - date.getTime());
    const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));

    if (diffDays === 0) return &apos;Today&apos;;
    if (diffDays === 1) return &apos;Yesterday&apos;;
    if (diffDays &lt; 7) return `${diffDays} days ago`;
    if (diffDays &lt; 30) return `${Math.floor(diffDays / 7)} weeks ago`;
    return `${Math.floor(diffDays / 30)} months ago`;
  };

  return (
    &lt;div className=&quot;space-y-6&quot;&gt;
      {/* Federal Level Section */}
      &lt;div className=&quot;bg-white rounded-lg border border-gray-200 p-6&quot;&gt;
        &lt;h3 className=&quot;text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2&quot;&gt;
          &lt;CheckCircle className=&quot;h-5 w-5 text-blue-500&quot; /&gt;
          Federal Level
        &lt;/h3&gt;

        &lt;div className=&quot;space-y-3&quot;&gt;
          &lt;div className=&quot;flex justify-between items-center&quot;&gt;
            &lt;span className=&quot;text-sm text-gray-600&quot;&gt;Chamber:&lt;/span&gt;
            &lt;span className=&quot;text-sm font-medium text-gray-900&quot;&gt;{representative.chamber}&lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex justify-between items-center&quot;&gt;
            &lt;span className=&quot;text-sm text-gray-600&quot;&gt;Party:&lt;/span&gt;
            &lt;span className=&quot;text-sm font-medium text-gray-900&quot;&gt;{representative.party}&lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex justify-between items-center&quot;&gt;
            &lt;span className=&quot;text-sm text-gray-600&quot;&gt;Bioguide ID:&lt;/span&gt;
            &lt;span className=&quot;text-sm font-mono text-gray-900&quot;&gt;{representative.bioguideId}&lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* District Information */}
      &lt;div className=&quot;bg-white rounded-lg border border-gray-200 p-6&quot;&gt;
        &lt;h3 className=&quot;text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2&quot;&gt;
          &lt;MapPin className=&quot;h-5 w-5 text-green-500&quot; /&gt;
          District Information
        &lt;/h3&gt;

        &lt;div className=&quot;space-y-3&quot;&gt;
          &lt;div className=&quot;text-center&quot;&gt;
            &lt;div className=&quot;text-3xl font-bold text-gray-900 mb-1&quot;&gt;{representative.state}&lt;/div&gt;
            &lt;div className=&quot;text-sm text-gray-600&quot;&gt;{getStateFullName(representative.state)}&lt;/div&gt;
            {representative.district &amp;&amp; (
              &lt;div className=&quot;text-lg font-medium text-gray-700 mt-2&quot;&gt;
                District {representative.district}
              &lt;/div&gt;
            )}
          &lt;/div&gt;

          &lt;div className=&quot;pt-3 border-t border-gray-100&quot;&gt;
            &lt;Link
              href={`/districts/${representative.state}${representative.district ? `-${representative.district}` : &apos;&apos;}`}
              className=&quot;text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center gap-1&quot;
            &gt;
              View District Details
              &lt;ExternalLink className=&quot;h-3 w-3&quot; /&gt;
            &lt;/Link&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Data Completeness */}
      &lt;div className=&quot;bg-white rounded-lg border border-gray-200 p-6&quot;&gt;
        &lt;h3 className=&quot;text-lg font-semibold text-gray-900 mb-4&quot;&gt;Data Completeness&lt;/h3&gt;

        &lt;div className=&quot;space-y-3&quot;&gt;
          &lt;div className=&quot;flex justify-between items-center&quot;&gt;
            &lt;span className=&quot;text-sm text-gray-600&quot;&gt;Profile Information&lt;/span&gt;
            &lt;span className=&quot;text-sm font-medium text-gray-900&quot;&gt;{dataCompleteness}%&lt;/span&gt;
          &lt;/div&gt;

          &lt;div className=&quot;w-full bg-gray-200 rounded-full h-3&quot;&gt;
            &lt;div
              className=&quot;bg-green-600 h-3 rounded-full transition-all duration-300&quot;
              style={{ width: `${dataCompleteness}%` }}
            /&gt;
          &lt;/div&gt;

          &lt;div className=&quot;text-xs text-gray-500&quot;&gt;Based on available official government data&lt;/div&gt;
        &lt;/div&gt;

        {/* Data Sources */}
        &lt;div className=&quot;mt-4 pt-4 border-t border-gray-100&quot;&gt;
          &lt;div className=&quot;text-sm font-medium text-gray-700 mb-2&quot;&gt;Data Sources&lt;/div&gt;
          &lt;div className=&quot;space-y-2&quot;&gt;
            &lt;DataSourceBadge source=&quot;congress-legislators&quot; size=&quot;sm&quot; /&gt;
            &lt;DataSourceBadge source=&quot;congress.gov&quot; size=&quot;sm&quot; /&gt;
            &lt;DataSourceBadge source=&quot;fec.gov&quot; size=&quot;sm&quot; /&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Compare Representatives */}
      &lt;div className=&quot;bg-white rounded-lg border border-gray-200 p-6&quot;&gt;
        &lt;h3 className=&quot;text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2&quot;&gt;
          &lt;Users className=&quot;h-5 w-5 text-purple-500&quot; /&gt;
          Compare Representatives
        &lt;/h3&gt;

        &lt;div className=&quot;space-y-3&quot;&gt;
          &lt;Link
            href={`/compare?reps=${representative.bioguideId}`}
            className=&quot;block w-full px-4 py-2 bg-blue-600 text-white text-center rounded-md hover:bg-blue-700 transition-colors&quot;
          &gt;
            Start Comparison
          &lt;/Link&gt;

          &lt;div className=&quot;text-xs text-gray-500 text-center&quot;&gt;
            Compare voting records, bills, and campaign finance
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Recent News */}
      {newsArticles.length &gt; 0 &amp;&amp; (
        &lt;div className=&quot;bg-white rounded-lg border border-gray-200 p-6&quot;&gt;
          &lt;h3 className=&quot;text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2&quot;&gt;
            &lt;Newspaper className=&quot;h-5 w-5 text-orange-500&quot; /&gt;
            Recent News
          &lt;/h3&gt;

          &lt;div className=&quot;space-y-4&quot;&gt;
            {newsArticles.slice(0, 3).map((article, index) =&gt; (
              &lt;div key={index} className=&quot;border-b border-gray-100 last:border-b-0 pb-3 last:pb-0&quot;&gt;
                &lt;a
                  href={article.url}
                  target=&quot;_blank&quot;
                  rel=&quot;noopener noreferrer&quot;
                  className=&quot;block hover:bg-gray-50 -mx-2 px-2 py-2 rounded&quot;
                &gt;
                  &lt;h4 className=&quot;text-sm font-medium text-gray-900 line-clamp-2 mb-1&quot;&gt;
                    {article.title}
                  &lt;/h4&gt;
                  &lt;div className=&quot;flex justify-between items-center text-xs text-gray-500&quot;&gt;
                    &lt;span&gt;{article.source}&lt;/span&gt;
                    &lt;span&gt;{formatTimeAgo(article.publishedAt)}&lt;/span&gt;
                  &lt;/div&gt;
                &lt;/a&gt;
              &lt;/div&gt;
            ))}

            {newsArticles.length &gt; 3 &amp;&amp; (
              &lt;div className=&quot;pt-3 border-t border-gray-100&quot;&gt;
                &lt;Link
                  href={`/representative/${representative.bioguideId}/news`}
                  className=&quot;text-blue-600 hover:text-blue-800 text-sm font-medium&quot;
                &gt;
                  View all news ({newsArticles.length})
                &lt;/Link&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;
      )}

      {/* Quick Actions */}
      &lt;div className=&quot;bg-white rounded-lg border border-gray-200 p-6&quot;&gt;
        &lt;h3 className=&quot;text-lg font-semibold text-gray-900 mb-4&quot;&gt;Quick Actions&lt;/h3&gt;

        &lt;div className=&quot;space-y-2&quot;&gt;
          &lt;Link
            href={`/representative/${representative.bioguideId}/contact`}
            className=&quot;block w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 rounded&quot;
          &gt;
            Contact Information
          &lt;/Link&gt;
          &lt;Link
            href={`/representative/${representative.bioguideId}/committees`}
            className=&quot;block w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 rounded&quot;
          &gt;
            Committee Assignments
          &lt;/Link&gt;
          &lt;Link
            href={`/representative/${representative.bioguideId}/votes`}
            className=&quot;block w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 rounded&quot;
          &gt;
            Full Voting Record
          &lt;/Link&gt;
          &lt;Link
            href={`/representative/${representative.bioguideId}/bills`}
            className=&quot;block w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 rounded&quot;
          &gt;
            All Sponsored Bills
          &lt;/Link&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}

</file>
<file path="[bioguideId]/components/ServiceTermsCard.tsx">
/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

&apos;use client&apos;;

import React from &apos;react&apos;;
import { Calendar } from &apos;lucide-react&apos;;
import { EnhancedRepresentative } from &apos;@/types/representative&apos;;

interface ServiceTermsCardProps {
  representative: EnhancedRepresentative;
  className?: string;
}

export function ServiceTermsCard({ representative, className = &apos;&apos; }: ServiceTermsCardProps) {
  // Sort terms by congress number (most recent first)
  const sortedTerms = representative.terms
    ? [...representative.terms].sort((a, b) =&gt; parseInt(b.congress) - parseInt(a.congress))
    : [];

  return (
    &lt;div className={`bg-white rounded-lg border border-gray-200 shadow-sm ${className}`}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-100&quot;&gt;
        &lt;div className=&quot;flex items-center gap-2&quot;&gt;
          &lt;Calendar className=&quot;w-5 h-5 text-gray-500&quot; /&gt;
          &lt;h3 className=&quot;font-semibold text-gray-900&quot;&gt;Service Terms&lt;/h3&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div className=&quot;p-4&quot;&gt;
        {sortedTerms.length &gt; 0 ? (
          &lt;div className=&quot;space-y-3&quot;&gt;
            {sortedTerms.map((term, index) =&gt; (
              &lt;div
                key={index}
                className=&quot;flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0&quot;
              &gt;
                &lt;div&gt;
                  &lt;div className=&quot;font-medium text-gray-900&quot;&gt;Congress {term.congress}&lt;/div&gt;
                  &lt;div className=&quot;text-sm text-gray-600&quot;&gt;
                    {term.startYear} - {term.endYear}
                  &lt;/div&gt;
                &lt;/div&gt;
                &lt;div className=&quot;text-right&quot;&gt;
                  &lt;div className=&quot;text-sm text-blue-600 font-medium&quot;&gt;{representative.chamber}&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            ))}

            {/* Timeline visualization */}
            &lt;div className=&quot;mt-4 pt-4 border-t border-gray-100&quot;&gt;
              &lt;div className=&quot;text-sm text-gray-600 mb-2&quot;&gt;Service Timeline&lt;/div&gt;
              &lt;div className=&quot;relative&quot;&gt;
                &lt;div className=&quot;absolute left-2 top-0 bottom-0 w-0.5 bg-blue-200&quot;&gt;&lt;/div&gt;
                {sortedTerms.slice(0, 3).map((term, index) =&gt; (
                  &lt;div key={index} className=&quot;relative flex items-center mb-2 last:mb-0&quot;&gt;
                    &lt;div className=&quot;w-4 h-4 bg-blue-500 rounded-full border-2 border-white shadow-sm&quot;&gt;&lt;/div&gt;
                    &lt;div className=&quot;ml-3 text-sm&quot;&gt;
                      &lt;span className=&quot;font-medium&quot;&gt;{term.startYear}&lt;/span&gt;
                      &lt;span className=&quot;text-gray-500 ml-1&quot;&gt;Congress {term.congress}&lt;/span&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                ))}
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        ) : (
          &lt;div className=&quot;text-center py-4&quot;&gt;
            &lt;p className=&quot;text-gray-500&quot;&gt;No term information available&lt;/p&gt;
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    &lt;/div&gt;
  );
}

</file>
<file path="[bioguideId]/components/TabNavigation.tsx">
/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

&apos;use client&apos;;

import React from &apos;react&apos;;
import { User, BarChart3, FileText, DollarSign, Newspaper, Users, Clock } from &apos;lucide-react&apos;;

export interface TabItem {
  id: string;
  label: string;
  icon: React.ReactNode;
  badge?: string | number;
  description?: string;
}

interface TabNavigationProps {
  activeTab: string;
  onTabChange: (tabId: string) =&gt; void;
  tabs: TabItem[];
  variant?: &apos;pills&apos; | &apos;underline&apos;;
  size?: &apos;sm&apos; | &apos;md&apos; | &apos;lg&apos;;
  className?: string;
}

const defaultTabs: TabItem[] = [
  {
    id: &apos;profile&apos;,
    label: &apos;Profile&apos;,
    icon: &lt;User className=&quot;w-4 h-4&quot; /&gt;,
    description: &apos;Biography and background information&apos;,
  },
  {
    id: &apos;voting&apos;,
    label: &apos;Voting&apos;,
    icon: &lt;BarChart3 className=&quot;w-4 h-4&quot; /&gt;,
    description: &apos;Voting records and positions&apos;,
  },
  {
    id: &apos;bills&apos;,
    label: &apos;Bills&apos;,
    icon: &lt;FileText className=&quot;w-4 h-4&quot; /&gt;,
    description: &apos;Sponsored and co-sponsored legislation&apos;,
  },
  {
    id: &apos;finance&apos;,
    label: &apos;Finance&apos;,
    icon: &lt;DollarSign className=&quot;w-4 h-4&quot; /&gt;,
    description: &apos;Campaign finance and fundraising&apos;,
  },
  {
    id: &apos;news&apos;,
    label: &apos;News&apos;,
    icon: &lt;Newspaper className=&quot;w-4 h-4&quot; /&gt;,
    description: &apos;Recent news and press coverage&apos;,
  },
  {
    id: &apos;relationships&apos;,
    label: &apos;Relationships&apos;,
    icon: &lt;Users className=&quot;w-4 h-4&quot; /&gt;,
    description: &apos;Committees and professional connections&apos;,
  },
];

export function TabNavigation({
  activeTab,
  onTabChange,
  tabs = defaultTabs,
  variant = &apos;underline&apos;,
  size = &apos;md&apos;,
  className = &apos;&apos;,
}: TabNavigationProps) {
  const sizeClasses = {
    sm: &apos;px-3 py-2 text-sm&apos;,
    md: &apos;px-4 py-3 text-sm&apos;,
    lg: &apos;px-6 py-4 text-base&apos;,
  };

  const iconSizes = {
    sm: &apos;w-3 h-3&apos;,
    md: &apos;w-4 h-4&apos;,
    lg: &apos;w-5 h-5&apos;,
  };

  if (variant === &apos;pills&apos;) {
    return (
      &lt;div className={`bg-white rounded-lg shadow-sm border border-gray-200 p-2 ${className}`}&gt;
        &lt;nav className=&quot;flex flex-wrap gap-1&quot;&gt;
          {tabs.map(tab =&gt; (
            &lt;button
              key={tab.id}
              onClick={() =&gt; onTabChange(tab.id)}
              className={`
                inline-flex items-center gap-2 ${sizeClasses[size]} rounded-lg font-medium transition-all duration-200
                ${
                  activeTab === tab.id
                    ? &apos;bg-blue-600 text-white shadow-sm&apos;
                    : &apos;text-gray-600 hover:text-gray-900 hover:bg-gray-50&apos;
                }
              `}
              title={tab.description}
            &gt;
              &lt;span className={iconSizes[size]}&gt;{tab.icon}&lt;/span&gt;
              &lt;span&gt;{tab.label}&lt;/span&gt;
              {tab.badge &amp;&amp; (
                &lt;span
                  className={`
                    inline-flex items-center justify-center min-w-5 h-5 text-xs font-medium rounded-full
                    ${activeTab === tab.id ? &apos;bg-blue-500 text-white&apos; : &apos;bg-gray-200 text-gray-700&apos;}
                  `}
                &gt;
                  {tab.badge}
                &lt;/span&gt;
              )}
            &lt;/button&gt;
          ))}
        &lt;/nav&gt;
      &lt;/div&gt;
    );
  }

  // Underline variant (default)
  return (
    &lt;div className={`bg-white border-b border-gray-200 ${className}`}&gt;
      &lt;nav className=&quot;flex overflow-x-auto&quot;&gt;
        {tabs.map(tab =&gt; (
          &lt;button
            key={tab.id}
            onClick={() =&gt; onTabChange(tab.id)}
            className={`
              inline-flex items-center gap-2 ${sizeClasses[size]} font-medium border-b-2 transition-all duration-200 whitespace-nowrap
              ${
                activeTab === tab.id
                  ? &apos;border-blue-600 text-blue-600&apos;
                  : &apos;border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300&apos;
              }
            `}
            title={tab.description}
          &gt;
            &lt;span className={iconSizes[size]}&gt;{tab.icon}&lt;/span&gt;
            &lt;span&gt;{tab.label}&lt;/span&gt;
            {tab.badge &amp;&amp; (
              &lt;span
                className={`
                  inline-flex items-center justify-center min-w-5 h-5 text-xs font-medium rounded-full
                  ${
                    activeTab === tab.id ? &apos;bg-blue-100 text-blue-800&apos; : &apos;bg-gray-100 text-gray-600&apos;
                  }
                `}
              &gt;
                {tab.badge}
              &lt;/span&gt;
            )}
          &lt;/button&gt;
        ))}
      &lt;/nav&gt;
    &lt;/div&gt;
  );
}

// Extended navigation with additional tab types for different sections
export interface ExtendedTabItem extends TabItem {
  isNew?: boolean;
  isUpdated?: boolean;
  lastUpdated?: string;
}

interface ExtendedTabNavigationProps extends Omit&lt;TabNavigationProps, &apos;tabs&apos;&gt; {
  tabs: ExtendedTabItem[];
  showLastUpdated?: boolean;
}

export function ExtendedTabNavigation({
  activeTab,
  onTabChange,
  tabs,
  variant: _variant = &apos;underline&apos;,
  size = &apos;md&apos;,
  className = &apos;&apos;,
  showLastUpdated = false,
}: ExtendedTabNavigationProps) {
  const sizeClasses = {
    sm: &apos;px-3 py-2 text-sm&apos;,
    md: &apos;px-4 py-3 text-sm&apos;,
    lg: &apos;px-6 py-4 text-base&apos;,
  };

  const iconSizes = {
    sm: &apos;w-3 h-3&apos;,
    md: &apos;w-4 h-4&apos;,
    lg: &apos;w-5 h-5&apos;,
  };

  return (
    &lt;div className={`bg-white border-b border-gray-200 ${className}`}&gt;
      &lt;nav className=&quot;flex overflow-x-auto&quot;&gt;
        {tabs.map(tab =&gt; (
          &lt;div key={tab.id} className=&quot;relative&quot;&gt;
            &lt;button
              onClick={() =&gt; onTabChange(tab.id)}
              className={`
                inline-flex items-center gap-2 ${sizeClasses[size]} font-medium border-b-2 transition-all duration-200 whitespace-nowrap relative
                ${
                  activeTab === tab.id
                    ? &apos;border-blue-600 text-blue-600&apos;
                    : &apos;border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300&apos;
                }
              `}
              title={tab.description}
            &gt;
              &lt;span className={iconSizes[size]}&gt;{tab.icon}&lt;/span&gt;
              &lt;div className=&quot;flex flex-col items-start&quot;&gt;
                &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;span&gt;{tab.label}&lt;/span&gt;
                  {tab.badge &amp;&amp; (
                    &lt;span
                      className={`
                        inline-flex items-center justify-center min-w-5 h-5 text-xs font-medium rounded-full
                        ${
                          activeTab === tab.id
                            ? &apos;bg-blue-100 text-blue-800&apos;
                            : &apos;bg-gray-100 text-gray-600&apos;
                        }
                      `}
                    &gt;
                      {tab.badge}
                    &lt;/span&gt;
                  )}
                  {tab.isNew &amp;&amp; (
                    &lt;span className=&quot;inline-flex items-center px-1.5 py-0.5 text-xs font-medium bg-green-100 text-green-800 rounded&quot;&gt;
                      New
                    &lt;/span&gt;
                  )}
                  {tab.isUpdated &amp;&amp; (
                    &lt;span className=&quot;inline-flex items-center px-1.5 py-0.5 text-xs font-medium bg-orange-100 text-orange-800 rounded&quot;&gt;
                      Updated
                    &lt;/span&gt;
                  )}
                &lt;/div&gt;
                {showLastUpdated &amp;&amp; tab.lastUpdated &amp;&amp; (
                  &lt;div className=&quot;flex items-center gap-1 text-xs text-gray-400 mt-0.5&quot;&gt;
                    &lt;Clock className=&quot;w-3 h-3&quot; /&gt;
                    &lt;span&gt;{tab.lastUpdated}&lt;/span&gt;
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            &lt;/button&gt;
          &lt;/div&gt;
        ))}
      &lt;/nav&gt;
    &lt;/div&gt;
  );
}

// Preset tab configurations for different page types
export const profileTabs: TabItem[] = [
  {
    id: &apos;overview&apos;,
    label: &apos;Contact Information&apos;,
    icon: &lt;User className=&quot;w-4 h-4&quot; /&gt;,
    description: &apos;Contact details and personal information&apos;,
  },
  {
    id: &apos;voting&apos;,
    label: &apos;Voting Records&apos;,
    icon: &lt;BarChart3 className=&quot;w-4 h-4&quot; /&gt;,
    description: &apos;Voting history and positions&apos;,
  },
  {
    id: &apos;legislation&apos;,
    label: &apos;Sponsored Bills&apos;,
    icon: &lt;FileText className=&quot;w-4 h-4&quot; /&gt;,
    description: &apos;Bills sponsored and co-sponsored&apos;,
  },
  {
    id: &apos;finance&apos;,
    label: &apos;Campaign Finance&apos;,
    icon: &lt;DollarSign className=&quot;w-4 h-4&quot; /&gt;,
    description: &apos;Fundraising and expenditures&apos;,
  },
  {
    id: &apos;news&apos;,
    label: &apos;Recent News&apos;,
    icon: &lt;Newspaper className=&quot;w-4 h-4&quot; /&gt;,
    description: &apos;Recent media coverage&apos;,
  },
];

export { defaultTabs };

</file>
<file path="[bioguideId]/DataFetchingWrappers.tsx">
&apos;use client&apos;;

/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

import useSWR from &apos;swr&apos;;
import logger from &apos;@/lib/logging/simple-logger&apos;;

// Import proper types for component props
interface CampaignFinanceData {
  financial_summary: Array&lt;{
    cycle: number;
    total_receipts: number;
    total_disbursements: number;
    cash_on_hand_end_period: number;
    individual_contributions: number;
    pac_contributions: number;
    party_contributions: number;
    candidate_contributions: number;
  }&gt;;
  recent_contributions: Array&lt;{
    contributor_name: string;
    contributor_employer?: string;
    contribution_receipt_amount: number;
    contribution_receipt_date: string;
  }&gt;;
  recent_expenditures: Array&lt;{
    recipient_name: string;
    disbursement_description: string;
    disbursement_amount: number;
    disbursement_date: string;
  }&gt;;
}

interface SponsoredBill {
  billId: string;
  number: string;
  title: string;
  congress: string;
  introducedDate: string;
  latestAction: {
    date: string;
    text: string;
  };
  type: string;
  chamber: &apos;House&apos; | &apos;Senate&apos;;
  status: string;
  policyArea?: string;
  cosponsors?: number;
  sponsorshipType?: &apos;sponsored&apos; | &apos;cosponsored&apos;;
  committees?: string[];
  subjects?: string[];
  url?: string;
}

// API Response types that match actual API responses
interface FinanceApiResponse {
  candidate_info?: unknown;
  financial_summary?: CampaignFinanceData[&apos;financial_summary&apos;];
  recent_contributions?: CampaignFinanceData[&apos;recent_contributions&apos;];
  recent_expenditures?: CampaignFinanceData[&apos;recent_expenditures&apos;];
  [key: string]: unknown;
}

interface BillsApiResponse {
  sponsoredLegislation?: SponsoredBill[];
  [key: string]: unknown;
}

// Campaign Finance Data Fetcher
interface CampaignFinanceWrapperProps {
  bioguideId: string;
  representative: {
    name: string;
    party: string;
  };
  CampaignFinanceVisualizer: React.ComponentType&lt;{
    financeData: CampaignFinanceData;
    representative: { name: string; party: string };
    bioguideId: string;
  }&gt;;
}

export function CampaignFinanceWrapper({
  bioguideId,
  representative,
  CampaignFinanceVisualizer,
}: CampaignFinanceWrapperProps) {
  const url = `/api/representative/${bioguideId}/finance`;
  // eslint-disable-next-line no-console
  console.log(&apos;ðŸ”µ SWR attempting fetch for&apos;, url);
  const {
    data: rawFinanceData,
    error,
    isLoading,
  } = useSWR(
    url,
    async (url: string): Promise&lt;CampaignFinanceData | null&gt; =&gt; {
      try {
        logger.info(&apos;Finance SWR fetching&apos;, { bioguideId, url });
        const response = await fetch(url);
        if (!response.ok) {
          throw new Error(`Failed to fetch: ${response.status} ${response.statusText}`);
        }
        const data = (await response.json()) as FinanceApiResponse;
        logger.info(&apos;Finance SWR raw response&apos;, {
          bioguideId,
          dataType: typeof data,
          hasFinancialSummary: data &amp;&amp; typeof data === &apos;object&apos; &amp;&amp; &apos;financial_summary&apos; in data,
          hasContributions: data &amp;&amp; typeof data === &apos;object&apos; &amp;&amp; &apos;recent_contributions&apos; in data,
        });

        // Process the finance data - API returns flat object with finance properties
        let processedData: CampaignFinanceData | null = null;
        if (
          data &amp;&amp;
          typeof data === &apos;object&apos; &amp;&amp;
          (&apos;financial_summary&apos; in data ||
            &apos;recent_contributions&apos; in data ||
            &apos;recent_expenditures&apos; in data)
        ) {
          processedData = {
            financial_summary: data.financial_summary || [],
            recent_contributions: data.recent_contributions || [],
            recent_expenditures: data.recent_expenditures || [],
          };
        }

        logger.info(&apos;Finance SWR processed data&apos;, {
          bioguideId,
          hasProcessedData: !!processedData,
          dataKeys:
            processedData &amp;&amp; typeof processedData === &apos;object&apos; ? Object.keys(processedData) : [],
        });
        return processedData;
      } catch (error) {
        logger.error(&apos;Finance SWR error&apos;, error, { bioguideId });
        throw new Error(
          `Failed to load campaign finance data: ${error instanceof Error ? error.message : &apos;Unknown error&apos;}`
        );
      }
    },
    {
      revalidateOnFocus: false,
      dedupingInterval: 300000, // 5 minutes
      errorRetryCount: 3,
      errorRetryInterval: 2000,
    }
  );

  // Use processed finance data directly
  const financeData = rawFinanceData;

  // Comprehensive data lifecycle logging
  // eslint-disable-next-line no-console
  console.log(&apos;ðŸ“Š DATA STATE:&apos;, {
    url,
    isLoading,
    hasError: !!error,
    dataLength: Array.isArray(rawFinanceData) ? rawFinanceData.length : &apos;not array&apos;,
    firstItem: Array.isArray(rawFinanceData) ? rawFinanceData[0] : rawFinanceData,
    rawData: rawFinanceData,
  });

  // Track SWR states globally
  if (typeof window !== &apos;undefined&apos;) {
    (window as unknown as { SWR_STATES: Record&lt;string, unknown&gt; }).SWR_STATES =
      (window as unknown as { SWR_STATES: Record&lt;string, unknown&gt; }).SWR_STATES || {};
    (window as unknown as { SWR_STATES: Record&lt;string, unknown&gt; }).SWR_STATES[&apos;finance&apos;] = {
      loading: isLoading,
      data: !!rawFinanceData,
      error: !!error,
    };
  }

  // Data structure analysis
  // eslint-disable-next-line no-console
  console.log(&apos;Data structure:&apos;, {
    direct: Array.isArray(rawFinanceData) ? rawFinanceData.length : typeof rawFinanceData,
    wrapped_data:
      rawFinanceData &amp;&amp; typeof rawFinanceData === &apos;object&apos; &amp;&amp; &apos;data&apos; in rawFinanceData
        ? Object.keys((rawFinanceData as { data: unknown }).data as object).length
        : &apos;no data prop&apos;,
    wrapped_items:
      rawFinanceData &amp;&amp; typeof rawFinanceData === &apos;object&apos; &amp;&amp; &apos;items&apos; in rawFinanceData
        ? (rawFinanceData as { items: unknown[] }).items?.length || 0
        : &apos;no items prop&apos;,
  });

  // Render verification logging
  if (
    financeData &amp;&amp;
    (financeData.financial_summary?.length ||
      financeData.recent_contributions?.length ||
      financeData.recent_expenditures?.length)
  ) {
    // eslint-disable-next-line no-console
    console.log(
      &apos;âœ… RENDERING finance data with summary:&apos;,
      financeData.financial_summary?.length || 0,
      &apos;contributions:&apos;,
      financeData.recent_contributions?.length || 0,
      &apos;expenditures:&apos;,
      financeData.recent_expenditures?.length || 0
    );
  } else {
    // eslint-disable-next-line no-console
    console.log(&apos;âŒ NOT RENDERING finance, data:&apos;, financeData);
  }

  // Remove debug div - data should flow to component
  // Debug logging already shows data exists

  if (isLoading) {
    return (
      &lt;div className=&quot;animate-pulse&quot;&gt;
        &lt;div className=&quot;h-8 bg-gray-200 rounded w-1/3 mb-4&quot;&gt;&lt;/div&gt;
        &lt;div className=&quot;h-64 bg-gray-200 rounded mb-4&quot;&gt;&lt;/div&gt;
        &lt;div className=&quot;grid grid-cols-3 gap-4&quot;&gt;
          &lt;div className=&quot;h-32 bg-gray-100 rounded&quot;&gt;&lt;/div&gt;
          &lt;div className=&quot;h-32 bg-gray-100 rounded&quot;&gt;&lt;/div&gt;
          &lt;div className=&quot;h-32 bg-gray-100 rounded&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    );
  }

  if (error) {
    return (
      &lt;div className=&quot;text-center py-8&quot;&gt;
        &lt;p className=&quot;text-gray-500 mb-2&quot;&gt;Unable to load campaign finance data&lt;/p&gt;
        &lt;p className=&quot;text-sm text-gray-400&quot;&gt;
          {error instanceof Error ? error.message : &apos;Please try again later&apos;}
        &lt;/p&gt;
      &lt;/div&gt;
    );
  }

  if (
    !financeData ||
    (!financeData.financial_summary?.length &amp;&amp;
      !financeData.recent_contributions?.length &amp;&amp;
      !financeData.recent_expenditures?.length)
  ) {
    return (
      &lt;div className=&quot;text-center py-8&quot;&gt;
        &lt;p className=&quot;text-gray-500&quot;&gt;No campaign finance data available&lt;/p&gt;
        &lt;p className=&quot;text-sm text-gray-400&quot;&gt;Data may not be available for this representative&lt;/p&gt;
      &lt;/div&gt;
    );
  }

  return (
    &lt;CampaignFinanceVisualizer
      financeData={financeData}
      representative={representative}
      bioguideId={bioguideId}
    /&gt;
  );
}

// Bills Data Fetcher
interface BillsTrackerWrapperProps {
  bioguideId: string;
  representative: {
    name: string;
    chamber: string;
  };
  BillsTracker: React.ComponentType&lt;{
    bills: SponsoredBill[];
    representative: { name: string; chamber: string };
  }&gt;;
  initialData?: unknown[]; // Server-fetched bills data
}

export function BillsTrackerWrapper({
  bioguideId,
  representative,
  BillsTracker,
  initialData,
}: BillsTrackerWrapperProps) {
  // eslint-disable-next-line no-console
  console.log(&apos;ðŸ”µ BillsWrapper - Initial data received:&apos;, initialData?.length || 0, &apos;bills&apos;);

  const url = `/api/representative/${bioguideId}/bills`;
  const hasInitialData = initialData &amp;&amp; Array.isArray(initialData) &amp;&amp; initialData.length &gt; 0;

  // Always call useSWR but conditionally disable it when we have initial data
  const {
    data: rawBillsData,
    error,
    isLoading,
  } = useSWR(
    hasInitialData ? null : url, // Skip SWR fetch if we have initial data
    async (url: string): Promise&lt;SponsoredBill[]&gt; =&gt; {
      try {
        logger.info(&apos;Bills SWR fetching&apos;, { bioguideId, url });
        const response = await fetch(url);
        if (!response.ok) {
          throw new Error(`Failed to fetch: ${response.status} ${response.statusText}`);
        }
        const data = (await response.json()) as BillsApiResponse;
        logger.info(&apos;Bills SWR raw response&apos;, {
          bioguideId,
          dataType: typeof data,
          hasSponsoredLegislation:
            data &amp;&amp; typeof data === &apos;object&apos; &amp;&amp; &apos;sponsoredLegislation&apos; in data,
          billsCount: data?.sponsoredLegislation?.length || 0,
        });

        // Process the bills data - API returns object with sponsoredLegislation array
        let processedData: SponsoredBill[] = [];
        if (
          data &amp;&amp;
          typeof data === &apos;object&apos; &amp;&amp;
          &apos;sponsoredLegislation&apos; in data &amp;&amp;
          Array.isArray(data.sponsoredLegislation)
        ) {
          processedData = data.sponsoredLegislation;
        } else if (Array.isArray(data)) {
          // Fallback for direct array response
          processedData = data;
        }

        logger.info(&apos;Bills SWR processed data&apos;, { bioguideId, billsCount: processedData.length });
        return processedData;
      } catch (error) {
        logger.error(&apos;Bills SWR error&apos;, error, { bioguideId });
        throw new Error(
          `Failed to load bills data: ${error instanceof Error ? error.message : &apos;Unknown error&apos;}`
        );
      }
    },
    {
      revalidateOnFocus: false,
      dedupingInterval: 300000, // 5 minutes
      errorRetryCount: 3,
      errorRetryInterval: 2000,
    }
  );

  // Use initial data if available, otherwise use SWR data
  const bills = hasInitialData ? (initialData as SponsoredBill[]) : rawBillsData || [];

  // Comprehensive data lifecycle logging
  // eslint-disable-next-line no-console
  console.log(&apos;ðŸ“Š DATA STATE:&apos;, {
    url,
    isLoading,
    hasError: !!error,
    dataLength: Array.isArray(rawBillsData) ? rawBillsData.length : &apos;not array&apos;,
    firstItem: Array.isArray(rawBillsData) ? rawBillsData[0] : rawBillsData,
    rawData: rawBillsData,
  });

  // Track SWR states globally
  if (typeof window !== &apos;undefined&apos;) {
    (window as unknown as { SWR_STATES: Record&lt;string, unknown&gt; }).SWR_STATES =
      (window as unknown as { SWR_STATES: Record&lt;string, unknown&gt; }).SWR_STATES || {};
    (window as unknown as { SWR_STATES: Record&lt;string, unknown&gt; }).SWR_STATES[&apos;bills&apos;] = {
      loading: isLoading,
      data: !!rawBillsData,
      error: !!error,
    };
  }

  // Data structure analysis
  // eslint-disable-next-line no-console
  console.log(&apos;Data structure:&apos;, {
    direct: Array.isArray(rawBillsData) ? rawBillsData.length : typeof rawBillsData,
    wrapped_data:
      rawBillsData &amp;&amp; typeof rawBillsData === &apos;object&apos; &amp;&amp; &apos;data&apos; in rawBillsData
        ? Object.keys((rawBillsData as { data: unknown }).data as object).length
        : &apos;no data prop&apos;,
    wrapped_items:
      rawBillsData &amp;&amp; typeof rawBillsData === &apos;object&apos; &amp;&amp; &apos;items&apos; in rawBillsData
        ? (rawBillsData as { items: unknown[] }).items?.length || 0
        : &apos;no items prop&apos;,
  });

  // Render verification logging
  if (bills &amp;&amp; bills.length &gt; 0) {
    // eslint-disable-next-line no-console
    console.log(&apos;âœ… RENDERING bills data with&apos;, bills.length, &apos;items&apos;);
  } else {
    // eslint-disable-next-line no-console
    console.log(&apos;âŒ NOT RENDERING bills, data:&apos;, bills);
  }

  // Remove debug div - data should flow to component
  // Debug logging already shows data exists

  if (isLoading &amp;&amp; !hasInitialData) {
    return (
      &lt;div className=&quot;animate-pulse space-y-4&quot;&gt;
        &lt;div className=&quot;h-6 bg-gray-200 rounded w-1/4&quot;&gt;&lt;/div&gt;
        {Array.from({ length: 5 }).map((_, i) =&gt; (
          &lt;div key={i} className=&quot;border rounded-lg p-4&quot;&gt;
            &lt;div className=&quot;h-5 bg-gray-200 rounded w-3/4 mb-2&quot;&gt;&lt;/div&gt;
            &lt;div className=&quot;h-4 bg-gray-100 rounded w-1/2&quot;&gt;&lt;/div&gt;
          &lt;/div&gt;
        ))}
      &lt;/div&gt;
    );
  }

  if (error &amp;&amp; !hasInitialData) {
    return (
      &lt;div className=&quot;text-center py-8&quot;&gt;
        &lt;p className=&quot;text-gray-500 mb-2&quot;&gt;Unable to load bills data&lt;/p&gt;
        &lt;p className=&quot;text-sm text-gray-400&quot;&gt;
          {error instanceof Error ? error.message : &apos;Please try again later&apos;}
        &lt;/p&gt;
      &lt;/div&gt;
    );
  }

  if (!bills || bills.length === 0) {
    return (
      &lt;div className=&quot;text-center py-8&quot;&gt;
        &lt;p className=&quot;text-gray-500&quot;&gt;No sponsored legislation found&lt;/p&gt;
        &lt;p className=&quot;text-sm text-gray-400&quot;&gt;
          This representative may not have sponsored any bills recently
        &lt;/p&gt;
      &lt;/div&gt;
    );
  }

  return &lt;BillsTracker bills={bills} representative={representative} /&gt;;
}

// Voting Records Data Fetcher
interface VotingRecordsWrapperProps {
  bioguideId: string;
  chamber: &apos;House&apos; | &apos;Senate&apos;;
  VotingRecordsTable: React.ComponentType&lt;{
    bioguideId: string;
    chamber: &apos;House&apos; | &apos;Senate&apos;;
  }&gt;;
}

export function VotingRecordsWrapper({
  bioguideId,
  chamber,
  VotingRecordsTable,
}: VotingRecordsWrapperProps) {
  // Note: VotingRecordsTable component handles its own data fetching internally
  // No need for duplicate SWR call here - removing to prevent cache conflicts and redundant API requests
  // Loading states and error handling are managed by the VotingRecordsTable component itself
  return &lt;VotingRecordsTable bioguideId={bioguideId} chamber={chamber} /&gt;;
}

// News Data Fetcher
interface NewsWrapperProps {
  bioguideId: string;
  representative: {
    name: string;
    party: string;
    state: string;
  };
  EnhancedNewsFeed: React.ComponentType&lt;{
    bioguideId: string;
    representative: {
      name: string;
      party: string;
      state: string;
    };
  }&gt;;
}

export function NewsWrapper({ bioguideId, representative, EnhancedNewsFeed }: NewsWrapperProps) {
  // EnhancedNewsFeed handles its own data fetching via representativeApi.getNews()
  // No need for duplicate SWR logic here
  return &lt;EnhancedNewsFeed bioguideId={bioguideId} representative={representative} /&gt;;
}

</file>
<file path="[bioguideId]/error.tsx">
&apos;use client&apos;;


/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

import { useEffect } from &apos;react&apos;;
import Link from &apos;next/link&apos;;

export default function Error({
  error,
  reset,
}: {
  error: Error &amp; { digest?: string };
  reset: () =&gt; void;
}) {
  useEffect(() =&gt; {
    // Log the error to an error reporting service
    console.error(&apos;Representative profile error:&apos;, error);
  }, [error]);

  return (
    &lt;div className=&quot;min-h-screen bg-gray-50 flex items-center justify-center px-4&quot;&gt;
      &lt;div className=&quot;max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center&quot;&gt;
        &lt;div className=&quot;mb-4&quot;&gt;
          &lt;svg className=&quot;w-16 h-16 text-red-500 mx-auto&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; viewBox=&quot;0 0 24 24&quot;&gt;
            &lt;path strokeLinecap=&quot;round&quot; strokeLinejoin=&quot;round&quot; strokeWidth={2} d=&quot;M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z&quot; /&gt;
          &lt;/svg&gt;
        &lt;/div&gt;
        
        &lt;h2 className=&quot;text-2xl font-bold text-gray-900 mb-2&quot;&gt;
          Something went wrong!
        &lt;/h2&gt;
        
        &lt;p className=&quot;text-gray-600 mb-6&quot;&gt;
          We encountered an error while loading this representative&amp;apos;s profile. This might be a temporary issue.
        &lt;/p&gt;
        
        &lt;div className=&quot;space-y-3&quot;&gt;
          &lt;button
            onClick={() =&gt; reset()}
            className=&quot;w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors&quot;
          &gt;
            Try again
          &lt;/button&gt;
          
          &lt;Link
            href=&quot;/representatives&quot;
            className=&quot;block w-full bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors&quot;
          &gt;
            Browse all representatives
          &lt;/Link&gt;
          
          &lt;Link
            href=&quot;/&quot;
            className=&quot;block w-full text-gray-600 hover:text-gray-800 underline&quot;
          &gt;
            Return to home
          &lt;/Link&gt;
        &lt;/div&gt;
        
        {process.env.NODE_ENV === &apos;development&apos; &amp;&amp; (
          &lt;details className=&quot;mt-6 text-left&quot;&gt;
            &lt;summary className=&quot;cursor-pointer text-sm text-gray-500 hover:text-gray-700&quot;&gt;
              Error details (Development only)
            &lt;/summary&gt;
            &lt;pre className=&quot;mt-2 p-4 bg-gray-100 rounded text-xs text-red-600 overflow-auto&quot;&gt;
              {error.message}
              {error.stack}
            &lt;/pre&gt;
          &lt;/details&gt;
        )}
      &lt;/div&gt;
    &lt;/div&gt;
  );
}
</file>
<file path="[bioguideId]/loading.tsx">
/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

import { ProfileHeaderSkeleton, TabContentSkeleton } from &apos;@/shared/components/ui&apos;;

export default function Loading() {
  return (
    &lt;div className=&quot;max-w-6xl mx-auto p-6&quot;&gt;
      &lt;ProfileHeaderSkeleton /&gt;
      &lt;TabContentSkeleton /&gt;
    &lt;/div&gt;
  );
}

</file>
<file path="[bioguideId]/not-found.tsx">
/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

import Link from &apos;next/link&apos;;

function CiviqLogo() {
  return (
    &lt;div className=&quot;flex items-center&quot;&gt;
      &lt;svg className=&quot;w-8 h-8&quot; viewBox=&quot;0 0 100 100&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;
        &lt;rect x=&quot;36&quot; y=&quot;51&quot; width=&quot;28&quot; height=&quot;30&quot; fill=&quot;#0b983c&quot; /&gt;
        &lt;circle cx=&quot;50&quot; cy=&quot;31&quot; r=&quot;22&quot; fill=&quot;#ffffff&quot; /&gt;
        &lt;circle cx=&quot;50&quot; cy=&quot;31&quot; r=&quot;20&quot; fill=&quot;#e11d07&quot; /&gt;
        &lt;circle cx=&quot;38&quot; cy=&quot;89&quot; r=&quot;2&quot; fill=&quot;#3ea2d4&quot; /&gt;
        &lt;circle cx=&quot;46&quot; cy=&quot;89&quot; r=&quot;2&quot; fill=&quot;#3ea2d4&quot; /&gt;
        &lt;circle cx=&quot;54&quot; cy=&quot;89&quot; r=&quot;2&quot; fill=&quot;#3ea2d4&quot; /&gt;
        &lt;circle cx=&quot;62&quot; cy=&quot;89&quot; r=&quot;2&quot; fill=&quot;#3ea2d4&quot; /&gt;
      &lt;/svg&gt;
      &lt;span className=&quot;ml-2 text-lg font-bold text-gray-900&quot;&gt;CIV.IQ&lt;/span&gt;
    &lt;/div&gt;
  );
}

export default function RepresentativeNotFound() {
  return (
    &lt;div className=&quot;min-h-screen bg-gray-50&quot;&gt;
      {/* Header */}
      &lt;div className=&quot;bg-white shadow-sm&quot;&gt;
        &lt;div className=&quot;max-w-7xl mx-auto px-4 sm:px-6 lg:px-8&quot;&gt;
          &lt;div className=&quot;flex items-center justify-between py-4&quot;&gt;
            &lt;Link href=&quot;/&quot; className=&quot;flex items-center&quot;&gt;
              &lt;CiviqLogo /&gt;
            &lt;/Link&gt;
            &lt;div className=&quot;flex items-center space-x-4&quot;&gt;
              &lt;Link href=&quot;/representatives&quot; className=&quot;text-sm text-gray-600 hover:text-gray-900&quot;&gt;
                All Representatives
              &lt;/Link&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Main Content */}
      &lt;div className=&quot;max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12&quot;&gt;
        &lt;div className=&quot;text-center&quot;&gt;
          {/* 404 Icon */}
          &lt;div className=&quot;mx-auto flex items-center justify-center w-20 h-20 bg-red-100 rounded-full mb-6&quot;&gt;
            &lt;svg
              className=&quot;w-10 h-10 text-red-600&quot;
              fill=&quot;none&quot;
              stroke=&quot;currentColor&quot;
              viewBox=&quot;0 0 24 24&quot;
              xmlns=&quot;http://www.w3.org/2000/svg&quot;
            &gt;
              &lt;path
                strokeLinecap=&quot;round&quot;
                strokeLinejoin=&quot;round&quot;
                strokeWidth={2}
                d=&quot;M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.082 16.5c-.77.833.192 2.5 1.732 2.5z&quot;
              /&gt;
            &lt;/svg&gt;
          &lt;/div&gt;

          {/* Title and Description */}
          &lt;h1 className=&quot;text-4xl font-bold text-gray-900 mb-4&quot;&gt;Representative Not Found&lt;/h1&gt;
          &lt;p className=&quot;text-lg text-gray-600 mb-8 max-w-2xl mx-auto&quot;&gt;
            We couldn&amp;apos;t find the representative you&amp;apos;re looking for. This could be because:
          &lt;/p&gt;

          {/* Reasons List */}
          &lt;div className=&quot;bg-white rounded-lg p-6 mb-8 text-left max-w-2xl mx-auto shadow-sm&quot;&gt;
            &lt;ul className=&quot;space-y-3 text-gray-700&quot;&gt;
              &lt;li className=&quot;flex items-start&quot;&gt;
                &lt;span className=&quot;text-civiq-red mr-2&quot;&gt;â€¢&lt;/span&gt;
                The Bioguide ID is incorrect or doesn&amp;apos;t exist
              &lt;/li&gt;
              &lt;li className=&quot;flex items-start&quot;&gt;
                &lt;span className=&quot;text-civiq-red mr-2&quot;&gt;â€¢&lt;/span&gt;
                The representative is not currently serving in the 119th Congress
              &lt;/li&gt;
              &lt;li className=&quot;flex items-start&quot;&gt;
                &lt;span className=&quot;text-civiq-red mr-2&quot;&gt;â€¢&lt;/span&gt;
                There may be a temporary issue with our data sources
              &lt;/li&gt;
              &lt;li className=&quot;flex items-start&quot;&gt;
                &lt;span className=&quot;text-civiq-red mr-2&quot;&gt;â€¢&lt;/span&gt;
                The URL might have been typed incorrectly
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/div&gt;

          {/* Action Buttons */}
          &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center items-center&quot;&gt;
            &lt;Link
              href=&quot;/representatives&quot;
              className=&quot;inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-civiq-blue hover:bg-civiq-blue/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-civiq-blue transition-colors&quot;
            &gt;
              &lt;svg
                className=&quot;w-5 h-5 mr-2&quot;
                fill=&quot;none&quot;
                stroke=&quot;currentColor&quot;
                viewBox=&quot;0 0 24 24&quot;
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
              &gt;
                &lt;path
                  strokeLinecap=&quot;round&quot;
                  strokeLinejoin=&quot;round&quot;
                  strokeWidth={2}
                  d=&quot;M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z&quot;
                /&gt;
              &lt;/svg&gt;
              Browse All Representatives
            &lt;/Link&gt;

            &lt;Link
              href=&quot;/&quot;
              className=&quot;inline-flex items-center px-6 py-3 border border-gray-300 text-base font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-civiq-blue transition-colors&quot;
            &gt;
              &lt;svg
                className=&quot;w-5 h-5 mr-2&quot;
                fill=&quot;none&quot;
                stroke=&quot;currentColor&quot;
                viewBox=&quot;0 0 24 24&quot;
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
              &gt;
                &lt;path
                  strokeLinecap=&quot;round&quot;
                  strokeLinejoin=&quot;round&quot;
                  strokeWidth={2}
                  d=&quot;M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6&quot;
                /&gt;
              &lt;/svg&gt;
              Go to Homepage
            &lt;/Link&gt;
          &lt;/div&gt;

          {/* Help Text */}
          &lt;div className=&quot;mt-12 text-sm text-gray-500&quot;&gt;
            &lt;p&gt;
              Need help finding a specific representative?{&apos; &apos;}
              &lt;Link href=&quot;/representatives&quot; className=&quot;text-civiq-blue hover:text-civiq-blue/80&quot;&gt;
                Try our search feature
              &lt;/Link&gt;{&apos; &apos;}
              or{&apos; &apos;}
              &lt;Link href=&quot;/&quot; className=&quot;text-civiq-blue hover:text-civiq-blue/80&quot;&gt;
                search by ZIP code
              &lt;/Link&gt;
              .
            &lt;/p&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}

</file>
<file path="[bioguideId]/page-backup.tsx">
/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

import Link from &apos;next/link&apos;;
import { notFound } from &apos;next/navigation&apos;;
import { RepresentativeProfileClient } from &apos;./client-wrapper&apos;;
import { ErrorBoundary } from &apos;@/components/common/ErrorBoundary&apos;;
import { RepresentativePageSidebar } from &apos;@/features/representatives/components/RepresentativePageSidebar&apos;;
import RepresentativePhoto from &apos;@/features/representatives/components/RepresentativePhoto&apos;;
import { logger } from &apos;@/lib/logging/logger-client&apos;;

export const dynamic = &apos;force-dynamic&apos;;

// Client-side components will be dynamically imported in the client wrapper

function CiviqLogo() {
  return (
    &lt;div className=&quot;flex items-center&quot;&gt;
      &lt;svg className=&quot;w-8 h-8&quot; viewBox=&quot;0 0 100 100&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;
        &lt;rect x=&quot;36&quot; y=&quot;51&quot; width=&quot;28&quot; height=&quot;30&quot; fill=&quot;#0b983c&quot; /&gt;
        &lt;circle cx=&quot;50&quot; cy=&quot;31&quot; r=&quot;22&quot; fill=&quot;#ffffff&quot; /&gt;
        &lt;circle cx=&quot;50&quot; cy=&quot;31&quot; r=&quot;20&quot; fill=&quot;#e11d07&quot; /&gt;
        &lt;circle cx=&quot;38&quot; cy=&quot;89&quot; r=&quot;2&quot; fill=&quot;#3ea2d4&quot; /&gt;
        &lt;circle cx=&quot;46&quot; cy=&quot;89&quot; r=&quot;2&quot; fill=&quot;#3ea2d4&quot; /&gt;
        &lt;circle cx=&quot;54&quot; cy=&quot;89&quot; r=&quot;2&quot; fill=&quot;#3ea2d4&quot; /&gt;
        &lt;circle cx=&quot;62&quot; cy=&quot;89&quot; r=&quot;2&quot; fill=&quot;#3ea2d4&quot; /&gt;
      &lt;/svg&gt;
      &lt;span className=&quot;ml-2 text-lg font-bold text-gray-900&quot;&gt;CIV.IQ&lt;/span&gt;
    &lt;/div&gt;
  );
}

interface RepresentativeDetails {
  bioguideId: string;
  name: string;
  firstName: string;
  lastName: string;
  party: string;
  state: string;
  district?: string;
  chamber: &apos;House&apos; | &apos;Senate&apos;;
  title: string;
  phone?: string;
  email?: string;
  website?: string;
  imageUrl?: string;
  terms: Array&lt;{
    congress: string;
    startYear: string;
    endYear: string;
  }&gt;;
  committees?: Array&lt;{
    name: string;
    role?: string;
    thomas_id?: string;
    id?: string;
  }&gt;;
  fullName?: {
    first: string;
    middle?: string;
    last: string;
    suffix?: string;
    nickname?: string;
    official?: string;
  };
  bio?: {
    birthday?: string;
    gender?: &apos;M&apos; | &apos;F&apos;;
    religion?: string;
  };
  currentTerm?: {
    start: string;
    end: string;
    office?: string;
    phone?: string;
    address?: string;
    website?: string;
    contactForm?: string;
    rssUrl?: string;
    stateRank?: &apos;junior&apos; | &apos;senior&apos;;
    class?: number;
  };
  socialMedia?: {
    twitter?: string;
    facebook?: string;
    youtube?: string;
    instagram?: string;
    mastodon?: string;
  };
}

// Server-side data fetching with Next.js 15 caching
async function getRepresentativeData(bioguideId: string) {
  try {
    if (!bioguideId || typeof bioguideId !== &apos;string&apos;) {
      const error = &apos;Invalid bioguideId provided&apos;;
      logger.error(&apos;Representative data fetch failed&apos;, new Error(error), {
        bioguideId,
        endpoint: &apos;representative-batch&apos;,
        component: &apos;RepresentativeProfilePage&apos;,
      });
      throw new Error(error);
    }

    logger.info(&apos;Fetching representative data&apos;, {
      bioguideId,
      endpoint: &apos;representative-batch&apos;,
      component: &apos;RepresentativeProfilePage&apos;,
    });

    // Use relative URL for API calls (works in both dev and production)
    const response = await fetch(`/api/representative/${bioguideId}/batch`, {
      method: &apos;POST&apos;,
      headers: {
        &apos;Content-Type&apos;: &apos;application/json&apos;,
      },
      body: JSON.stringify({
        endpoints: [
          &apos;profile&apos;,
          &apos;votes&apos;,
          &apos;bills&apos;,
          &apos;finance&apos;,
          &apos;news&apos;,
          &apos;party-alignment&apos;,
          &apos;committees&apos;,
          &apos;leadership&apos;,
        ],
      }),
      // Next.js 15 caching - cache for 5 minutes, revalidate on-demand
      next: {
        revalidate: 300,
        tags: [`representative-${bioguideId}`, &apos;representative-batch&apos;],
      },
    } as RequestInit &amp; { next?: { revalidate?: number; tags?: string[] } });

    if (!response) {
      const error = &apos;No response received from API&apos;;
      logger.error(&apos;Representative API fetch failed&apos;, new Error(error), {
        bioguideId,
        endpoint: &apos;representative-batch&apos;,
        component: &apos;RepresentativeProfilePage&apos;,
      });
      throw new Error(error);
    }

    if (!response.ok) {
      logger.warn(&apos;Representative API returned non-OK status&apos;, {
        bioguideId,
        status: response.status,
        statusText: response.statusText,
        endpoint: &apos;representative-batch&apos;,
        component: &apos;RepresentativeProfilePage&apos;,
      });

      if (response.status === 404) {
        logger.info(&apos;Representative not found, triggering 404&apos;, {
          bioguideId,
          component: &apos;RepresentativeProfilePage&apos;,
        });
        notFound();
      }
      throw new Error(
        `Failed to fetch representative data: ${response.status} ${response.statusText}`
      );
    }

    let data;
    try {
      data = await response.json();
    } catch (parseError) {
      const error = &apos;Invalid JSON response from API&apos;;
      logger.error(&apos;Representative API JSON parse failed&apos;, parseError, {
        bioguideId,
        endpoint: &apos;representative-batch&apos;,
        component: &apos;RepresentativeProfilePage&apos;,
      });
      throw new Error(error);
    }

    if (!data) {
      const error = &apos;No data received from API&apos;;
      logger.error(&apos;Representative API returned empty data&apos;, new Error(error), {
        bioguideId,
        endpoint: &apos;representative-batch&apos;,
        component: &apos;RepresentativeProfilePage&apos;,
      });
      throw new Error(error);
    }

    logger.info(&apos;Representative data fetched successfully&apos;, {
      bioguideId,
      success: data.success !== false,
      hasProfile: !!data.data?.profile,
      endpoint: &apos;representative-batch&apos;,
      component: &apos;RepresentativeProfilePage&apos;,
      executionTime: data.executionTime || 0,
    });

    // Return structured data with safe defaults
    return {
      success: data.success !== false, // Consider success unless explicitly false
      data: data.data || {},
      errors: data.errors || {},
      executionTime: data.executionTime || 0,
    };
  } catch (error) {
    // Log the error but return a safe error structure instead of throwing
    logger.error(&apos;Representative data fetch completely failed&apos;, error, {
      bioguideId,
      endpoint: &apos;representative-batch&apos;,
      component: &apos;RepresentativeProfilePage&apos;,
      errorMessage: error instanceof Error ? error.message : &apos;Unknown error occurred&apos;,
    });

    return {
      success: false,
      data: {},
      errors: { fetch: error instanceof Error ? error.message : &apos;Unknown error occurred&apos; },
      executionTime: 0,
    };
  }
}

// Main Server Component - renders immediately with SSR data
export default async function RepresentativeProfilePage({
  params,
}: {
  params: Promise&lt;{ bioguideId: string }&gt;;
}) {
  let bioguideId: string;

  try {
    const resolvedParams = await params;
    bioguideId = resolvedParams.bioguideId;

    if (!bioguideId || typeof bioguideId !== &apos;string&apos;) {
      notFound();
    }
  } catch {
    notFound();
  }

  // Server-side data fetching - this runs on the server and streams HTML
  const batchData = await getRepresentativeData(bioguideId);

  // Handle fetch errors gracefully - allow partial failures
  if (!batchData || !batchData.data?.profile?.representative) {
    notFound();
  }

  const representative = batchData.data.profile.representative as RepresentativeDetails;
  const votingData = batchData.data.votes || [];
  const billsData = batchData.data.bills || [];
  const financeData = batchData.data.finance || {};
  const newsData = batchData.data.news || [];
  const partyAlignmentData = batchData.data[&apos;party-alignment&apos;] || {};
  const partialErrors = batchData.errors || {};

  // Validate essential representative data - be more lenient
  if (
    !representative ||
    (!representative.name &amp;&amp; !representative.firstName &amp;&amp; !representative.lastName)
  ) {
    notFound();
  }

  // Set display name if needed
  if (!representative.name &amp;&amp; representative.firstName &amp;&amp; representative.lastName) {
    representative.name = `${representative.firstName} ${representative.lastName}`;
  }

  return (
    &lt;ErrorBoundary&gt;
      &lt;div className=&quot;min-h-screen bg-gray-50&quot;&gt;
        {/* Header - renders immediately from server */}
        &lt;div className=&quot;bg-white shadow-sm&quot;&gt;
          &lt;div className=&quot;max-w-7xl mx-auto px-4 sm:px-6 lg:px-8&quot;&gt;
            &lt;div className=&quot;flex items-center justify-between py-4&quot;&gt;
              &lt;Link href=&quot;/&quot; className=&quot;flex items-center&quot;&gt;
                &lt;CiviqLogo /&gt;
              &lt;/Link&gt;
              &lt;div className=&quot;flex items-center space-x-4&quot;&gt;
                &lt;Link href=&quot;/representatives&quot; className=&quot;text-sm text-gray-600 hover:text-gray-900&quot;&gt;
                  All Representatives
                &lt;/Link&gt;
                &lt;div className=&quot;text-xs text-gray-400&quot;&gt;
                  Server rendered in {batchData.executionTime}ms
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Main Content - Critical path rendered immediately */}
        &lt;div className=&quot;max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6&quot;&gt;
          {/* Profile Header - Above the fold content */}
          &lt;div className=&quot;bg-white rounded-lg shadow-sm p-6 mb-6&quot;&gt;
            &lt;div className=&quot;flex items-center space-x-6&quot;&gt;
              &lt;div className=&quot;flex-shrink-0&quot;&gt;
                &lt;RepresentativePhoto
                  bioguideId={representative.bioguideId}
                  name={representative.name}
                  size=&quot;xl&quot;
                /&gt;
              &lt;/div&gt;

              &lt;div className=&quot;flex-1&quot;&gt;
                &lt;h1 className=&quot;text-3xl font-bold text-gray-900&quot;&gt;
                  {representative.name || &apos;Representative&apos;}
                &lt;/h1&gt;
                &lt;div className=&quot;flex items-center space-x-4 text-gray-600 mt-2&quot;&gt;
                  &lt;span
                    className={`px-2 py-1 rounded text-sm font-medium ${
                      representative.party === &apos;Republican&apos;
                        ? &apos;bg-red-100 text-red-800&apos;
                        : representative.party === &apos;Democrat&apos;
                          ? &apos;bg-blue-100 text-blue-800&apos;
                          : &apos;bg-gray-100 text-gray-800&apos;
                    }`}
                  &gt;
                    {representative.party || &apos;Independent&apos;}
                  &lt;/span&gt;
                  &lt;span&gt;{representative.title || &apos;Representative&apos;}&lt;/span&gt;
                  &lt;span&gt;
                    {representative.state || &apos;Unknown&apos;}
                    {representative.district ? `-${representative.district}` : &apos;&apos;}
                  &lt;/span&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              &lt;div className=&quot;flex-shrink-0&quot;&gt;
                &lt;div className=&quot;flex space-x-3&quot;&gt;
                  {representative.website &amp;&amp; (
                    &lt;a
                      href={representative.website}
                      target=&quot;_blank&quot;
                      rel=&quot;noopener noreferrer&quot;
                      className=&quot;text-blue-600 hover:text-blue-800&quot;
                    &gt;
                      Website
                    &lt;/a&gt;
                  )}
                  {representative.currentTerm?.contactForm &amp;&amp; (
                    &lt;a
                      href={representative.currentTerm.contactForm}
                      target=&quot;_blank&quot;
                      rel=&quot;noopener noreferrer&quot;
                      className=&quot;text-blue-600 hover:text-blue-800&quot;
                    &gt;
                      Contact
                    &lt;/a&gt;
                  )}
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;

          {/* Error Display for Partial Failures */}
          {Object.keys(partialErrors).length &gt; 0 &amp;&amp; (
            &lt;div className=&quot;bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6&quot;&gt;
              &lt;div className=&quot;flex&quot;&gt;
                &lt;div className=&quot;flex-shrink-0&quot;&gt;
                  &lt;svg className=&quot;h-5 w-5 text-yellow-400&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
                    &lt;path
                      fillRule=&quot;evenodd&quot;
                      d=&quot;M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z&quot;
                      clipRule=&quot;evenodd&quot;
                    /&gt;
                  &lt;/svg&gt;
                &lt;/div&gt;
                &lt;div className=&quot;ml-3&quot;&gt;
                  &lt;h3 className=&quot;text-sm font-medium text-yellow-800&quot;&gt;
                    Some data could not be loaded
                  &lt;/h3&gt;
                  &lt;div className=&quot;mt-2 text-sm text-yellow-700&quot;&gt;
                    &lt;p&gt;The following information may be incomplete:&lt;/p&gt;
                    &lt;ul className=&quot;list-disc list-inside mt-1&quot;&gt;
                      {Object.entries(partialErrors).map(([key, error]) =&gt; (
                        &lt;li key={key} className=&quot;capitalize&quot;&gt;
                          {key.replace(&apos;-&apos;, &apos; &apos;)}:{&apos; &apos;}
                          {typeof error === &apos;string&apos; ? error : &apos;Failed to load&apos;}
                        &lt;/li&gt;
                      ))}
                    &lt;/ul&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          )}

          {/* Two-Column Layout: Main Content + Sidebar */}
          &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-4 gap-6&quot;&gt;
            {/* Main Content Area */}
            &lt;div className=&quot;lg:col-span-3&quot;&gt;
              &lt;RepresentativeProfileClient
                representative={representative}
                initialData={{
                  votes: votingData,
                  bills: billsData,
                  finance: financeData,
                  news: newsData,
                  partyAlignment: partyAlignmentData,
                }}
                partialErrors={partialErrors}
                bioguideId={bioguideId}
              /&gt;
            &lt;/div&gt;

            {/* Sidebar */}
            &lt;div className=&quot;lg:col-span-1&quot;&gt;
              &lt;RepresentativePageSidebar
                representative={{
                  name: representative.name || &apos;Representative&apos;,
                  state: representative.state || &apos;Unknown&apos;,
                  district: representative.district,
                  chamber: representative.chamber || &apos;House&apos;,
                  bioguideId: bioguideId,
                }}
                additionalData={{
                  votes: votingData,
                  bills: billsData,
                  finance: financeData,
                  news: newsData,
                  partyAlignment: partyAlignmentData,
                }}
              /&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/ErrorBoundary&gt;
  );
}

</file>
<file path="[bioguideId]/page.tsx">
/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

import { notFound } from &apos;next/navigation&apos;;
import { RepresentativeClient } from &apos;./components/RepresentativeClient&apos;;
import { ErrorBoundary } from &apos;@/components/common/ErrorBoundary&apos;;
import { ChunkLoadErrorBoundary } from &apos;@/components/common/ChunkLoadErrorBoundary&apos;;
import { extractTransparencyMetadata } from &apos;@/components/ui/DataTransparency&apos;;
import { SiteHeader } from &apos;@/components/layout/SiteHeader&apos;;
import Link from &apos;next/link&apos;;
// Note: Using console directly in Server Components to avoid React rendering issues
// import { logger } from &apos;@/lib/logging/logger-client&apos;;
import { getEnhancedRepresentative } from &apos;@/features/representatives/services/congress.service&apos;;

export const dynamic = &apos;force-dynamic&apos;;

interface RepresentativeDetails {
  bioguideId: string;
  name: string;
  firstName: string;
  lastName: string;
  party: string;
  state: string;
  district?: string;
  chamber: &apos;House&apos; | &apos;Senate&apos;;
  title: string;
  phone?: string;
  email?: string;
  website?: string;
  imageUrl?: string;
  terms: Array&lt;{
    congress: string;
    startYear: string;
    endYear: string;
  }&gt;;
  committees?: Array&lt;{
    name: string;
    role?: string;
    thomas_id?: string;
    id?: string;
  }&gt;;
  fullName?: {
    first: string;
    middle?: string;
    last: string;
    suffix?: string;
    nickname?: string;
    official?: string;
  };
  bio?: {
    birthday?: string;
    gender?: &apos;M&apos; | &apos;F&apos;;
    religion?: string;
  };
  currentTerm?: {
    start: string;
    end: string;
    office?: string;
    phone?: string;
    address?: string;
    website?: string;
    contactForm?: string;
    rssUrl?: string;
    stateRank?: &apos;junior&apos; | &apos;senior&apos;;
    class?: number;
  };
  socialMedia?: {
    twitter?: string;
    facebook?: string;
    youtube?: string;
    instagram?: string;
    mastodon?: string;
  };
}

// Server-side data fetching with direct service import (no HTTP networking)
async function getRepresentativeData(bioguideId: string): Promise&lt;RepresentativeDetails&gt; {
  try {
    if (!bioguideId || typeof bioguideId !== &apos;string&apos;) {
      const _error = &apos;Invalid bioguideId provided&apos;;
      if (process.env.NODE_ENV === &apos;development&apos;) {
        // Server component error handling - no console.error
      }
      notFound();
    }

    if (process.env.NODE_ENV === &apos;development&apos;) {
      // Server component - fetching representative data
    }

    // Direct service call - no HTTP networking during SSR
    const enhancedData = await getEnhancedRepresentative(bioguideId.toUpperCase());

    if (!enhancedData) {
      if (process.env.NODE_ENV === &apos;development&apos;) {
        // Representative not found in congress-legislators data
      }
      notFound();
    }

    if (process.env.NODE_ENV === &apos;development&apos;) {
      // Representative data fetched successfully
    }

    return enhancedData;
  } catch {
    if (process.env.NODE_ENV === &apos;development&apos;) {
      // Representative data fetch failed - return not found
    }
    notFound();
  }
}

// Main Server Component - renders immediately with SSR data
export default async function RepresentativeProfilePage({
  params,
}: {
  params: Promise&lt;{ bioguideId: string }&gt;;
}) {
  let bioguideId: string;

  try {
    const resolvedParams = await params;
    bioguideId = resolvedParams.bioguideId;

    if (!bioguideId || typeof bioguideId !== &apos;string&apos;) {
      notFound();
    }
  } catch {
    notFound();
  }

  // Server-side data fetching - this runs on the server and streams HTML
  const representative = await getRepresentativeData(bioguideId);

  // Handle fetch errors gracefully - representative data is required
  if (!representative) {
    notFound();
  }

  // Server-side data fetching for initial load performance
  // Construct absolute URL for server-side fetch (Node.js requires absolute URLs)
  // Use localhost for development, but this will be replaced with proper base URL in production
  const baseUrl = process.env.NEXT_PUBLIC_APP_URL || &apos;http://localhost:3000&apos;;
  const billsUrl = `${baseUrl}/api/representative/${bioguideId}/bills`;
  const votesUrl = `${baseUrl}/api/representative/${bioguideId}/votes`;

  // Fetch bills data server-side
  let billsData: unknown[] = [];
  let billsResponseData: unknown = null;
  try {
    const billsResponse = await fetch(billsUrl, {
      headers: {
        Accept: &apos;application/json&apos;,
      },
    });

    if (billsResponse.ok) {
      billsResponseData = await billsResponse.json();
      const responseObj = billsResponseData as Record&lt;string, unknown&gt;;

      // Extract metadata for transparency
      const _billsMetadata = extractTransparencyMetadata(responseObj);

      billsData = Array.isArray(responseObj?.sponsoredLegislation)
        ? responseObj.sponsoredLegislation
        : Array.isArray(responseObj?.bills)
          ? responseObj.bills
          : Array.isArray(billsResponseData)
            ? billsResponseData
            : [];

      // Server component bills data extracted successfully
    } else {
      // Bills fetch failed with HTTP error
    }
  } catch {
    // Bills fetch error occurred
    billsData = [];
  }

  // Fetch votes data server-side
  let votingData: unknown[] = [];
  let votesResponseData: unknown = null;
  try {
    const votesResponse = await fetch(votesUrl, {
      headers: {
        Accept: &apos;application/json&apos;,
      },
    });

    if (votesResponse.ok) {
      votesResponseData = await votesResponse.json();
      const votesObj = votesResponseData as Record&lt;string, unknown&gt;;

      // Extract metadata for transparency
      const _votesMetadata = extractTransparencyMetadata(votesObj);

      votingData = Array.isArray(votesObj?.votes) ? votesObj.votes : [];

      // Server component votes data extracted successfully
    } else {
      // Votes fetch failed with HTTP error
    }
  } catch {
    // Votes fetch error occurred
    votingData = [];
  }
  const financeData: Record&lt;string, unknown&gt; = {};
  const newsData: unknown[] = [];
  const _partyAlignmentData: Record&lt;string, unknown&gt; = {};
  const partialErrors: Record&lt;string, string&gt; = {};

  // Validate essential representative data - be more lenient
  if (
    !representative ||
    (!representative.name &amp;&amp; !representative.firstName &amp;&amp; !representative.lastName)
  ) {
    notFound();
  }

  // Set display name if needed
  if (!representative.name &amp;&amp; representative.firstName &amp;&amp; representative.lastName) {
    representative.name = `${representative.firstName} ${representative.lastName}`;
  }

  // Debug logging removed - was causing RSC serialization issues

  return (
    &lt;&gt;
      &lt;SiteHeader /&gt;

      &lt;div className=&quot;container mx-auto px-4 py-6&quot;&gt;
        &lt;Link href=&quot;/&quot; className=&quot;inline-flex items-center text-blue-600 hover:text-blue-800 mb-4&quot;&gt;
          â† Back to Search
        &lt;/Link&gt;
      &lt;/div&gt;

      &lt;ChunkLoadErrorBoundary&gt;
        &lt;ErrorBoundary&gt;
          &lt;RepresentativeClient
            representative={representative}
            serverData={{
              bills: billsData,
              votes: votingData,
              finance: financeData,
              news: newsData,
            }}
            partialErrors={partialErrors}
          /&gt;
        &lt;/ErrorBoundary&gt;
      &lt;/ChunkLoadErrorBoundary&gt;
    &lt;/&gt;
  );
}

export async function generateMetadata({ params }: { params: Promise&lt;{ bioguideId: string }&gt; }) {
  const { bioguideId } = await params;

  return {
    title: `Representative ${bioguideId} | CIV.IQ`,
    description: `View detailed information about federal representative ${bioguideId}`,
  };
}

</file>
<file path="[bioguideId]/simple/page.tsx">
/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

import { SimpleClientWrapper } from &apos;@/components/client/SimpleClientWrapper&apos;;

interface PageProps {
  params: Promise&lt;{
    bioguideId: string;
  }&gt;;
}

export default async function TestSimplePage({ params }: PageProps) {
  const { bioguideId } = await params;

  // Simplified test data to avoid TypeScript conflicts
  const representative = {
    bioguideId,
    name: &apos;Test Representative&apos;,
    party: &apos;Democratic&apos;,
    state: &apos;MI&apos;,
    chamber: &apos;House&apos;,
    district: &apos;12&apos;,
  };

  const initialData = {
    votes: [] as unknown[],
    bills: [
      {
        title: &apos;Test Bill for Simple Component&apos;,
        number: &apos;HR-TEST-123&apos;,
        congress: &apos;119&apos;,
        introducedDate: &apos;2025-01-01&apos;,
      },
    ] as unknown[],
    finance: {
      test: &apos;finance data available&apos;,
      financial_summary: [],
      recent_contributions: [],
    } as unknown,
    news: [] as unknown[],
  };

  return (
    &lt;SimpleClientWrapper
      bioguideId={bioguideId}
      initialData={initialData}
      representative={representative}
    /&gt;
  );
}

</file>
<file path="[bioguideId]/simple-client-wrapper.tsx">
&apos;use client&apos;;

import { TabsEnhanced } from &apos;./TabsEnhanced&apos;;

interface SimpleClientWrapperProps {
  representative: {
    bioguideId: string;
    name: string;
    chamber: string;
    party: string;
    state: string;
    district?: string;
  };
  bioguideId: string;
  serverData?: {
    bills?: unknown[];
    votes?: unknown[];
    finance?: Record&lt;string, unknown&gt;;
    news?: unknown[];
  };
}

export function SimpleClientWrapper({
  representative,
  bioguideId,
  serverData,
}: SimpleClientWrapperProps) {
  // STEP 2 DEBUG: Client wrapper data reception
  if (process.env.NODE_ENV === &apos;development&apos;) {
    // eslint-disable-next-line no-console
    console.log(&apos;\n=== STEP 2: CLIENT WRAPPER DATA RECEPTION ===&apos;);
    // eslint-disable-next-line no-console
    console.log(&apos;ðŸ” Representative prop:&apos;, representative);
    // eslint-disable-next-line no-console
    console.log(&apos;ðŸ” BioguideId prop:&apos;, bioguideId);
    // eslint-disable-next-line no-console
    console.log(&apos;ðŸ” Server data prop:&apos;, serverData);
    // eslint-disable-next-line no-console
    console.log(&apos;ðŸ” Bills from server:&apos;, serverData?.bills);
    // eslint-disable-next-line no-console
    console.log(&apos;ðŸ” Votes from server:&apos;, serverData?.votes);
    // eslint-disable-next-line no-console
    console.log(
      &apos;ðŸ” Bills count:&apos;,
      Array.isArray(serverData?.bills) ? serverData.bills.length : &apos;Not an array&apos;
    );
    // eslint-disable-next-line no-console
    console.log(
      &apos;ðŸ” Votes count:&apos;,
      Array.isArray(serverData?.votes) ? serverData.votes.length : &apos;Not an array&apos;
    );
  }
  return (
    &lt;div className=&quot;space-y-6&quot;&gt;
      &lt;div className=&quot;bg-white rounded-lg shadow-sm p-6&quot;&gt;
        &lt;h2 className=&quot;text-2xl font-bold mb-4&quot;&gt;Representative Data&lt;/h2&gt;
        &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;
          View comprehensive information about this representative including their profile,
          sponsored bills, voting records, campaign finance, and recent news.
        &lt;/p&gt;
      &lt;/div&gt;

      &lt;TabsEnhanced
        bioguideId={bioguideId}
        representative={{
          name: representative.name,
          chamber: representative.chamber,
          party: representative.party,
          state: representative.state,
        }}
        serverData={serverData}
      /&gt;
    &lt;/div&gt;
  );
}

</file>
<file path="[bioguideId]/simple-page.tsx">
/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

&apos;use client&apos;;

import { useEffect, useState } from &apos;react&apos;;
import Link from &apos;next/link&apos;;

interface RepresentativeData {
  member?: {
    bioguideId: string;
    name: string;
    firstName?: string;
    lastName?: string;
    partyName?: string;
    state?: string;
    district?: string;
    chamber?: string;
    title?: string;
    phone?: string;
    email?: string;
    url?: string;
    depiction?: {
      imageUrl?: string;
    };
  };
  error?: string;
}

function CiviqLogo() {
  return (
    &lt;div className=&quot;flex items-center&quot;&gt;
      &lt;svg className=&quot;w-8 h-8&quot; viewBox=&quot;0 0 100 100&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;
        &lt;rect x=&quot;36&quot; y=&quot;51&quot; width=&quot;28&quot; height=&quot;30&quot; fill=&quot;#0b983c&quot; /&gt;
        &lt;circle cx=&quot;50&quot; cy=&quot;31&quot; r=&quot;22&quot; fill=&quot;#ffffff&quot; /&gt;
        &lt;circle cx=&quot;50&quot; cy=&quot;31&quot; r=&quot;20&quot; fill=&quot;#e11d07&quot; /&gt;
        &lt;circle cx=&quot;38&quot; cy=&quot;89&quot; r=&quot;2&quot; fill=&quot;#3ea2d4&quot; /&gt;
        &lt;circle cx=&quot;46&quot; cy=&quot;89&quot; r=&quot;2&quot; fill=&quot;#3ea2d4&quot; /&gt;
        &lt;circle cx=&quot;54&quot; cy=&quot;89&quot; r=&quot;2&quot; fill=&quot;#3ea2d4&quot; /&gt;
        &lt;circle cx=&quot;62&quot; cy=&quot;89&quot; r=&quot;2&quot; fill=&quot;#3ea2d4&quot; /&gt;
      &lt;/svg&gt;
      &lt;span className=&quot;ml-2 text-lg font-bold text-gray-900&quot;&gt;CIV.IQ&lt;/span&gt;
    &lt;/div&gt;
  );
}

export default function SimpleRepresentativePage({ bioguideId }: { bioguideId: string }) {
  const [data, setData] = useState&lt;RepresentativeData | null&gt;(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState&lt;string | null&gt;(null);

  useEffect(() =&gt; {
    const fetchData = async () =&gt; {
      try {
        // eslint-disable-next-line no-console
        console.log(&apos;[CLIENT] Fetching representative:&apos;, bioguideId);

        const response = await fetch(`/api/representative/${bioguideId}/simple`);
        const result = await response.json();

        // eslint-disable-next-line no-console
        console.log(&apos;[CLIENT] API Response:&apos;, response.status, result);

        if (!response.ok) {
          setError(result.error || &apos;Failed to load representative&apos;);
          return;
        }

        setData(result);
      } catch (err) {
        // eslint-disable-next-line no-console
        console.error(&apos;[CLIENT] Fetch error:&apos;, err);
        setError(&apos;Failed to load representative data&apos;);
      } finally {
        setLoading(false);
      }
    };

    fetchData();
  }, [bioguideId]);

  if (loading) {
    return (
      &lt;div className=&quot;min-h-screen bg-gray-50&quot;&gt;
        &lt;header className=&quot;bg-white shadow-sm border-b border-gray-200&quot;&gt;
          &lt;div className=&quot;max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4&quot;&gt;
            &lt;Link href=&quot;/&quot; className=&quot;hover:opacity-80 transition-opacity&quot;&gt;
              &lt;CiviqLogo /&gt;
            &lt;/Link&gt;
          &lt;/div&gt;
        &lt;/header&gt;
        &lt;main className=&quot;max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8&quot;&gt;
          &lt;div className=&quot;text-center&quot;&gt;
            &lt;div className=&quot;animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto&quot;&gt;&lt;/div&gt;
            &lt;p className=&quot;mt-4 text-gray-600&quot;&gt;Loading representative data...&lt;/p&gt;
          &lt;/div&gt;
        &lt;/main&gt;
      &lt;/div&gt;
    );
  }

  if (error || !data?.member) {
    return (
      &lt;div className=&quot;min-h-screen bg-gray-50&quot;&gt;
        &lt;header className=&quot;bg-white shadow-sm border-b border-gray-200&quot;&gt;
          &lt;div className=&quot;max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4&quot;&gt;
            &lt;Link href=&quot;/&quot; className=&quot;hover:opacity-80 transition-opacity&quot;&gt;
              &lt;CiviqLogo /&gt;
            &lt;/Link&gt;
          &lt;/div&gt;
        &lt;/header&gt;
        &lt;main className=&quot;max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8&quot;&gt;
          &lt;div className=&quot;text-center&quot;&gt;
            &lt;h1 className=&quot;text-2xl font-bold text-gray-900 mb-4&quot;&gt;Representative Not Found&lt;/h1&gt;
            &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;{error || &apos;Could not load representative data&apos;}&lt;/p&gt;
            &lt;p className=&quot;text-sm text-gray-500&quot;&gt;BioGuide ID: {bioguideId}&lt;/p&gt;
            &lt;Link
              href=&quot;/representatives&quot;
              className=&quot;mt-6 inline-block bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700&quot;
            &gt;
              Browse All Representatives
            &lt;/Link&gt;
          &lt;/div&gt;
        &lt;/main&gt;
      &lt;/div&gt;
    );
  }

  const member = data.member;
  const displayName = member.name || `${member.firstName || &apos;&apos;} ${member.lastName || &apos;&apos;}`.trim();
  const chamber = member.chamber === &apos;House of Representatives&apos; ? &apos;House&apos; : &apos;Senate&apos;;
  const title = member.title || (chamber === &apos;House&apos; ? &apos;Representative&apos; : &apos;Senator&apos;);

  return (
    &lt;div className=&quot;min-h-screen bg-gray-50&quot;&gt;
      &lt;header className=&quot;bg-white shadow-sm border-b border-gray-200&quot;&gt;
        &lt;div className=&quot;max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4&quot;&gt;
          &lt;Link href=&quot;/&quot; className=&quot;hover:opacity-80 transition-opacity&quot;&gt;
            &lt;CiviqLogo /&gt;
          &lt;/Link&gt;
        &lt;/div&gt;
      &lt;/header&gt;

      &lt;main className=&quot;max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8&quot;&gt;
        &lt;div className=&quot;bg-white shadow rounded-lg&quot;&gt;
          &lt;div className=&quot;px-6 py-8&quot;&gt;
            &lt;div className=&quot;flex items-start space-x-6&quot;&gt;
              {member.depiction?.imageUrl &amp;&amp; (
                // eslint-disable-next-line @next/next/no-img-element
                &lt;img
                  src={member.depiction.imageUrl}
                  alt={displayName}
                  className=&quot;w-24 h-24 rounded-full object-cover&quot;
                /&gt;
              )}
              &lt;div className=&quot;flex-1&quot;&gt;
                &lt;h1 className=&quot;text-3xl font-bold text-gray-900&quot;&gt;{displayName}&lt;/h1&gt;
                &lt;p className=&quot;text-xl text-gray-600 mt-1&quot;&gt;
                  {title} â€¢ {member.partyName} â€¢ {member.state}
                  {member.district &amp;&amp; ` District ${member.district}`}
                &lt;/p&gt;
                &lt;p className=&quot;text-lg text-gray-500 mt-2&quot;&gt;{chamber}&lt;/p&gt;

                &lt;div className=&quot;mt-4 space-y-2&quot;&gt;
                  {member.phone &amp;&amp; &lt;p className=&quot;text-gray-700&quot;&gt;ðŸ“ž {member.phone}&lt;/p&gt;}
                  {member.email &amp;&amp; &lt;p className=&quot;text-gray-700&quot;&gt;âœ‰ï¸ {member.email}&lt;/p&gt;}
                  {member.url &amp;&amp; (
                    &lt;p className=&quot;text-gray-700&quot;&gt;
                      ðŸŒ{&apos; &apos;}
                      &lt;a
                        href={member.url}
                        target=&quot;_blank&quot;
                        rel=&quot;noopener noreferrer&quot;
                        className=&quot;text-blue-600 hover:underline&quot;
                      &gt;
                        Official Website
                      &lt;/a&gt;
                    &lt;/p&gt;
                  )}
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;

          &lt;div className=&quot;border-t border-gray-200 px-6 py-4&quot;&gt;
            &lt;p className=&quot;text-sm text-gray-500&quot;&gt;
              &lt;strong&gt;Note:&lt;/strong&gt; This is a simplified view showing basic information from
              Congress.gov. Additional features like voting records, bills, and news will be added
              soon.
            &lt;/p&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div className=&quot;mt-8 text-center&quot;&gt;
          &lt;Link
            href=&quot;/representatives&quot;
            className=&quot;bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700&quot;
          &gt;
            Browse All Representatives
          &lt;/Link&gt;
        &lt;/div&gt;
      &lt;/main&gt;
    &lt;/div&gt;
  );
}

</file>
<file path="[bioguideId]/tabs/BillsTab.tsx">
/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

&apos;use client&apos;;

import React from &apos;react&apos;;

interface Bill {
  id: string;
  number: string;
  title: string;
  introducedDate: string;
  status: string;
  lastAction: string;
  congress: number;
  type: string;
  policyArea: string;
  url?: string;
  committee?: string;
  progress?: number;
}

interface BillsTabProps {
  bills: Bill[];
  metadata?: unknown;
  loading?: boolean;
}

export function BillsTab({ bills = [] }: BillsTabProps) {
  // Calculate bill statistics
  const totalBills = bills.length;
  const enactedBills = bills.filter(bill =&gt; bill.status.toLowerCase().includes(&apos;enacted&apos;)).length;
  const avgCosponsors = 0; // This would come from actual data
  const totalSupport = 0; // This would come from actual data

  return (
    &lt;&gt;
      &lt;h2 className=&quot;text-lg font-semibold mb-4&quot;&gt;Legislative Tracker&lt;/h2&gt;

      &lt;div className=&quot;grid grid-cols-4 gap-4 mb-8&quot;&gt;
        &lt;div className=&quot;text-center&quot;&gt;
          &lt;div className=&quot;text-3xl font-bold text-blue-600&quot;&gt;{totalBills}&lt;/div&gt;
          &lt;div className=&quot;text-sm text-gray-500&quot;&gt;Bills Sponsored&lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;text-center&quot;&gt;
          &lt;div className=&quot;text-3xl font-bold text-green-600&quot;&gt;{enactedBills}&lt;/div&gt;
          &lt;div className=&quot;text-sm text-gray-500&quot;&gt;Enacted&lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;text-center&quot;&gt;
          &lt;div className=&quot;text-3xl font-bold text-yellow-600&quot;&gt;{avgCosponsors}&lt;/div&gt;
          &lt;div className=&quot;text-sm text-gray-500&quot;&gt;Avg Cosponsors&lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;text-center&quot;&gt;
          &lt;div className=&quot;text-3xl font-bold text-purple-600&quot;&gt;{totalSupport}&lt;/div&gt;
          &lt;div className=&quot;text-sm text-gray-500&quot;&gt;Total Support&lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {bills.length === 0 ? (
        &lt;p className=&quot;text-gray-500 text-center py-8&quot;&gt;No bills data available&lt;/p&gt;
      ) : (
        &lt;div className=&quot;space-y-4&quot;&gt;
          {bills.slice(0, 10).map(bill =&gt; (
            &lt;div key={bill.id} className=&quot;border rounded-lg p-4&quot;&gt;
              &lt;h3 className=&quot;font-medium&quot;&gt;
                {bill.url ? (
                  &lt;a
                    href={bill.url}
                    target=&quot;_blank&quot;
                    rel=&quot;noopener noreferrer&quot;
                    className=&quot;text-blue-600 hover:underline&quot;
                  &gt;
                    {bill.number}: {bill.title}
                  &lt;/a&gt;
                ) : (
                  `${bill.number}: ${bill.title}`
                )}
              &lt;/h3&gt;
              &lt;p className=&quot;text-sm text-gray-500 mt-1&quot;&gt;
                Introduced: {new Date(bill.introducedDate).toLocaleDateString()}
              &lt;/p&gt;
              &lt;p className=&quot;text-sm text-gray-600 mt-1&quot;&gt;{bill.lastAction}&lt;/p&gt;
              &lt;div className=&quot;flex gap-2 mt-2&quot;&gt;
                &lt;span className=&quot;text-xs bg-gray-100 px-2 py-1 rounded&quot;&gt;
                  {bill.committee || &apos;Committee: Unknown&apos;}
                &lt;/span&gt;
                &lt;span className=&quot;text-xs bg-blue-100 px-2 py-1 rounded&quot;&gt;{bill.type}&lt;/span&gt;
                {bill.policyArea &amp;&amp; (
                  &lt;span className=&quot;text-xs bg-green-100 px-2 py-1 rounded&quot;&gt;{bill.policyArea}&lt;/span&gt;
                )}
                &lt;span className=&quot;text-xs bg-yellow-100 px-2 py-1 rounded&quot;&gt;
                  {bill.status || &apos;Status: Unknown&apos;}
                &lt;/span&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          ))}
        &lt;/div&gt;
      )}
    &lt;/&gt;
  );
}

</file>
<file path="[bioguideId]/tabs/FinanceTab.tsx">
/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

&apos;use client&apos;;

import React from &apos;react&apos;;

interface FinanceData {
  totalRaised: number;
  totalSpent: number;
  cashOnHand: number;
  donations: {
    individual: number;
    pac: number;
    party: number;
    candidate: number;
  };
  topContributors: Array&lt;{
    name: string;
    amount: number;
    type: &apos;Individual&apos; | &apos;PAC&apos; | &apos;Party Committee&apos;;
  }&gt;;
  industryBreakdown: Array&lt;{
    industry: string;
    amount: number;
    percentage: number;
  }&gt;;
  spendingCategories: Array&lt;{
    category: string;
    amount: number;
    percentage: number;
  }&gt;;
}

interface FinanceTabProps {
  financeData: FinanceData;
  metadata?: unknown;
  loading?: boolean;
}

export function FinanceTab({ financeData }: FinanceTabProps) {
  // Provide default values if financeData is null/undefined
  const safeFinanceData = financeData || {
    totalRaised: 0,
    totalSpent: 0,
    cashOnHand: 0,
    donations: { individual: 0, pac: 0, party: 0, candidate: 0 },
    topContributors: [],
    industryBreakdown: [],
    spendingCategories: [],
  };

  const formatCurrency = (amount: number) =&gt; {
    return new Intl.NumberFormat(&apos;en-US&apos;, {
      style: &apos;currency&apos;,
      currency: &apos;USD&apos;,
      minimumFractionDigits: 0,
      maximumFractionDigits: 0,
    }).format(amount || 0);
  };

  return (
    &lt;&gt;
      &lt;h2 className=&quot;text-lg font-semibold mb-4&quot;&gt;Campaign Finance&lt;/h2&gt;

      {/* Financial Overview */}
      &lt;div className=&quot;grid grid-cols-3 gap-4 mb-8&quot;&gt;
        &lt;div className=&quot;text-center&quot;&gt;
          &lt;div className=&quot;text-3xl font-bold text-green-600&quot;&gt;
            {formatCurrency(safeFinanceData.totalRaised)}
          &lt;/div&gt;
          &lt;div className=&quot;text-sm text-gray-500&quot;&gt;Total Raised&lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;text-center&quot;&gt;
          &lt;div className=&quot;text-3xl font-bold text-red-600&quot;&gt;
            {formatCurrency(safeFinanceData.totalSpent)}
          &lt;/div&gt;
          &lt;div className=&quot;text-sm text-gray-500&quot;&gt;Total Spent&lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;text-center&quot;&gt;
          &lt;div className=&quot;text-3xl font-bold text-blue-600&quot;&gt;
            {formatCurrency(safeFinanceData.cashOnHand)}
          &lt;/div&gt;
          &lt;div className=&quot;text-sm text-gray-500&quot;&gt;Cash on Hand&lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Donation Sources */}
      &lt;h3 className=&quot;font-medium mb-3&quot;&gt;Donation Sources&lt;/h3&gt;
      &lt;div className=&quot;grid grid-cols-2 md:grid-cols-4 gap-4 mb-8&quot;&gt;
        &lt;div className=&quot;text-center p-4 bg-gray-50 rounded&quot;&gt;
          &lt;div className=&quot;text-xl font-bold&quot;&gt;
            {formatCurrency(safeFinanceData.donations.individual)}
          &lt;/div&gt;
          &lt;div className=&quot;text-sm text-gray-500&quot;&gt;Individual&lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;text-center p-4 bg-gray-50 rounded&quot;&gt;
          &lt;div className=&quot;text-xl font-bold&quot;&gt;{formatCurrency(safeFinanceData.donations.pac)}&lt;/div&gt;
          &lt;div className=&quot;text-sm text-gray-500&quot;&gt;PAC&lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;text-center p-4 bg-gray-50 rounded&quot;&gt;
          &lt;div className=&quot;text-xl font-bold&quot;&gt;{formatCurrency(safeFinanceData.donations.party)}&lt;/div&gt;
          &lt;div className=&quot;text-sm text-gray-500&quot;&gt;Party&lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;text-center p-4 bg-gray-50 rounded&quot;&gt;
          &lt;div className=&quot;text-xl font-bold&quot;&gt;
            {formatCurrency(safeFinanceData.donations.candidate)}
          &lt;/div&gt;
          &lt;div className=&quot;text-sm text-gray-500&quot;&gt;Candidate&lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Top Contributors */}
      {safeFinanceData.topContributors.length &gt; 0 &amp;&amp; (
        &lt;div className=&quot;mb-8&quot;&gt;
          &lt;h3 className=&quot;font-medium mb-3&quot;&gt;Top Contributors&lt;/h3&gt;
          &lt;div className=&quot;space-y-2&quot;&gt;
            {safeFinanceData.topContributors.slice(0, 5).map((contributor, index) =&gt; (
              &lt;div key={index} className=&quot;flex justify-between items-center p-3 bg-gray-50 rounded&quot;&gt;
                &lt;div&gt;
                  &lt;div className=&quot;font-medium&quot;&gt;{contributor.name}&lt;/div&gt;
                  &lt;div className=&quot;text-sm text-gray-500&quot;&gt;{contributor.type}&lt;/div&gt;
                &lt;/div&gt;
                &lt;div className=&quot;text-right&quot;&gt;
                  &lt;div className=&quot;font-medium&quot;&gt;{formatCurrency(contributor.amount)}&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            ))}
          &lt;/div&gt;
        &lt;/div&gt;
      )}

      {/* Industry Breakdown */}
      {safeFinanceData.industryBreakdown.length &gt; 0 &amp;&amp; (
        &lt;div className=&quot;mb-8&quot;&gt;
          &lt;h3 className=&quot;font-medium mb-3&quot;&gt;Industry Breakdown&lt;/h3&gt;
          &lt;div className=&quot;space-y-2&quot;&gt;
            {safeFinanceData.industryBreakdown.slice(0, 5).map((industry, index) =&gt; (
              &lt;div key={index} className=&quot;flex items-center gap-3&quot;&gt;
                &lt;span className=&quot;w-32 text-sm&quot;&gt;{industry.industry}&lt;/span&gt;
                &lt;div className=&quot;flex-1 bg-gray-200 rounded h-6&quot;&gt;
                  &lt;div
                    className=&quot;bg-blue-500 h-6 rounded&quot;
                    style={{ width: `${industry.percentage}%` }}
                  &gt;&lt;/div&gt;
                &lt;/div&gt;
                &lt;span className=&quot;text-sm w-16 text-right&quot;&gt;{formatCurrency(industry.amount)}&lt;/span&gt;
              &lt;/div&gt;
            ))}
          &lt;/div&gt;
        &lt;/div&gt;
      )}

      {/* Data Notice */}
      {safeFinanceData.totalRaised === 0 &amp;&amp; (
        &lt;div className=&quot;text-center py-8&quot;&gt;
          &lt;p className=&quot;text-gray-500&quot;&gt;No campaign finance data available&lt;/p&gt;
          &lt;p className=&quot;text-sm text-gray-400 mt-2&quot;&gt;
            Financial data is sourced from FEC filings and may be delayed
          &lt;/p&gt;
        &lt;/div&gt;
      )}
    &lt;/&gt;
  );
}

</file>
<file path="[bioguideId]/tabs/VotingTab.tsx">
/**
 * Copyright (c) 2019-2025 Mark Sandford
 * Licensed under the MIT License. See LICENSE and NOTICE files.
 */

&apos;use client&apos;;

import React from &apos;react&apos;;

interface Vote {
  id: string;
  date: string;
  bill?: {
    number: string;
    title: string;
    url?: string;
  };
  question?: string;
  description: string;
  position: &apos;Yea&apos; | &apos;Nay&apos; | &apos;Present&apos; | &apos;Not Voting&apos;;
  result: &apos;Passed&apos; | &apos;Failed&apos; | &apos;Agreed to&apos; | &apos;Disagreed to&apos;;
  chamber: &apos;House&apos; | &apos;Senate&apos;;
  category?: string;
}

interface VotingTabProps {
  votes: Vote[];
  metadata?: unknown;
  loading?: boolean;
}

export function VotingTab({ votes = [] }: VotingTabProps) {
  // Calculate voting statistics
  const yesVotes = votes.filter(vote =&gt; vote.position === &apos;Yea&apos;).length;
  const nayVotes = votes.filter(vote =&gt; vote.position === &apos;Nay&apos;).length;
  const presentVotes = votes.filter(vote =&gt; vote.position === &apos;Present&apos;).length;
  const notVotingVotes = votes.filter(vote =&gt; vote.position === &apos;Not Voting&apos;).length;
  const totalVotes = votes.length;
  const keyVotes = votes.filter(vote =&gt; vote.category === &apos;key&apos;).length;

  return (
    &lt;&gt;
      &lt;h2 className=&quot;text-lg font-semibold mb-4&quot;&gt;Interactive Voting Analysis&lt;/h2&gt;

      {/* Metrics */}
      &lt;div className=&quot;grid grid-cols-5 gap-4 mb-8&quot;&gt;
        &lt;div className=&quot;text-center&quot;&gt;
          &lt;div className=&quot;text-3xl font-bold&quot;&gt;{totalVotes}&lt;/div&gt;
          &lt;div className=&quot;text-sm text-gray-500&quot;&gt;Total Votes&lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;text-center&quot;&gt;
          &lt;div className=&quot;text-3xl font-bold text-green-600&quot;&gt;{yesVotes}&lt;/div&gt;
          &lt;div className=&quot;text-sm text-gray-500&quot;&gt;Yes&lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;text-center&quot;&gt;
          &lt;div className=&quot;text-3xl font-bold text-red-600&quot;&gt;{nayVotes}&lt;/div&gt;
          &lt;div className=&quot;text-sm text-gray-500&quot;&gt;Nay&lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;text-center&quot;&gt;
          &lt;div className=&quot;text-3xl font-bold&quot;&gt;{presentVotes}&lt;/div&gt;
          &lt;div className=&quot;text-sm text-gray-500&quot;&gt;Present&lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;text-center&quot;&gt;
          &lt;div className=&quot;text-3xl font-bold&quot;&gt;{keyVotes}&lt;/div&gt;
          &lt;div className=&quot;text-sm text-gray-500&quot;&gt;Key Votes&lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Position Bars */}
      &lt;h3 className=&quot;font-medium mb-3&quot;&gt;Position Distribution&lt;/h3&gt;
      &lt;div className=&quot;space-y-2 mb-8&quot;&gt;
        &lt;div className=&quot;flex items-center gap-3&quot;&gt;
          &lt;span className=&quot;w-20 text-sm&quot;&gt;Yes&lt;/span&gt;
          &lt;div className=&quot;flex-1 bg-gray-200 rounded h-6&quot;&gt;
            &lt;div
              className=&quot;bg-green-500 h-6 rounded&quot;
              style={{
                width: totalVotes &gt; 0 ? `${(yesVotes / totalVotes) * 100}%` : &apos;0%&apos;,
              }}
            &gt;&lt;/div&gt;
          &lt;/div&gt;
          &lt;span className=&quot;text-sm&quot;&gt;
            {totalVotes &gt; 0 ? Math.round((yesVotes / totalVotes) * 100) : 0}%
          &lt;/span&gt;
        &lt;/div&gt;
        &lt;div className=&quot;flex items-center gap-3&quot;&gt;
          &lt;span className=&quot;w-20 text-sm&quot;&gt;Nay&lt;/span&gt;
          &lt;div className=&quot;flex-1 bg-gray-200 rounded h-6&quot;&gt;
            &lt;div
              className=&quot;bg-red-500 h-6 rounded&quot;
              style={{
                width: totalVotes &gt; 0 ? `${(nayVotes / totalVotes) * 100}%` : &apos;0%&apos;,
              }}
            &gt;&lt;/div&gt;
          &lt;/div&gt;
          &lt;span className=&quot;text-sm&quot;&gt;
            {totalVotes &gt; 0 ? Math.round((nayVotes / totalVotes) * 100) : 0}%
          &lt;/span&gt;
        &lt;/div&gt;
        {presentVotes &gt; 0 &amp;&amp; (
          &lt;div className=&quot;flex items-center gap-3&quot;&gt;
            &lt;span className=&quot;w-20 text-sm&quot;&gt;Present&lt;/span&gt;
            &lt;div className=&quot;flex-1 bg-gray-200 rounded h-6&quot;&gt;
              &lt;div
                className=&quot;bg-yellow-500 h-6 rounded&quot;
                style={{
                  width: totalVotes &gt; 0 ? `${(presentVotes / totalVotes) * 100}%` : &apos;0%&apos;,
                }}
              &gt;&lt;/div&gt;
            &lt;/div&gt;
            &lt;span className=&quot;text-sm&quot;&gt;
              {totalVotes &gt; 0 ? Math.round((presentVotes / totalVotes) * 100) : 0}%
            &lt;/span&gt;
          &lt;/div&gt;
        )}
        {notVotingVotes &gt; 0 &amp;&amp; (
          &lt;div className=&quot;flex items-center gap-3&quot;&gt;
            &lt;span className=&quot;w-20 text-sm&quot;&gt;Not Voting&lt;/span&gt;
            &lt;div className=&quot;flex-1 bg-gray-200 rounded h-6&quot;&gt;
              &lt;div
                className=&quot;bg-gray-500 h-6 rounded&quot;
                style={{
                  width: totalVotes &gt; 0 ? `${(notVotingVotes / totalVotes) * 100}%` : &apos;0%&apos;,
                }}
              &gt;&lt;/div&gt;
            &lt;/div&gt;
            &lt;span className=&quot;text-sm&quot;&gt;
              {totalVotes &gt; 0 ? Math.round((notVotingVotes / totalVotes) * 100) : 0}%
            &lt;/span&gt;
          &lt;/div&gt;
        )}
      &lt;/div&gt;

      {/* Recent Votes */}
      &lt;h3 className=&quot;font-medium mb-3&quot;&gt;Recent Voting Record&lt;/h3&gt;
      {votes.length === 0 ? (
        &lt;p className=&quot;text-gray-500 text-center py-8&quot;&gt;No voting data available&lt;/p&gt;
      ) : (
        &lt;div className=&quot;overflow-x-auto&quot;&gt;
          &lt;table className=&quot;w-full&quot;&gt;
            &lt;thead&gt;
              &lt;tr className=&quot;border-b&quot;&gt;
                &lt;th className=&quot;text-left py-2&quot;&gt;Bill&lt;/th&gt;
                &lt;th className=&quot;text-left py-2&quot;&gt;Description&lt;/th&gt;
                &lt;th className=&quot;text-left py-2&quot;&gt;Date&lt;/th&gt;
                &lt;th className=&quot;text-right py-2&quot;&gt;Position&lt;/th&gt;
              &lt;/tr&gt;
            &lt;/thead&gt;
            &lt;tbody&gt;
              {votes.slice(0, 10).map(vote =&gt; (
                &lt;tr key={vote.id} className=&quot;border-b&quot;&gt;
                  &lt;td className=&quot;py-3&quot;&gt;
                    {vote.bill?.number ? (
                      vote.bill.url ? (
                        &lt;a
                          href={vote.bill.url}
                          target=&quot;_blank&quot;
                          rel=&quot;noopener noreferrer&quot;
                          className=&quot;text-blue-600 hover:underline&quot;
                        &gt;
                          {vote.bill.number}
                        &lt;/a&gt;
                      ) : (
                        vote.bill.number
                      )
                    ) : (
                      &apos;Voice Vote&apos;
                    )}
                  &lt;/td&gt;
                  &lt;td className=&quot;py-3 text-sm text-gray-600&quot;&gt;
                    {vote.bill?.title || vote.question || vote.description}
                  &lt;/td&gt;
                  &lt;td className=&quot;py-3 text-sm text-gray-500&quot;&gt;
                    {new Date(vote.date).toLocaleDateString()}
                  &lt;/td&gt;
                  &lt;td className=&quot;text-right py-3&quot;&gt;
                    &lt;span
                      className={`px-2 py-1 rounded text-sm ${
                        vote.position === &apos;Yea&apos;
                          ? &apos;bg-green-100 text-green-700&apos;
                          : vote.position === &apos;Nay&apos;
                            ? &apos;bg-red-100 text-red-700&apos;
                            : vote.position === &apos;Present&apos;
                              ? &apos;bg-yellow-100 text-yellow-700&apos;
                              : &apos;bg-gray-100 text-gray-700&apos;
                      }`}
                    &gt;
                      {vote.position}
                    &lt;/span&gt;
                  &lt;/td&gt;
                &lt;/tr&gt;
              ))}
            &lt;/tbody&gt;
          &lt;/table&gt;
        &lt;/div&gt;
      )}
    &lt;/&gt;
  );
}

</file>
<file path="[bioguideId]/TabsEnhanced.tsx">
/* eslint-disable @typescript-eslint/no-explicit-any */
&apos;use client&apos;;

import { useState, useEffect } from &apos;react&apos;;
import {
  User,
  FileText,
  Vote,
  DollarSign,
  Newspaper,
  AlertCircle,
  Calendar,
  Phone,
  Globe,
  Clock,
} from &apos;lucide-react&apos;;

interface TabsEnhancedProps {
  bioguideId: string;
  representative: {
    name: string;
    chamber: string;
    party: string;
    state: string;
    district?: string;
  };
  serverData?: {
    bills?: unknown[];
    votes?: unknown[];
    finance?: Record&lt;string, unknown&gt;;
    news?: unknown[];
  };
}

// Enhanced component for Profile tab
function ProfileContent({ data }: { data: Record&lt;string, any&gt; }) {
  if (!data) return null;

  return (
    &lt;div className=&quot;space-y-6&quot;&gt;
      &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-6&quot;&gt;
        &lt;div className=&quot;space-y-4&quot;&gt;
          &lt;h4 className=&quot;font-semibold text-gray-900 flex items-center gap-2&quot;&gt;
            &lt;User className=&quot;h-5 w-5 text-blue-500&quot; /&gt;
            Basic Information
          &lt;/h4&gt;
          &lt;dl className=&quot;space-y-2&quot;&gt;
            &lt;div className=&quot;flex justify-between&quot;&gt;
              &lt;dt className=&quot;text-gray-600&quot;&gt;Name:&lt;/dt&gt;
              &lt;dd className=&quot;font-medium&quot;&gt;{data.name || &apos;N/A&apos;}&lt;/dd&gt;
            &lt;/div&gt;
            &lt;div className=&quot;flex justify-between&quot;&gt;
              &lt;dt className=&quot;text-gray-600&quot;&gt;Chamber:&lt;/dt&gt;
              &lt;dd className=&quot;font-medium&quot;&gt;{data.chamber || &apos;N/A&apos;}&lt;/dd&gt;
            &lt;/div&gt;
            &lt;div className=&quot;flex justify-between&quot;&gt;
              &lt;dt className=&quot;text-gray-600&quot;&gt;Party:&lt;/dt&gt;
              &lt;dd className=&quot;font-medium&quot;&gt;{data.party || &apos;N/A&apos;}&lt;/dd&gt;
            &lt;/div&gt;
            &lt;div className=&quot;flex justify-between&quot;&gt;
              &lt;dt className=&quot;text-gray-600&quot;&gt;State:&lt;/dt&gt;
              &lt;dd className=&quot;font-medium&quot;&gt;{data.state || &apos;N/A&apos;}&lt;/dd&gt;
            &lt;/div&gt;
            {data.district &amp;&amp; (
              &lt;div className=&quot;flex justify-between&quot;&gt;
                &lt;dt className=&quot;text-gray-600&quot;&gt;District:&lt;/dt&gt;
                &lt;dd className=&quot;font-medium&quot;&gt;{data.district}&lt;/dd&gt;
              &lt;/div&gt;
            )}
          &lt;/dl&gt;
        &lt;/div&gt;

        {data.contact &amp;&amp; (
          &lt;div className=&quot;space-y-4&quot;&gt;
            &lt;h4 className=&quot;font-semibold text-gray-900 flex items-center gap-2&quot;&gt;
              &lt;Phone className=&quot;h-5 w-5 text-blue-500&quot; /&gt;
              Contact Information
            &lt;/h4&gt;
            &lt;dl className=&quot;space-y-2&quot;&gt;
              {data.contact.phone &amp;&amp; (
                &lt;div className=&quot;flex justify-between&quot;&gt;
                  &lt;dt className=&quot;text-gray-600&quot;&gt;Phone:&lt;/dt&gt;
                  &lt;dd className=&quot;font-medium&quot;&gt;{data.contact.phone}&lt;/dd&gt;
                &lt;/div&gt;
              )}
              {data.contact.website &amp;&amp; (
                &lt;div className=&quot;flex justify-between&quot;&gt;
                  &lt;dt className=&quot;text-gray-600&quot;&gt;Website:&lt;/dt&gt;
                  &lt;dd&gt;
                    &lt;a
                      href={data.contact.website}
                      target=&quot;_blank&quot;
                      rel=&quot;noopener noreferrer&quot;
                      className=&quot;text-blue-600 hover:underline flex items-center gap-1&quot;
                    &gt;
                      &lt;Globe className=&quot;h-4 w-4&quot; /&gt;
                      Visit
                    &lt;/a&gt;
                  &lt;/dd&gt;
                &lt;/div&gt;
              )}
            &lt;/dl&gt;
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    &lt;/div&gt;
  );
}

// Enhanced component for Bills tab
function BillsContent({ data }: { data: Record&lt;string, any&gt; }) {
  if (process.env.NODE_ENV === &apos;development&apos;) {
    // eslint-disable-next-line no-console
    console.log(&apos;ðŸ” BillsContent received data:&apos;, data);
  }

  // Handle different data structures from API
  let bills: unknown[] = [];
  if (data?.sponsoredLegislation &amp;&amp; Array.isArray(data.sponsoredLegislation)) {
    bills = data.sponsoredLegislation;
  } else if (data?.bills &amp;&amp; Array.isArray(data.bills)) {
    bills = data.bills;
  } else if (Array.isArray(data)) {
    bills = data;
  }

  if (process.env.NODE_ENV === &apos;development&apos;) {
    // eslint-disable-next-line no-console
    console.log(&apos;ðŸ” BillsContent processed bills:&apos;, bills);
  }

  if (!bills || bills.length === 0) {
    return &lt;div className=&quot;text-gray-500&quot;&gt;No bills data available&lt;/div&gt;;
  }

  return (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
        &lt;h4 className=&quot;font-semibold text-gray-900 flex items-center gap-2&quot;&gt;
          &lt;FileText className=&quot;h-5 w-5 text-blue-500&quot; /&gt;
          Sponsored Legislation ({bills.length})
        &lt;/h4&gt;
      &lt;/div&gt;

      &lt;div className=&quot;space-y-3&quot;&gt;
        {bills.slice(0, 10).map((bill: any, index: number) =&gt; (
          &lt;div key={index} className=&quot;border rounded-lg p-4 hover:bg-gray-50 transition-colors&quot;&gt;
            &lt;div className=&quot;flex items-start justify-between&quot;&gt;
              &lt;div className=&quot;flex-1&quot;&gt;
                &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
                  &lt;span className=&quot;font-semibold text-blue-600&quot;&gt;
                    {bill.type}
                    {bill.number || ` ${bill.congress}-${index + 1}`}
                  &lt;/span&gt;
                  &lt;span className=&quot;text-xs px-2 py-1 bg-gray-100 rounded&quot;&gt;
                    {bill.congress}th Congress
                  &lt;/span&gt;
                &lt;/div&gt;
                &lt;h5 className=&quot;font-medium text-gray-900 mb-2&quot;&gt;{bill.title || &apos;Untitled Bill&apos;}&lt;/h5&gt;
                &lt;div className=&quot;flex items-center gap-4 text-sm text-gray-600&quot;&gt;
                  &lt;span className=&quot;flex items-center gap-1&quot;&gt;
                    &lt;Calendar className=&quot;h-4 w-4&quot; /&gt;
                    {bill.introducedDate || bill.latestAction?.actionDate || &apos;Date unknown&apos;}
                  &lt;/span&gt;
                  {bill.latestAction?.text &amp;&amp; (
                    &lt;span className=&quot;flex-1 truncate&quot;&gt;Latest: {bill.latestAction.text}&lt;/span&gt;
                  )}
                &lt;/div&gt;
              &lt;/div&gt;
              {bill.url &amp;&amp; (
                &lt;a
                  href={bill.url}
                  target=&quot;_blank&quot;
                  rel=&quot;noopener noreferrer&quot;
                  className=&quot;ml-4 text-blue-600 hover:text-blue-800&quot;
                &gt;
                  &lt;Globe className=&quot;h-5 w-5&quot; /&gt;
                &lt;/a&gt;
              )}
            &lt;/div&gt;
          &lt;/div&gt;
        ))}
      &lt;/div&gt;

      {bills.length &gt; 10 &amp;&amp; (
        &lt;div className=&quot;text-center text-sm text-gray-500 pt-4&quot;&gt;
          Showing 10 of {bills.length} bills
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
}

// Enhanced component for Votes tab
function VotesContent({ data }: { data: Record&lt;string, any&gt; }) {
  if (process.env.NODE_ENV === &apos;development&apos;) {
    // eslint-disable-next-line no-console
    console.log(&apos;ðŸ” VotesContent received data:&apos;, data);
  }

  const votes = data?.votes as unknown[];
  const votingPattern = data?.votingPattern as Record&lt;string, unknown&gt;;

  if (process.env.NODE_ENV === &apos;development&apos;) {
    // eslint-disable-next-line no-console
    console.log(&apos;ðŸ” VotesContent votes:&apos;, votes);
    // eslint-disable-next-line no-console
    console.log(&apos;ðŸ” VotesContent votingPattern:&apos;, votingPattern);
  }

  if (!votes || votes.length === 0) {
    return &lt;div className=&quot;text-gray-500&quot;&gt;No voting records available&lt;/div&gt;;
  }

  return (
    &lt;div className=&quot;space-y-6&quot;&gt;
      {/* Voting Summary */}
      {votingPattern &amp;&amp; (
        &lt;div className=&quot;grid grid-cols-4 gap-4 mb-6&quot;&gt;
          &lt;div className=&quot;bg-green-50 rounded-lg p-3 text-center&quot;&gt;
            &lt;div className=&quot;text-2xl font-bold text-green-600&quot;&gt;
              {Number(votingPattern.yes || 0)}
            &lt;/div&gt;
            &lt;div className=&quot;text-sm text-gray-600&quot;&gt;Yes Votes&lt;/div&gt;
          &lt;/div&gt;
          &lt;div className=&quot;bg-red-50 rounded-lg p-3 text-center&quot;&gt;
            &lt;div className=&quot;text-2xl font-bold text-red-600&quot;&gt;{Number(votingPattern.no || 0)}&lt;/div&gt;
            &lt;div className=&quot;text-sm text-gray-600&quot;&gt;No Votes&lt;/div&gt;
          &lt;/div&gt;
          &lt;div className=&quot;bg-yellow-50 rounded-lg p-3 text-center&quot;&gt;
            &lt;div className=&quot;text-2xl font-bold text-yellow-600&quot;&gt;
              {Number(votingPattern.present || 0)}
            &lt;/div&gt;
            &lt;div className=&quot;text-sm text-gray-600&quot;&gt;Present&lt;/div&gt;
          &lt;/div&gt;
          &lt;div className=&quot;bg-gray-50 rounded-lg p-3 text-center&quot;&gt;
            &lt;div className=&quot;text-2xl font-bold text-gray-600&quot;&gt;
              {Number(votingPattern.notVoting || 0)}
            &lt;/div&gt;
            &lt;div className=&quot;text-sm text-gray-600&quot;&gt;Not Voting&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      )}

      {/* Recent Votes */}
      &lt;div&gt;
        &lt;h4 className=&quot;font-semibold text-gray-900 flex items-center gap-2 mb-4&quot;&gt;
          &lt;Vote className=&quot;h-5 w-5 text-blue-500&quot; /&gt;
          Recent Votes
        &lt;/h4&gt;

        &lt;div className=&quot;space-y-3&quot;&gt;
          {votes.slice(0, 10).map((vote: any, index: number) =&gt; (
            &lt;div key={index} className=&quot;border rounded-lg p-4 hover:bg-gray-50 transition-colors&quot;&gt;
              &lt;div className=&quot;flex items-start justify-between&quot;&gt;
                &lt;div className=&quot;flex-1&quot;&gt;
                  &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
                    &lt;span
                      className={`px-2 py-1 rounded text-sm font-medium ${
                        vote.position === &apos;Yea&apos;
                          ? &apos;bg-green-100 text-green-700&apos;
                          : vote.position === &apos;Nay&apos;
                            ? &apos;bg-red-100 text-red-700&apos;
                            : vote.position === &apos;Present&apos;
                              ? &apos;bg-yellow-100 text-yellow-700&apos;
                              : &apos;bg-gray-100 text-gray-700&apos;
                      }`}
                    &gt;
                      {vote.position}
                    &lt;/span&gt;
                    &lt;span className=&quot;text-sm text-gray-600&quot;&gt;
                      {vote.chamber} â€¢ Roll #{vote.rollNumber}
                    &lt;/span&gt;
                  &lt;/div&gt;
                  &lt;p className=&quot;text-gray-900 mb-2&quot;&gt;{vote.question || vote.description}&lt;/p&gt;
                  &lt;div className=&quot;flex items-center gap-4 text-sm text-gray-600&quot;&gt;
                    &lt;span className=&quot;flex items-center gap-1&quot;&gt;
                      &lt;Calendar className=&quot;h-4 w-4&quot; /&gt;
                      {new Date(vote.date).toLocaleDateString()}
                    &lt;/span&gt;
                    &lt;span&gt;Result: {vote.result}&lt;/span&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          ))}
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}

// Enhanced component for Finance tab
function FinanceContent({ data }: { data: Record&lt;string, any&gt; }) {
  if (process.env.NODE_ENV === &apos;development&apos;) {
    // eslint-disable-next-line no-console
    console.log(&apos;ðŸ” FinanceContent received data:&apos;, data);
  }

  // Handle FEC API structure
  const summary = data?.financial_summary?.[0] || (data?.summary as Record&lt;string, unknown&gt;);
  const topContributors = data?.top_contributors || (data?.topContributors as unknown[]);
  const candidateInfo = data?.candidate_info as Record&lt;string, unknown&gt;;

  if (process.env.NODE_ENV === &apos;development&apos;) {
    // eslint-disable-next-line no-console
    console.log(&apos;ðŸ” FinanceContent summary:&apos;, summary);
    // eslint-disable-next-line no-console
    console.log(&apos;ðŸ” FinanceContent topContributors:&apos;, topContributors);
  }

  if (!summary &amp;&amp; !candidateInfo) {
    return &lt;div className=&quot;text-gray-500&quot;&gt;No campaign finance data available&lt;/div&gt;;
  }

  return (
    &lt;div className=&quot;space-y-6&quot;&gt;
      &lt;h4 className=&quot;font-semibold text-gray-900 flex items-center gap-2&quot;&gt;
        &lt;DollarSign className=&quot;h-5 w-5 text-green-500&quot; /&gt;
        Campaign Finance Summary
      &lt;/h4&gt;

      &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4&quot;&gt;
        {summary?.total_receipts !== undefined &amp;&amp; summary?.total_receipts !== null &amp;&amp; (
          &lt;div className=&quot;bg-blue-50 rounded-lg p-4&quot;&gt;
            &lt;div className=&quot;text-sm text-gray-600 mb-1&quot;&gt;Total Receipts&lt;/div&gt;
            &lt;div className=&quot;text-2xl font-bold text-blue-600&quot;&gt;
              ${Number(summary.total_receipts || 0).toLocaleString()}
            &lt;/div&gt;
          &lt;/div&gt;
        )}

        {summary?.total_disbursements !== undefined &amp;&amp; summary?.total_disbursements !== null &amp;&amp; (
          &lt;div className=&quot;bg-orange-50 rounded-lg p-4&quot;&gt;
            &lt;div className=&quot;text-sm text-gray-600 mb-1&quot;&gt;Total Disbursements&lt;/div&gt;
            &lt;div className=&quot;text-2xl font-bold text-orange-600&quot;&gt;
              ${Number(summary.total_disbursements || 0).toLocaleString()}
            &lt;/div&gt;
          &lt;/div&gt;
        )}

        {summary?.cash_on_hand_end_period !== undefined &amp;&amp;
          summary?.cash_on_hand_end_period !== null &amp;&amp; (
            &lt;div className=&quot;bg-green-50 rounded-lg p-4&quot;&gt;
              &lt;div className=&quot;text-sm text-gray-600 mb-1&quot;&gt;Cash on Hand&lt;/div&gt;
              &lt;div className=&quot;text-2xl font-bold text-green-600&quot;&gt;
                ${Number(summary.cash_on_hand_end_period || 0).toLocaleString()}
              &lt;/div&gt;
            &lt;/div&gt;
          )}
      &lt;/div&gt;

      {topContributors &amp;&amp; topContributors.length &gt; 0 &amp;&amp; (
        &lt;div className=&quot;mt-6&quot;&gt;
          &lt;h5 className=&quot;font-medium text-gray-900 mb-3&quot;&gt;Top Contributors&lt;/h5&gt;
          &lt;div className=&quot;space-y-2&quot;&gt;
            {topContributors.slice(0, 5).map((contributor: any, index: number) =&gt; (
              &lt;div key={index} className=&quot;flex justify-between items-center p-3 bg-gray-50 rounded&quot;&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-gray-700 font-medium&quot;&gt;{contributor.name}&lt;/div&gt;
                  {contributor.employer &amp;&amp; (
                    &lt;div className=&quot;text-sm text-gray-500&quot;&gt;{contributor.employer}&lt;/div&gt;
                  )}
                &lt;/div&gt;
                &lt;span className=&quot;font-medium&quot;&gt;
                  ${Number(contributor.total_amount || contributor.total || 0).toLocaleString()}
                &lt;/span&gt;
              &lt;/div&gt;
            ))}
          &lt;/div&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
}

// Enhanced component for News tab
function NewsContent({ data }: { data: Record&lt;string, any&gt; }) {
  if (process.env.NODE_ENV === &apos;development&apos;) {
    // eslint-disable-next-line no-console
    console.log(&apos;ðŸ” NewsContent received data:&apos;, data);
  }

  const articles = data?.articles as unknown[];

  if (process.env.NODE_ENV === &apos;development&apos;) {
    // eslint-disable-next-line no-console
    console.log(&apos;ðŸ” NewsContent articles:&apos;, articles);
  }

  if (!articles || articles.length === 0) {
    return (
      &lt;div className=&quot;text-center py-8&quot;&gt;
        &lt;Newspaper className=&quot;h-12 w-12 text-gray-300 mx-auto mb-3&quot; /&gt;
        &lt;div className=&quot;text-gray-500&quot;&gt;No recent news available&lt;/div&gt;
        &lt;div className=&quot;text-sm text-gray-400 mt-1&quot;&gt;
          News data is sourced from GDELT and may not be available for all representatives
        &lt;/div&gt;
      &lt;/div&gt;
    );
  }

  return (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;h4 className=&quot;font-semibold text-gray-900 flex items-center gap-2 mb-4&quot;&gt;
        &lt;Newspaper className=&quot;h-5 w-5 text-blue-500&quot; /&gt;
        Recent News ({articles.length})
      &lt;/h4&gt;

      &lt;div className=&quot;space-y-3&quot;&gt;
        {articles.slice(0, 10).map((article: any, index: number) =&gt; (
          &lt;div key={index} className=&quot;border rounded-lg p-4 hover:bg-gray-50 transition-colors&quot;&gt;
            &lt;div className=&quot;flex items-start justify-between&quot;&gt;
              &lt;div className=&quot;flex-1&quot;&gt;
                &lt;h5 className=&quot;font-medium text-gray-900 mb-2 line-clamp-2&quot;&gt;{article.title}&lt;/h5&gt;
                {article.description &amp;&amp; (
                  &lt;p className=&quot;text-sm text-gray-600 mb-2 line-clamp-2&quot;&gt;{article.description}&lt;/p&gt;
                )}
                &lt;div className=&quot;flex items-center gap-4 text-sm text-gray-500&quot;&gt;
                  &lt;span&gt;{article.source?.name || &apos;Unknown Source&apos;}&lt;/span&gt;
                  &lt;span className=&quot;flex items-center gap-1&quot;&gt;
                    &lt;Calendar className=&quot;h-4 w-4&quot; /&gt;
                    {new Date(article.publishedAt || article.date).toLocaleDateString()}
                  &lt;/span&gt;
                &lt;/div&gt;
              &lt;/div&gt;
              {article.url &amp;&amp; (
                &lt;a
                  href={article.url}
                  target=&quot;_blank&quot;
                  rel=&quot;noopener noreferrer&quot;
                  className=&quot;ml-4 text-blue-600 hover:text-blue-800&quot;
                &gt;
                  &lt;Globe className=&quot;h-5 w-5&quot; /&gt;
                &lt;/a&gt;
              )}
            &lt;/div&gt;
          &lt;/div&gt;
        ))}
      &lt;/div&gt;

      {articles.length &gt; 10 &amp;&amp; (
        &lt;div className=&quot;text-center text-sm text-gray-500 pt-4&quot;&gt;
          Showing 10 of {articles.length} articles
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
}

export function TabsEnhanced({ bioguideId, representative, serverData }: TabsEnhancedProps) {
  const [activeTab, setActiveTab] = useState(&apos;profile&apos;);
  const [data, setData] = useState&lt;Record&lt;string, unknown&gt; | null&gt;(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState&lt;string | null&gt;(null);

  useEffect(() =&gt; {
    const fetchData = async () =&gt; {
      setLoading(true);
      setError(null);
      setData(null);

      // STEP 3 DEBUG: Individual tab component data structure
      if (process.env.NODE_ENV === &apos;development&apos;) {
        // eslint-disable-next-line no-console
        console.log(&apos;\n=== STEP 3: TABS ENHANCED COMPONENT DATA ===&apos;);
        // eslint-disable-next-line no-console
        console.log(`ðŸ” Current tab: ${activeTab}`);
        // eslint-disable-next-line no-console
        console.log(&apos;ðŸ” Server data available:&apos;, !!serverData);
        // eslint-disable-next-line no-console
        console.log(&apos;ðŸ” Server data structure:&apos;, serverData);
      }

      try {
        let url = &apos;&apos;;

        switch (activeTab) {
          case &apos;profile&apos;:
            // Just show the representative data we already have
            if (process.env.NODE_ENV === &apos;development&apos;) {
              // eslint-disable-next-line no-console
              console.log(&apos;ðŸ” Profile data:&apos;, representative);
            }
            setData(representative);
            setLoading(false);
            return;

          case &apos;bills&apos;:
            // Check for server-provided bills data first
            if (
              serverData?.bills &amp;&amp;
              Array.isArray(serverData.bills) &amp;&amp;
              serverData.bills.length &gt; 0
            ) {
              if (process.env.NODE_ENV === &apos;development&apos;) {
                // eslint-disable-next-line no-console
                console.log(&apos;ðŸš€ Using SERVER bills data:&apos;, serverData.bills);
              }
              setData({ bills: serverData.bills, sponsoredLegislation: serverData.bills });
              setLoading(false);
              return;
            }
            url = `/api/representative/${bioguideId}/bills`;
            break;

          case &apos;votes&apos;:
            // Check for server-provided votes data first
            if (
              serverData?.votes &amp;&amp;
              Array.isArray(serverData.votes) &amp;&amp;
              serverData.votes.length &gt; 0
            ) {
              if (process.env.NODE_ENV === &apos;development&apos;) {
                // eslint-disable-next-line no-console
                console.log(&apos;ðŸš€ Using SERVER votes data:&apos;, serverData.votes);
              }
              setData({ votes: serverData.votes });
              setLoading(false);
              return;
            }
            url = `/api/representative/${bioguideId}/votes`;
            break;

          case &apos;finance&apos;:
            // Check for server-provided finance data first
            if (serverData?.finance &amp;&amp; Object.keys(serverData.finance).length &gt; 0) {
              if (process.env.NODE_ENV === &apos;development&apos;) {
                // eslint-disable-next-line no-console
                console.log(&apos;ðŸš€ Using SERVER finance data:&apos;, serverData.finance);
              }
              setData(serverData.finance);
              setLoading(false);
              return;
            }
            url = `/api/representative/${bioguideId}/finance`;
            break;

          case &apos;news&apos;:
            // Check for server-provided news data first
            if (serverData?.news &amp;&amp; Array.isArray(serverData.news) &amp;&amp; serverData.news.length &gt; 0) {
              if (process.env.NODE_ENV === &apos;development&apos;) {
                // eslint-disable-next-line no-console
                console.log(&apos;ðŸš€ Using SERVER news data:&apos;, serverData.news);
              }
              setData({ articles: serverData.news });
              setLoading(false);
              return;
            }
            url = `/api/representative/${bioguideId}/news`;
            break;

          default:
            setData({ message: &apos;Select a tab&apos; });
            setLoading(false);
            return;
        }

        // Fallback to API fetch if no server data available
        if (process.env.NODE_ENV === &apos;development&apos;) {
          // eslint-disable-next-line no-console
          console.log(`ðŸ” No server data for ${activeTab}, fetching from API:`, url);
        }
        const response = await fetch(url);

        if (!response.ok) {
          throw new Error(`HTTP ${response.status}`);
        }

        const jsonData = await response.json();
        if (process.env.NODE_ENV === &apos;development&apos;) {
          // eslint-disable-next-line no-console
          console.log(`âœ… ${activeTab} API data received:`, jsonData);
        }
        setData(jsonData);
      } catch (err) {
        if (process.env.NODE_ENV === &apos;development&apos;) {
          // eslint-disable-next-line no-console
          console.error(`âŒ Error fetching ${activeTab} data:`, err);
        }
        setError(err instanceof Error ? err.message : &apos;Failed to fetch&apos;);
        setData(null);
      } finally {
        setLoading(false);
      }
    };

    fetchData();
  }, [activeTab, bioguideId, representative, serverData]);

  const tabs = [
    { id: &apos;profile&apos;, label: &apos;Profile&apos;, icon: User },
    { id: &apos;bills&apos;, label: &apos;Bills&apos;, icon: FileText },
    { id: &apos;votes&apos;, label: &apos;Votes&apos;, icon: Vote },
    { id: &apos;finance&apos;, label: &apos;Finance&apos;, icon: DollarSign },
    { id: &apos;news&apos;, label: &apos;News&apos;, icon: Newspaper },
  ];

  return (
    &lt;div className=&quot;space-y-4&quot;&gt;
      {/* Enhanced Tab Navigation */}
      &lt;div className=&quot;border-b border-gray-200 bg-white&quot;&gt;
        &lt;nav className=&quot;flex space-x-8 px-4&quot;&gt;
          {tabs.map(tab =&gt; {
            const Icon = tab.icon;
            return (
              &lt;button
                key={tab.id}
                onClick={() =&gt; setActiveTab(tab.id)}
                className={`py-3 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors ${
                  activeTab === tab.id
                    ? &apos;border-blue-500 text-blue-600&apos;
                    : &apos;border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300&apos;
                }`}
              &gt;
                &lt;Icon className=&quot;h-4 w-4&quot; /&gt;
                {tab.label}
              &lt;/button&gt;
            );
          })}
        &lt;/nav&gt;
      &lt;/div&gt;

      {/* Enhanced Content Area */}
      &lt;div className=&quot;bg-white rounded-lg shadow-sm border p-6 min-h-[400px]&quot;&gt;
        {loading &amp;&amp; (
          &lt;div className=&quot;flex items-center justify-center h-64&quot;&gt;
            &lt;div className=&quot;text-center&quot;&gt;
              &lt;Clock className=&quot;h-8 w-8 text-gray-400 animate-spin mx-auto mb-3&quot; /&gt;
              &lt;p className=&quot;text-gray-500&quot;&gt;Loading {activeTab} data...&lt;/p&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        )}

        {error &amp;&amp; (
          &lt;div className=&quot;flex items-center justify-center h-64&quot;&gt;
            &lt;div className=&quot;text-center&quot;&gt;
              &lt;AlertCircle className=&quot;h-8 w-8 text-red-400 mx-auto mb-3&quot; /&gt;
              &lt;p className=&quot;text-red-500&quot;&gt;
                Error loading {activeTab}: {error}
              &lt;/p&gt;
              &lt;button
                onClick={() =&gt; setActiveTab(activeTab)}
                className=&quot;mt-3 text-sm text-blue-600 hover:underline&quot;
              &gt;
                Try again
              &lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        )}

        {data !== null &amp;&amp; !loading &amp;&amp; !error &amp;&amp; (
          &lt;div&gt;
            {activeTab === &apos;profile&apos; &amp;&amp; &lt;ProfileContent data={data as Record&lt;string, any&gt;} /&gt;}
            {activeTab === &apos;bills&apos; &amp;&amp; &lt;BillsContent data={data as Record&lt;string, any&gt;} /&gt;}
            {activeTab === &apos;votes&apos; &amp;&amp; &lt;VotesContent data={data as Record&lt;string, any&gt;} /&gt;}
            {activeTab === &apos;finance&apos; &amp;&amp; &lt;FinanceContent data={data as Record&lt;string, any&gt;} /&gt;}
            {activeTab === &apos;news&apos; &amp;&amp; &lt;NewsContent data={data as Record&lt;string, any&gt;} /&gt;}
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    &lt;/div&gt;
  );
}

</file>
<file path="[bioguideId]/TabsSimple.tsx">
&apos;use client&apos;;

import { useState, useEffect } from &apos;react&apos;;

interface TabsSimpleProps {
  bioguideId: string;
  representative: {
    name: string;
    chamber: string;
    party: string;
    state: string;
  };
}

export function TabsSimple({ bioguideId, representative }: TabsSimpleProps) {
  const [activeTab, setActiveTab] = useState(&apos;profile&apos;);
  const [data, setData] = useState&lt;unknown&gt;(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState&lt;string | null&gt;(null);

  useEffect(() =&gt; {
    const fetchData = async () =&gt; {
      setLoading(true);
      setError(null);
      setData(null);

      try {
        let url = &apos;&apos;;

        switch (activeTab) {
          case &apos;profile&apos;:
            // Just show the representative data we already have
            setData(representative);
            setLoading(false);
            return;
          case &apos;bills&apos;:
            url = `/api/representative/${bioguideId}/bills`;
            break;
          case &apos;votes&apos;:
            url = `/api/representative/${bioguideId}/votes`;
            break;
          case &apos;finance&apos;:
            url = `/api/representative/${bioguideId}/finance`;
            break;
          case &apos;news&apos;:
            url = `/api/representative/${bioguideId}/news`;
            break;
          default:
            setData({ message: &apos;Select a tab&apos; });
            setLoading(false);
            return;
        }

        const response = await fetch(url);

        if (!response.ok) {
          throw new Error(`HTTP ${response.status}`);
        }

        const jsonData = await response.json();
        setData(jsonData);
      } catch (err) {
        setError(err instanceof Error ? err.message : &apos;Failed to fetch&apos;);
        setData(null);
      } finally {
        setLoading(false);
      }
    };

    fetchData();
  }, [activeTab, bioguideId, representative]);

  const tabs = [
    { id: &apos;profile&apos;, label: &apos;Profile&apos; },
    { id: &apos;bills&apos;, label: &apos;Bills&apos; },
    { id: &apos;votes&apos;, label: &apos;Votes&apos; },
    { id: &apos;finance&apos;, label: &apos;Finance&apos; },
    { id: &apos;news&apos;, label: &apos;News&apos; },
  ];

  return (
    &lt;div className=&quot;space-y-4&quot;&gt;
      {/* Simple Tab Navigation */}
      &lt;div className=&quot;border-b border-gray-200&quot;&gt;
        &lt;nav className=&quot;flex space-x-8&quot;&gt;
          {tabs.map(tab =&gt; (
            &lt;button
              key={tab.id}
              onClick={() =&gt; setActiveTab(tab.id)}
              className={`py-2 px-1 border-b-2 font-medium text-sm ${
                activeTab === tab.id
                  ? &apos;border-blue-500 text-blue-600&apos;
                  : &apos;border-transparent text-gray-500 hover:text-gray-700&apos;
              }`}
            &gt;
              {tab.label}
            &lt;/button&gt;
          ))}
        &lt;/nav&gt;
      &lt;/div&gt;

      {/* Content Area */}
      &lt;div className=&quot;bg-white rounded-lg border p-4&quot;&gt;
        &lt;h3 className=&quot;text-lg font-semibold mb-4&quot;&gt;
          Tab: {activeTab} | BioguideId: {bioguideId}
        &lt;/h3&gt;

        {loading &amp;&amp; &lt;div className=&quot;text-gray-500&quot;&gt;Loading {activeTab} data...&lt;/div&gt;}

        {error &amp;&amp; (
          &lt;div className=&quot;text-red-500&quot;&gt;
            Error loading {activeTab}: {error}
          &lt;/div&gt;
        )}

        {data !== null &amp;&amp; !loading &amp;&amp; !error &amp;&amp; (
          &lt;div&gt;
            &lt;p className=&quot;text-sm text-gray-600 mb-2&quot;&gt;Raw data from API:&lt;/p&gt;
            &lt;pre className=&quot;bg-gray-100 p-4 rounded overflow-auto max-h-96 text-xs&quot;&gt;
              {JSON.stringify(data, null, 2)}
            &lt;/pre&gt;
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    &lt;/div&gt;
  );
}

</file>
</codebase>